{"version":3,"mappings":"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","names":["f","require$$0","k","l","m","p","q","c","a","g","b","d","e","h","reactJsxRuntime_production_min","jsxRuntimeModule","client","createStoreImpl","createState","state","listeners","setState","partial","replace","nextState","previousState","listener","getState","api","initialState","__vite_import_meta_env__","createStore","React","shim","require$$1","is","x","y","objectIs","useSyncExternalStore","useRef","useEffect","useMemo","useDebugValue","withSelector_production","subscribe","getSnapshot","getServerSnapshot","selector","isEqual","instRef","inst","memoizedSelector","nextSnapshot","hasMemo","memoizedSnapshot","currentSelection","memoizedSelection","nextSelection","maybeGetServerSnapshot","value","withSelectorModule","ReactExports","useSyncExternalStoreWithSelector","useSyncExternalStoreExports","didWarnAboutEqualityFn","identity","arg","useStore","equalityFn","slice","createImpl","useBoundStore","create","createJSONStorage","getStorage","options","storage","name","_a","parse","str2","str","newValue","toThenable","fn","input","result","onFulfilled","_onRejected","_onFulfilled","onRejected","oldImpl","config","baseOptions","set","get","persistedState","currentState","hasHydrated","hydrationListeners","finishHydrationListeners","args","thenableSerialize","setItem","errorInSync","thenable","serializedValue","savedSetState","configResult","stateFromStorage","hydrate","cb","postRehydrationCallback","storageValue","deserializedStorageValue","migratedState","_a2","newOptions","newImpl","_b","migrationResult","migrated","persistImpl","persist","useAuthStore","user","isLoading","error","updates","currentUser","authSelectors","generateNotificationId","getSystemTheme","calculateDarkMode","theme","useUIStore","isDarkMode","currentTheme","newTheme","isDark","open","collapsed","type","props","notification","newNotification","duration","id","key","loading","query","focused","filters","newFilters","sortBy","sortOrder","page","items","store","baseClasses","variantClasses","sizeClasses","LoadingSpinner","size","spinnerSize","clsx","Button","variant","leftIcon","rightIcon","fullWidth","children","disabled","className","animate","ref","buttonClasses","content","jsxs","Fragment","jsx","motion","getInitials","part","Avatar","src","alt","fallback","imageError","setImageError","imageLoaded","setImageLoaded","avatarClasses","handleImageError","handleImageLoad","shouldShowImage","displayName","initials","dropdownVariants","Dropdown","onSelect","placeholder","searchable","maxHeight","buttonClassName","menuClassName","isOpen","setIsOpen","useState","searchTerm","setSearchTerm","dropdownRef","searchInputRef","selectedItem","item","filteredItems","handleClickOutside","event","handleToggle","handleSelect","AnimatePresence","index","Header","showSidebarToggle","showSearch","showNotifications","showUserMenu","sidebarOpen","toggleSidebar","searchQuery","setSearchQuery","searchFocused","setSearchFocused","notifications","clearNotifications","removeNotification","isAuthenticated","logout","navigate","useNavigate","userMenuItems","handleSearch","handleSearchFocus","handleSearchBlur","handleUserMenuSelect","getAuth","Link","n","positionClasses","arrowClasses","Tooltip","position","delay","contentClassName","isVisible","setIsVisible","tooltipPosition","setTooltipPosition","triggerRef","tooltipRef","timeoutRef","showTooltip","calculatePosition","hideTooltip","triggerRect","scrollLeft","scrollTop","tooltipVariants","tooltipContent","createPortal","firebaseConfig","initializeFirebaseApp","getApps","getApp","initializeApp","app","auth","db","getFirestore","isSupported","supported","getMessaging","PROJECT_LIMITS","PROJECT_COLORS","PROJECT_ICONS","ProjectServiceError","message","code","originalError","ProjectService","userId","collection","projectId","data","existingProjects","isGoogleUser","maxPosition","max","now","Timestamp","projectData","docRef","doc","updateDoc","addDoc","mode","projectsRef","where","limit","snapshot","getDocs","projectRef","projectDoc","getDoc","existingData","updateData","serverTimestamp","updatedDoc","orderField","direction","orderBy","project","tasksRef","tasksQuery","tasksSnapshot","incompleteCount","taskDoc","task","confirmed","deletionCheck","batch","writeBatch","taskCount","completedCount","callback","onSnapshot","projects","defaultMessage","projectService","AddProjectModal","onClose","onCreated","setName","description","setDescription","color","setColor","icon","setIcon","setLoading","setError","projectCount","setProjectCount","isEmailVerified","isVerified","isLimitReached","handleSubmit","err","i","navigationItems","settingsItems","NavigationItemComponent","isActive","onClick","handleClick","itemContent","Navigation","location","useLocation","setProjects","showAddProjectModal","setShowAddProjectModal","handleNavigate","path","isActiveItem","backdropVariants","Sidebar","sidebarCollapsed","setSidebarOpen","toggleSidebarCollapsed","closeSidebar","sidebarClasses","AppLayout","showHeader","showSidebar","headerProps","sidebarProps","Dashboard","lazy","__vitePreload","Tasks","Analytics","Widget","StickiesDemo","WidgetOnly","Login","Register","HelpSupport","Settings","LoadingScreen","AuthLayoutWrapper","Outlet","ProtectedRouteWrapper","setUser","localLoading","setLocalLoading","unsubscribe","onAuthStateChanged","profile","Navigate","App","Suspense","Routes","Route","queryClient","QueryClient","ReactDOM","QueryClientProvider","BrowserRouter"],"ignoreList":[0,1,2,3,4,5,6,7],"sources":["../../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../../node_modules/react/jsx-runtime.js","../../../node_modules/react-dom/client.js","../../../node_modules/zustand/esm/vanilla.mjs","../../../node_modules/use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.production.js","../../../node_modules/use-sync-external-store/shim/with-selector.js","../../../node_modules/zustand/esm/index.mjs","../../../node_modules/zustand/esm/middleware.mjs","../../src/store/slices/authSlice.ts","../../src/store/slices/uiSlice.ts","../../src/components/ui/Button/index.tsx","../../src/components/ui/Avatar/index.tsx","../../src/components/ui/Dropdown/index.tsx","../../src/components/layout/Header/index.tsx","../../src/components/ui/Tooltip/index.tsx","../../src/services/firebase/config.ts","../../src/types/project.ts","../../src/services/firebase/project.service.ts","../../src/components/AddProjectModal/index.tsx","../../src/components/layout/Navigation/index.tsx","../../src/components/layout/Sidebar/index.tsx","../../src/components/layout/AppLayout/index.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","const createStoreImpl = (createState) => {\n  let state;\n  const listeners = /* @__PURE__ */ new Set();\n  const setState = (partial, replace) => {\n    const nextState = typeof partial === \"function\" ? partial(state) : partial;\n    if (!Object.is(nextState, state)) {\n      const previousState = state;\n      state = (replace != null ? replace : typeof nextState !== \"object\" || nextState === null) ? nextState : Object.assign({}, state, nextState);\n      listeners.forEach((listener) => listener(state, previousState));\n    }\n  };\n  const getState = () => state;\n  const getInitialState = () => initialState;\n  const subscribe = (listener) => {\n    listeners.add(listener);\n    return () => listeners.delete(listener);\n  };\n  const destroy = () => {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      console.warn(\n        \"[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected.\"\n      );\n    }\n    listeners.clear();\n  };\n  const api = { setState, getState, getInitialState, subscribe, destroy };\n  const initialState = state = createState(setState, getState, api);\n  return api;\n};\nconst createStore = (createState) => createState ? createStoreImpl(createState) : createStoreImpl;\nvar vanilla = (createState) => {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n    console.warn(\n      \"[DEPRECATED] Default export is deprecated. Instead use import { createStore } from 'zustand/vanilla'.\"\n    );\n  }\n  return createStore(createState);\n};\n\nexport { createStore, vanilla as default };\n","/**\n * @license React\n * use-sync-external-store-shim/with-selector.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar React = require(\"react\"),\n  shim = require(\"use-sync-external-store/shim\");\nfunction is(x, y) {\n  return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n}\nvar objectIs = \"function\" === typeof Object.is ? Object.is : is,\n  useSyncExternalStore = shim.useSyncExternalStore,\n  useRef = React.useRef,\n  useEffect = React.useEffect,\n  useMemo = React.useMemo,\n  useDebugValue = React.useDebugValue;\nexports.useSyncExternalStoreWithSelector = function (\n  subscribe,\n  getSnapshot,\n  getServerSnapshot,\n  selector,\n  isEqual\n) {\n  var instRef = useRef(null);\n  if (null === instRef.current) {\n    var inst = { hasValue: !1, value: null };\n    instRef.current = inst;\n  } else inst = instRef.current;\n  instRef = useMemo(\n    function () {\n      function memoizedSelector(nextSnapshot) {\n        if (!hasMemo) {\n          hasMemo = !0;\n          memoizedSnapshot = nextSnapshot;\n          nextSnapshot = selector(nextSnapshot);\n          if (void 0 !== isEqual && inst.hasValue) {\n            var currentSelection = inst.value;\n            if (isEqual(currentSelection, nextSnapshot))\n              return (memoizedSelection = currentSelection);\n          }\n          return (memoizedSelection = nextSnapshot);\n        }\n        currentSelection = memoizedSelection;\n        if (objectIs(memoizedSnapshot, nextSnapshot)) return currentSelection;\n        var nextSelection = selector(nextSnapshot);\n        if (void 0 !== isEqual && isEqual(currentSelection, nextSelection))\n          return (memoizedSnapshot = nextSnapshot), currentSelection;\n        memoizedSnapshot = nextSnapshot;\n        return (memoizedSelection = nextSelection);\n      }\n      var hasMemo = !1,\n        memoizedSnapshot,\n        memoizedSelection,\n        maybeGetServerSnapshot =\n          void 0 === getServerSnapshot ? null : getServerSnapshot;\n      return [\n        function () {\n          return memoizedSelector(getSnapshot());\n        },\n        null === maybeGetServerSnapshot\n          ? void 0\n          : function () {\n              return memoizedSelector(maybeGetServerSnapshot());\n            }\n      ];\n    },\n    [getSnapshot, getServerSnapshot, selector, isEqual]\n  );\n  var value = useSyncExternalStore(subscribe, instRef[0], instRef[1]);\n  useEffect(\n    function () {\n      inst.hasValue = !0;\n      inst.value = value;\n    },\n    [value]\n  );\n  useDebugValue(value);\n  return value;\n};\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.production.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.development.js');\n}\n","import { createStore } from 'zustand/vanilla';\nexport * from 'zustand/vanilla';\nimport ReactExports from 'react';\nimport useSyncExternalStoreExports from 'use-sync-external-store/shim/with-selector.js';\n\nconst { useDebugValue } = ReactExports;\nconst { useSyncExternalStoreWithSelector } = useSyncExternalStoreExports;\nlet didWarnAboutEqualityFn = false;\nconst identity = (arg) => arg;\nfunction useStore(api, selector = identity, equalityFn) {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && equalityFn && !didWarnAboutEqualityFn) {\n    console.warn(\n      \"[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937\"\n    );\n    didWarnAboutEqualityFn = true;\n  }\n  const slice = useSyncExternalStoreWithSelector(\n    api.subscribe,\n    api.getState,\n    api.getServerState || api.getInitialState,\n    selector,\n    equalityFn\n  );\n  useDebugValue(slice);\n  return slice;\n}\nconst createImpl = (createState) => {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && typeof createState !== \"function\") {\n    console.warn(\n      \"[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.\"\n    );\n  }\n  const api = typeof createState === \"function\" ? createStore(createState) : createState;\n  const useBoundStore = (selector, equalityFn) => useStore(api, selector, equalityFn);\n  Object.assign(useBoundStore, api);\n  return useBoundStore;\n};\nconst create = (createState) => createState ? createImpl(createState) : createImpl;\nvar react = (createState) => {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n    console.warn(\n      \"[DEPRECATED] Default export is deprecated. Instead use `import { create } from 'zustand'`.\"\n    );\n  }\n  return create(createState);\n};\n\nexport { create, react as default, useStore };\n","const reduxImpl = (reducer, initial) => (set, _get, api) => {\n  api.dispatch = (action) => {\n    set((state) => reducer(state, action), false, action);\n    return action;\n  };\n  api.dispatchFromDevtools = true;\n  return { dispatch: (...a) => api.dispatch(...a), ...initial };\n};\nconst redux = reduxImpl;\n\nconst trackedConnections = /* @__PURE__ */ new Map();\nconst getTrackedConnectionState = (name) => {\n  const api = trackedConnections.get(name);\n  if (!api) return {};\n  return Object.fromEntries(\n    Object.entries(api.stores).map(([key, api2]) => [key, api2.getState()])\n  );\n};\nconst extractConnectionInformation = (store, extensionConnector, options) => {\n  if (store === void 0) {\n    return {\n      type: \"untracked\",\n      connection: extensionConnector.connect(options)\n    };\n  }\n  const existingConnection = trackedConnections.get(options.name);\n  if (existingConnection) {\n    return { type: \"tracked\", store, ...existingConnection };\n  }\n  const newConnection = {\n    connection: extensionConnector.connect(options),\n    stores: {}\n  };\n  trackedConnections.set(options.name, newConnection);\n  return { type: \"tracked\", store, ...newConnection };\n};\nconst devtoolsImpl = (fn, devtoolsOptions = {}) => (set, get, api) => {\n  const { enabled, anonymousActionType, store, ...options } = devtoolsOptions;\n  let extensionConnector;\n  try {\n    extensionConnector = (enabled != null ? enabled : (import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") && window.__REDUX_DEVTOOLS_EXTENSION__;\n  } catch (_e) {\n  }\n  if (!extensionConnector) {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && enabled) {\n      console.warn(\n        \"[zustand devtools middleware] Please install/enable Redux devtools extension\"\n      );\n    }\n    return fn(set, get, api);\n  }\n  const { connection, ...connectionInformation } = extractConnectionInformation(store, extensionConnector, options);\n  let isRecording = true;\n  api.setState = (state, replace, nameOrAction) => {\n    const r = set(state, replace);\n    if (!isRecording) return r;\n    const action = nameOrAction === void 0 ? { type: anonymousActionType || \"anonymous\" } : typeof nameOrAction === \"string\" ? { type: nameOrAction } : nameOrAction;\n    if (store === void 0) {\n      connection == null ? void 0 : connection.send(action, get());\n      return r;\n    }\n    connection == null ? void 0 : connection.send(\n      {\n        ...action,\n        type: `${store}/${action.type}`\n      },\n      {\n        ...getTrackedConnectionState(options.name),\n        [store]: api.getState()\n      }\n    );\n    return r;\n  };\n  const setStateFromDevtools = (...a) => {\n    const originalIsRecording = isRecording;\n    isRecording = false;\n    set(...a);\n    isRecording = originalIsRecording;\n  };\n  const initialState = fn(api.setState, get, api);\n  if (connectionInformation.type === \"untracked\") {\n    connection == null ? void 0 : connection.init(initialState);\n  } else {\n    connectionInformation.stores[connectionInformation.store] = api;\n    connection == null ? void 0 : connection.init(\n      Object.fromEntries(\n        Object.entries(connectionInformation.stores).map(([key, store2]) => [\n          key,\n          key === connectionInformation.store ? initialState : store2.getState()\n        ])\n      )\n    );\n  }\n  if (api.dispatchFromDevtools && typeof api.dispatch === \"function\") {\n    let didWarnAboutReservedActionType = false;\n    const originalDispatch = api.dispatch;\n    api.dispatch = (...a) => {\n      if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && a[0].type === \"__setState\" && !didWarnAboutReservedActionType) {\n        console.warn(\n          '[zustand devtools middleware] \"__setState\" action type is reserved to set state from the devtools. Avoid using it.'\n        );\n        didWarnAboutReservedActionType = true;\n      }\n      originalDispatch(...a);\n    };\n  }\n  connection.subscribe((message) => {\n    var _a;\n    switch (message.type) {\n      case \"ACTION\":\n        if (typeof message.payload !== \"string\") {\n          console.error(\n            \"[zustand devtools middleware] Unsupported action format\"\n          );\n          return;\n        }\n        return parseJsonThen(\n          message.payload,\n          (action) => {\n            if (action.type === \"__setState\") {\n              if (store === void 0) {\n                setStateFromDevtools(action.state);\n                return;\n              }\n              if (Object.keys(action.state).length !== 1) {\n                console.error(\n                  `\n                    [zustand devtools middleware] Unsupported __setState action format. \n                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { \"type\": \"__setState\", \"state\": { \"abc123Store\": { \"foo\": \"bar\" } } }\n                    `\n                );\n              }\n              const stateFromDevtools = action.state[store];\n              if (stateFromDevtools === void 0 || stateFromDevtools === null) {\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(stateFromDevtools)) {\n                setStateFromDevtools(stateFromDevtools);\n              }\n              return;\n            }\n            if (!api.dispatchFromDevtools) return;\n            if (typeof api.dispatch !== \"function\") return;\n            api.dispatch(action);\n          }\n        );\n      case \"DISPATCH\":\n        switch (message.payload.type) {\n          case \"RESET\":\n            setStateFromDevtools(initialState);\n            if (store === void 0) {\n              return connection == null ? void 0 : connection.init(api.getState());\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"COMMIT\":\n            if (store === void 0) {\n              connection == null ? void 0 : connection.init(api.getState());\n              return;\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"ROLLBACK\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                connection == null ? void 0 : connection.init(api.getState());\n                return;\n              }\n              setStateFromDevtools(state[store]);\n              connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n            });\n          case \"JUMP_TO_STATE\":\n          case \"JUMP_TO_ACTION\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(state[store])) {\n                setStateFromDevtools(state[store]);\n              }\n            });\n          case \"IMPORT_STATE\": {\n            const { nextLiftedState } = message.payload;\n            const lastComputedState = (_a = nextLiftedState.computedStates.slice(-1)[0]) == null ? void 0 : _a.state;\n            if (!lastComputedState) return;\n            if (store === void 0) {\n              setStateFromDevtools(lastComputedState);\n            } else {\n              setStateFromDevtools(lastComputedState[store]);\n            }\n            connection == null ? void 0 : connection.send(\n              null,\n              // FIXME no-any\n              nextLiftedState\n            );\n            return;\n          }\n          case \"PAUSE_RECORDING\":\n            return isRecording = !isRecording;\n        }\n        return;\n    }\n  });\n  return initialState;\n};\nconst devtools = devtoolsImpl;\nconst parseJsonThen = (stringified, f) => {\n  let parsed;\n  try {\n    parsed = JSON.parse(stringified);\n  } catch (e) {\n    console.error(\n      \"[zustand devtools middleware] Could not parse the received json\",\n      e\n    );\n  }\n  if (parsed !== void 0) f(parsed);\n};\n\nconst subscribeWithSelectorImpl = (fn) => (set, get, api) => {\n  const origSubscribe = api.subscribe;\n  api.subscribe = (selector, optListener, options) => {\n    let listener = selector;\n    if (optListener) {\n      const equalityFn = (options == null ? void 0 : options.equalityFn) || Object.is;\n      let currentSlice = selector(api.getState());\n      listener = (state) => {\n        const nextSlice = selector(state);\n        if (!equalityFn(currentSlice, nextSlice)) {\n          const previousSlice = currentSlice;\n          optListener(currentSlice = nextSlice, previousSlice);\n        }\n      };\n      if (options == null ? void 0 : options.fireImmediately) {\n        optListener(currentSlice, currentSlice);\n      }\n    }\n    return origSubscribe(listener);\n  };\n  const initialState = fn(set, get, api);\n  return initialState;\n};\nconst subscribeWithSelector = subscribeWithSelectorImpl;\n\nconst combine = (initialState, create) => (...a) => Object.assign({}, initialState, create(...a));\n\nfunction createJSONStorage(getStorage, options) {\n  let storage;\n  try {\n    storage = getStorage();\n  } catch (_e) {\n    return;\n  }\n  const persistStorage = {\n    getItem: (name) => {\n      var _a;\n      const parse = (str2) => {\n        if (str2 === null) {\n          return null;\n        }\n        return JSON.parse(str2, options == null ? void 0 : options.reviver);\n      };\n      const str = (_a = storage.getItem(name)) != null ? _a : null;\n      if (str instanceof Promise) {\n        return str.then(parse);\n      }\n      return parse(str);\n    },\n    setItem: (name, newValue) => storage.setItem(\n      name,\n      JSON.stringify(newValue, options == null ? void 0 : options.replacer)\n    ),\n    removeItem: (name) => storage.removeItem(name)\n  };\n  return persistStorage;\n}\nconst toThenable = (fn) => (input) => {\n  try {\n    const result = fn(input);\n    if (result instanceof Promise) {\n      return result;\n    }\n    return {\n      then(onFulfilled) {\n        return toThenable(onFulfilled)(result);\n      },\n      catch(_onRejected) {\n        return this;\n      }\n    };\n  } catch (e) {\n    return {\n      then(_onFulfilled) {\n        return this;\n      },\n      catch(onRejected) {\n        return toThenable(onRejected)(e);\n      }\n    };\n  }\n};\nconst oldImpl = (config, baseOptions) => (set, get, api) => {\n  let options = {\n    getStorage: () => localStorage,\n    serialize: JSON.stringify,\n    deserialize: JSON.parse,\n    partialize: (state) => state,\n    version: 0,\n    merge: (persistedState, currentState) => ({\n      ...currentState,\n      ...persistedState\n    }),\n    ...baseOptions\n  };\n  let hasHydrated = false;\n  const hydrationListeners = /* @__PURE__ */ new Set();\n  const finishHydrationListeners = /* @__PURE__ */ new Set();\n  let storage;\n  try {\n    storage = options.getStorage();\n  } catch (_e) {\n  }\n  if (!storage) {\n    return config(\n      (...args) => {\n        console.warn(\n          `[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`\n        );\n        set(...args);\n      },\n      get,\n      api\n    );\n  }\n  const thenableSerialize = toThenable(options.serialize);\n  const setItem = () => {\n    const state = options.partialize({ ...get() });\n    let errorInSync;\n    const thenable = thenableSerialize({ state, version: options.version }).then(\n      (serializedValue) => storage.setItem(options.name, serializedValue)\n    ).catch((e) => {\n      errorInSync = e;\n    });\n    if (errorInSync) {\n      throw errorInSync;\n    }\n    return thenable;\n  };\n  const savedSetState = api.setState;\n  api.setState = (state, replace) => {\n    savedSetState(state, replace);\n    void setItem();\n  };\n  const configResult = config(\n    (...args) => {\n      set(...args);\n      void setItem();\n    },\n    get,\n    api\n  );\n  let stateFromStorage;\n  const hydrate = () => {\n    var _a;\n    if (!storage) return;\n    hasHydrated = false;\n    hydrationListeners.forEach((cb) => cb(get()));\n    const postRehydrationCallback = ((_a = options.onRehydrateStorage) == null ? void 0 : _a.call(options, get())) || void 0;\n    return toThenable(storage.getItem.bind(storage))(options.name).then((storageValue) => {\n      if (storageValue) {\n        return options.deserialize(storageValue);\n      }\n    }).then((deserializedStorageValue) => {\n      if (deserializedStorageValue) {\n        if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== options.version) {\n          if (options.migrate) {\n            return options.migrate(\n              deserializedStorageValue.state,\n              deserializedStorageValue.version\n            );\n          }\n          console.error(\n            `State loaded from storage couldn't be migrated since no migrate function was provided`\n          );\n        } else {\n          return deserializedStorageValue.state;\n        }\n      }\n    }).then((migratedState) => {\n      var _a2;\n      stateFromStorage = options.merge(\n        migratedState,\n        (_a2 = get()) != null ? _a2 : configResult\n      );\n      set(stateFromStorage, true);\n      return setItem();\n    }).then(() => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\n      hasHydrated = true;\n      finishHydrationListeners.forEach((cb) => cb(stateFromStorage));\n    }).catch((e) => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\n    });\n  };\n  api.persist = {\n    setOptions: (newOptions) => {\n      options = {\n        ...options,\n        ...newOptions\n      };\n      if (newOptions.getStorage) {\n        storage = newOptions.getStorage();\n      }\n    },\n    clearStorage: () => {\n      storage == null ? void 0 : storage.removeItem(options.name);\n    },\n    getOptions: () => options,\n    rehydrate: () => hydrate(),\n    hasHydrated: () => hasHydrated,\n    onHydrate: (cb) => {\n      hydrationListeners.add(cb);\n      return () => {\n        hydrationListeners.delete(cb);\n      };\n    },\n    onFinishHydration: (cb) => {\n      finishHydrationListeners.add(cb);\n      return () => {\n        finishHydrationListeners.delete(cb);\n      };\n    }\n  };\n  hydrate();\n  return stateFromStorage || configResult;\n};\nconst newImpl = (config, baseOptions) => (set, get, api) => {\n  let options = {\n    storage: createJSONStorage(() => localStorage),\n    partialize: (state) => state,\n    version: 0,\n    merge: (persistedState, currentState) => ({\n      ...currentState,\n      ...persistedState\n    }),\n    ...baseOptions\n  };\n  let hasHydrated = false;\n  const hydrationListeners = /* @__PURE__ */ new Set();\n  const finishHydrationListeners = /* @__PURE__ */ new Set();\n  let storage = options.storage;\n  if (!storage) {\n    return config(\n      (...args) => {\n        console.warn(\n          `[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`\n        );\n        set(...args);\n      },\n      get,\n      api\n    );\n  }\n  const setItem = () => {\n    const state = options.partialize({ ...get() });\n    return storage.setItem(options.name, {\n      state,\n      version: options.version\n    });\n  };\n  const savedSetState = api.setState;\n  api.setState = (state, replace) => {\n    savedSetState(state, replace);\n    void setItem();\n  };\n  const configResult = config(\n    (...args) => {\n      set(...args);\n      void setItem();\n    },\n    get,\n    api\n  );\n  api.getInitialState = () => configResult;\n  let stateFromStorage;\n  const hydrate = () => {\n    var _a, _b;\n    if (!storage) return;\n    hasHydrated = false;\n    hydrationListeners.forEach((cb) => {\n      var _a2;\n      return cb((_a2 = get()) != null ? _a2 : configResult);\n    });\n    const postRehydrationCallback = ((_b = options.onRehydrateStorage) == null ? void 0 : _b.call(options, (_a = get()) != null ? _a : configResult)) || void 0;\n    return toThenable(storage.getItem.bind(storage))(options.name).then((deserializedStorageValue) => {\n      if (deserializedStorageValue) {\n        if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== options.version) {\n          if (options.migrate) {\n            return [\n              true,\n              options.migrate(\n                deserializedStorageValue.state,\n                deserializedStorageValue.version\n              )\n            ];\n          }\n          console.error(\n            `State loaded from storage couldn't be migrated since no migrate function was provided`\n          );\n        } else {\n          return [false, deserializedStorageValue.state];\n        }\n      }\n      return [false, void 0];\n    }).then((migrationResult) => {\n      var _a2;\n      const [migrated, migratedState] = migrationResult;\n      stateFromStorage = options.merge(\n        migratedState,\n        (_a2 = get()) != null ? _a2 : configResult\n      );\n      set(stateFromStorage, true);\n      if (migrated) {\n        return setItem();\n      }\n    }).then(() => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\n      stateFromStorage = get();\n      hasHydrated = true;\n      finishHydrationListeners.forEach((cb) => cb(stateFromStorage));\n    }).catch((e) => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\n    });\n  };\n  api.persist = {\n    setOptions: (newOptions) => {\n      options = {\n        ...options,\n        ...newOptions\n      };\n      if (newOptions.storage) {\n        storage = newOptions.storage;\n      }\n    },\n    clearStorage: () => {\n      storage == null ? void 0 : storage.removeItem(options.name);\n    },\n    getOptions: () => options,\n    rehydrate: () => hydrate(),\n    hasHydrated: () => hasHydrated,\n    onHydrate: (cb) => {\n      hydrationListeners.add(cb);\n      return () => {\n        hydrationListeners.delete(cb);\n      };\n    },\n    onFinishHydration: (cb) => {\n      finishHydrationListeners.add(cb);\n      return () => {\n        finishHydrationListeners.delete(cb);\n      };\n    }\n  };\n  if (!options.skipHydration) {\n    hydrate();\n  }\n  return stateFromStorage || configResult;\n};\nconst persistImpl = (config, baseOptions) => {\n  if (\"getStorage\" in baseOptions || \"serialize\" in baseOptions || \"deserialize\" in baseOptions) {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      console.warn(\n        \"[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead.\"\n      );\n    }\n    return oldImpl(config, baseOptions);\n  }\n  return newImpl(config, baseOptions);\n};\nconst persist = persistImpl;\n\nexport { combine, createJSONStorage, devtools, persist, redux, subscribeWithSelector };\n","import { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\nimport { UserProfile } from '../../services/firebase/auth.service';\n\n// Auth state interface\nexport interface AuthState {\n  // State\n  user: UserProfile | null;\n  isAuthenticated: boolean;\n  isLoading: boolean;\n  error: string | null;\n  \n  // Actions\n  setUser: (user: UserProfile | null) => void;\n  setLoading: (loading: boolean) => void;\n  setError: (error: string | null) => void;\n  login: (user: UserProfile) => void;\n  logout: () => void;\n  updateUser: (updates: Partial<UserProfile>) => void;\n  clearError: () => void;\n}\n\n// Create auth store with persistence\nexport const useAuthStore = create<AuthState>()(\n  persist(\n    (set, get) => ({\n      // Initial state\n      user: null,\n      isAuthenticated: false,\n      isLoading: false,\n      error: null,\n\n      // Actions\n      setUser: (user) => {\n        set({\n          user,\n          isAuthenticated: !!user,\n          error: null,\n        });\n      },\n\n      setLoading: (isLoading) => {\n        set({ isLoading });\n      },\n\n      setError: (error) => {\n        set({ \n          error,\n          isLoading: false,\n        });\n      },\n\n      login: (user) => {\n        set({\n          user,\n          isAuthenticated: true,\n          isLoading: false,\n          error: null,\n        });\n      },\n\n      logout: () => {\n        set({\n          user: null,\n          isAuthenticated: false,\n          isLoading: false,\n          error: null,\n        });\n      },\n\n      updateUser: (updates) => {\n        const currentUser = get().user;\n        if (currentUser) {\n          set({\n            user: { ...currentUser, ...updates },\n            error: null,\n          });\n        }\n      },\n\n      clearError: () => {\n        set({ error: null });\n      },\n    }),\n    {\n      name: 'taskflow-auth',\n      storage: createJSONStorage(() => localStorage),\n      // Only persist user data and authentication status\n      partialize: (state) => ({\n        user: state.user,\n        isAuthenticated: state.isAuthenticated,\n      }),\n      // Rehydrate state on app start\n      onRehydrateStorage: () => (state) => {\n        if (state) {\n          console.log(' Auth state rehydrated');\n        }\n      },\n    }\n  )\n);\n\n// Selectors for better performance\nexport const authSelectors = {\n  user: (state: AuthState) => state.user,\n  isAuthenticated: (state: AuthState) => state.isAuthenticated,\n  isLoading: (state: AuthState) => state.isLoading,\n  error: (state: AuthState) => state.error,\n  userId: (state: AuthState) => state.user?.uid || null,\n  userEmail: (state: AuthState) => state.user?.email || null,\n  userName: (state: AuthState) => state.user?.displayName || null,\n  isEmailVerified: (state: AuthState) => state.user?.emailVerified || false,\n};","import { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\n\n// Theme type\nexport type Theme = 'light' | 'dark' | 'system';\n\n// Notification interface\nexport interface UINotification {\n  id: string;\n  type: 'success' | 'error' | 'warning' | 'info';\n  title: string;\n  message?: string;\n  duration?: number;\n  action?: {\n    label: string;\n    onClick: () => void;\n  };\n  createdAt: Date;\n}\n\n// Modal state interface\nexport interface ModalState {\n  isOpen: boolean;\n  type: string | null;\n  props?: Record<string, any>;\n}\n\n// Loading state interface\nexport interface LoadingState {\n  [key: string]: boolean;\n}\n\n// UI state interface\nexport interface UIState {\n  // Theme\n  theme: Theme;\n  isDarkMode: boolean;\n  \n  // Layout\n  sidebarOpen: boolean;\n  sidebarCollapsed: boolean;\n  \n  // Modals\n  modal: ModalState;\n  \n  // Notifications/Toasts\n  notifications: UINotification[];\n  \n  // Loading states\n  loading: LoadingState;\n  \n  // Search\n  searchQuery: string;\n  searchFocused: boolean;\n  \n  // Filters and sorting\n  activeFilters: Record<string, any>;\n  sortBy: string;\n  sortOrder: 'asc' | 'desc';\n  \n  // Pagination\n  currentPage: number;\n  itemsPerPage: number;\n  \n  // Actions\n  setTheme: (theme: Theme) => void;\n  toggleTheme: () => void;\n  setDarkMode: (isDark: boolean) => void;\n  \n  setSidebarOpen: (open: boolean) => void;\n  toggleSidebar: () => void;\n  setSidebarCollapsed: (collapsed: boolean) => void;\n  toggleSidebarCollapsed: () => void;\n  \n  openModal: (type: string, props?: Record<string, any>) => void;\n  closeModal: () => void;\n  \n  addNotification: (notification: Omit<UINotification, 'id' | 'createdAt'>) => void;\n  removeNotification: (id: string) => void;\n  clearNotifications: () => void;\n  \n  setLoading: (key: string, loading: boolean) => void;\n  clearLoading: () => void;\n  \n  setSearchQuery: (query: string) => void;\n  setSearchFocused: (focused: boolean) => void;\n  clearSearch: () => void;\n  \n  setFilters: (filters: Record<string, any>) => void;\n  updateFilter: (key: string, value: any) => void;\n  removeFilter: (key: string) => void;\n  clearFilters: () => void;\n  \n  setSorting: (sortBy: string, sortOrder?: 'asc' | 'desc') => void;\n  \n  setCurrentPage: (page: number) => void;\n  setItemsPerPage: (items: number) => void;\n  resetPagination: () => void;\n}\n\n// Generate notification ID\nconst generateNotificationId = (): string => {\n  return Date.now().toString(36) + Math.random().toString(36).substr(2);\n};\n\n// Detect system theme preference\nconst getSystemTheme = (): 'light' | 'dark' => {\n  if (typeof window === 'undefined') return 'light';\n  return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n};\n\n// Calculate if dark mode should be active\nconst calculateDarkMode = (theme: Theme): boolean => {\n  switch (theme) {\n    case 'dark':\n      return true;\n    case 'light':\n      return false;\n    case 'system':\n      return getSystemTheme() === 'dark';\n    default:\n      return false;\n  }\n};\n\n// Create UI store with persistence\nexport const useUIStore = create<UIState>()(\n  persist(\n    (set, get) => ({\n      // Initial state\n      theme: 'system',\n      isDarkMode: calculateDarkMode('system'),\n      \n      sidebarOpen: false,\n      sidebarCollapsed: false,\n      \n      modal: {\n        isOpen: false,\n        type: null,\n        props: undefined,\n      },\n      \n      notifications: [],\n      loading: {},\n      \n      searchQuery: '',\n      searchFocused: false,\n      \n      activeFilters: {},\n      sortBy: 'updatedAt',\n      sortOrder: 'desc',\n      \n      currentPage: 1,\n      itemsPerPage: 20,\n\n      // Theme actions\n      setTheme: (theme) => {\n        const isDarkMode = calculateDarkMode(theme);\n        set({ theme, isDarkMode });\n        \n        // Update document class for CSS\n        if (typeof document !== 'undefined') {\n          document.documentElement.classList.toggle('dark', isDarkMode);\n        }\n      },\n\n      toggleTheme: () => {\n        const currentTheme = get().theme;\n        let newTheme: Theme;\n        \n        switch (currentTheme) {\n          case 'light':\n            newTheme = 'dark';\n            break;\n          case 'dark':\n            newTheme = 'system';\n            break;\n          case 'system':\n            newTheme = 'light';\n            break;\n          default:\n            newTheme = 'light';\n        }\n        \n        get().setTheme(newTheme);\n      },\n\n      setDarkMode: (isDark) => {\n        set({ isDarkMode: isDark });\n        \n        // Update document class for CSS\n        if (typeof document !== 'undefined') {\n          document.documentElement.classList.toggle('dark', isDark);\n        }\n      },\n\n      // Layout actions\n      setSidebarOpen: (open) => {\n        set({ sidebarOpen: open });\n      },\n\n      toggleSidebar: () => {\n        set((state) => ({ sidebarOpen: !state.sidebarOpen }));\n      },\n\n      setSidebarCollapsed: (collapsed) => {\n        set({ sidebarCollapsed: collapsed });\n      },\n\n      toggleSidebarCollapsed: () => {\n        set((state) => ({ sidebarCollapsed: !state.sidebarCollapsed }));\n      },\n\n      // Modal actions\n      openModal: (type, props) => {\n        set({\n          modal: {\n            isOpen: true,\n            type,\n            props,\n          },\n        });\n      },\n\n      closeModal: () => {\n        set({\n          modal: {\n            isOpen: false,\n            type: null,\n            props: undefined,\n          },\n        });\n      },\n\n      // Notification actions\n      addNotification: (notification) => {\n        const newNotification: UINotification = {\n          ...notification,\n          id: generateNotificationId(),\n          createdAt: new Date(),\n        };\n        \n        set((state) => ({\n          notifications: [...state.notifications, newNotification],\n        }));\n\n        // Auto-remove notification after duration (default 5 seconds)\n        const duration = notification.duration ?? 5000;\n        if (duration > 0) {\n          setTimeout(() => {\n            get().removeNotification(newNotification.id);\n          }, duration);\n        }\n      },\n\n      removeNotification: (id) => {\n        set((state) => ({\n          notifications: state.notifications.filter(n => n.id !== id),\n        }));\n      },\n\n      clearNotifications: () => {\n        set({ notifications: [] });\n      },\n\n      // Loading actions\n      setLoading: (key, loading) => {\n        set((state) => ({\n          loading: { ...state.loading, [key]: loading },\n        }));\n      },\n\n      clearLoading: () => {\n        set({ loading: {} });\n      },\n\n      // Search actions\n      setSearchQuery: (query) => {\n        set({ searchQuery: query, currentPage: 1 }); // Reset pagination on search\n      },\n\n      setSearchFocused: (focused) => {\n        set({ searchFocused: focused });\n      },\n\n      clearSearch: () => {\n        set({ searchQuery: '', searchFocused: false });\n      },\n\n      // Filter actions\n      setFilters: (filters) => {\n        set({ activeFilters: filters, currentPage: 1 }); // Reset pagination on filter change\n      },\n\n      updateFilter: (key, value) => {\n        set((state) => ({\n          activeFilters: { ...state.activeFilters, [key]: value },\n          currentPage: 1,\n        }));\n      },\n\n      removeFilter: (key) => {\n        set((state) => {\n          const newFilters = { ...state.activeFilters };\n          delete newFilters[key];\n          return {\n            activeFilters: newFilters,\n            currentPage: 1,\n          };\n        });\n      },\n\n      clearFilters: () => {\n        set({ activeFilters: {}, currentPage: 1 });\n      },\n\n      // Sorting actions\n      setSorting: (sortBy, sortOrder = 'desc') => {\n        set({ sortBy, sortOrder, currentPage: 1 }); // Reset pagination on sort change\n      },\n\n      // Pagination actions\n      setCurrentPage: (page) => {\n        set({ currentPage: page });\n      },\n\n      setItemsPerPage: (items) => {\n        set({ itemsPerPage: items, currentPage: 1 });\n      },\n\n      resetPagination: () => {\n        set({ currentPage: 1 });\n      },\n    }),\n    {\n      name: 'taskflow-ui',\n      storage: createJSONStorage(() => localStorage),\n      // Persist theme, sidebar, pagination, and filter preferences\n      partialize: (state) => ({\n        theme: state.theme,\n        sidebarCollapsed: state.sidebarCollapsed,\n        sortBy: state.sortBy,\n        sortOrder: state.sortOrder,\n        itemsPerPage: state.itemsPerPage,\n      }),\n      // Handle rehydration\n      onRehydrateStorage: () => (state) => {\n        if (state) {\n          // Apply theme on rehydration\n          state.setTheme(state.theme);\n          console.log(' UI state rehydrated');\n        }\n      },\n    }\n  )\n);\n\n// Listen for system theme changes\nif (typeof window !== 'undefined') {\n  const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n  \n  mediaQuery.addEventListener('change', (e) => {\n    const store = useUIStore.getState();\n    if (store.theme === 'system') {\n      store.setDarkMode(e.matches);\n    }\n  });\n}\n\n// Selectors for better performance\nexport const uiSelectors = {\n  theme: (state: UIState) => state.theme,\n  isDarkMode: (state: UIState) => state.isDarkMode,\n  sidebarOpen: (state: UIState) => state.sidebarOpen,\n  sidebarCollapsed: (state: UIState) => state.sidebarCollapsed,\n  modal: (state: UIState) => state.modal,\n  notifications: (state: UIState) => state.notifications,\n  isLoading: (key: string) => (state: UIState) => state.loading[key] || false,\n  hasActiveFilters: (state: UIState) => Object.keys(state.activeFilters).length > 0,\n  searchQuery: (state: UIState) => state.searchQuery,\n  sorting: (state: UIState) => ({ sortBy: state.sortBy, sortOrder: state.sortOrder }),\n  pagination: (state: UIState) => ({ \n    currentPage: state.currentPage, \n    itemsPerPage: state.itemsPerPage \n  }),\n};","import React from 'react';\nimport { clsx } from 'clsx';\nimport { motion } from 'framer-motion';\n\n// Button variant types\nexport type ButtonVariant =\n  | 'primary'\n  | 'secondary'\n  | 'success'\n  | 'warning'\n  | 'danger'\n  | 'ghost'\n  | 'outline';\n\n// Button size types\nexport type ButtonSize = 'xs' | 'sm' | 'md' | 'lg' | 'xl';\n\n// Button props interface\nexport interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: ButtonVariant;\n  size?: ButtonSize;\n  loading?: boolean;\n  leftIcon?: React.ReactNode;\n  rightIcon?: React.ReactNode;\n  fullWidth?: boolean;\n  children: React.ReactNode;\n  animate?: boolean;\n}\n\n// Base button classes\nconst baseClasses = 'btn-base interactive focus:outline-none focus:ring-2 focus:ring-offset-2';\n\n// Variant classes\nconst variantClasses: Record<ButtonVariant, string> = {\n  primary: 'btn-primary',\n  secondary: 'btn-secondary',\n  success: 'btn-success',\n  warning: 'btn-warning',\n  danger: 'btn-danger',\n  ghost: 'btn-ghost',\n  outline: 'btn-outline',\n};\n\n// Size classes\nconst sizeClasses: Record<ButtonSize, string> = {\n  xs: 'btn-xs',\n  sm: 'btn-sm',\n  md: 'btn-md',\n  lg: 'btn-lg',\n  xl: 'btn-xl',\n};\n\n// Loading spinner component\nconst LoadingSpinner: React.FC<{ size: ButtonSize }> = ({ size }) => {\n  const spinnerSize = {\n    xs: 'w-3 h-3',\n    sm: 'w-4 h-4',\n    md: 'w-4 h-4',\n    lg: 'w-5 h-5',\n    xl: 'w-6 h-6',\n  }[size];\n\n  return (\n    <div className={clsx('loading-spinner', spinnerSize)} />\n  );\n};\n\n// Button component\n// Button component\nexport const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(({\n  variant = 'primary',\n  size = 'md',\n  loading = false,\n  leftIcon,\n  rightIcon,\n  fullWidth = false,\n  children,\n  disabled,\n  className,\n  animate = true,\n  ...props\n}, ref) => {\n  const buttonClasses = clsx(\n    baseClasses,\n    variantClasses[variant],\n    sizeClasses[size],\n    fullWidth && 'w-full',\n    loading && 'cursor-wait',\n    disabled && 'opacity-50 cursor-not-allowed',\n    className\n  );\n\n  const content = (\n    <>\n      {loading ? (\n        <LoadingSpinner size={size} />\n      ) : (\n        leftIcon && (\n          <span className=\"flex-shrink-0 -ml-1 mr-2\">\n            {leftIcon}\n          </span>\n        )\n      )}\n\n      <span className={loading ? 'opacity-0' : 'opacity-100'}>\n        {children}\n      </span>\n\n      {!loading && rightIcon && (\n        <span className=\"flex-shrink-0 ml-2 -mr-1\">\n          {rightIcon}\n        </span>\n      )}\n    </>\n  );\n\n  if (animate && !disabled && !loading) {\n    return (\n      <motion.button\n        ref={ref}\n        className={buttonClasses}\n        disabled={disabled || loading}\n        {...({} as any)}\n        {...props}\n        whileHover={!disabled && !loading ? { scale: 1.02 } : undefined}\n        whileTap={!disabled && !loading ? { scale: 0.98 } : undefined}\n      >\n        {content}\n      </motion.button>\n    );\n  }\n\n  return (\n    <button\n      ref={ref}\n      className={buttonClasses}\n      disabled={disabled || loading}\n      {...props}\n    >\n      {content}\n    </button>\n  );\n});\n\nButton.displayName = 'Button';\n\n// Button group component for related actions\nexport interface ButtonGroupProps {\n  children: React.ReactNode;\n  orientation?: 'horizontal' | 'vertical';\n  spacing?: 'tight' | 'normal' | 'loose';\n  className?: string;\n}\n\nexport const ButtonGroup: React.FC<ButtonGroupProps> = ({\n  children,\n  orientation = 'horizontal',\n  spacing = 'normal',\n  className,\n}) => {\n  const groupClasses = clsx(\n    'flex',\n    orientation === 'horizontal' ? 'flex-row' : 'flex-col',\n    {\n      'gap-1': spacing === 'tight',\n      'gap-2': spacing === 'normal',\n      'gap-4': spacing === 'loose',\n    },\n    className\n  );\n\n  return (\n    <div className={groupClasses} role=\"group\">\n      {children}\n    </div>\n  );\n};\n\n// Icon button component for actions with just icons\nexport interface IconButtonProps extends Omit<ButtonProps, 'leftIcon' | 'rightIcon'> {\n  icon: React.ReactNode;\n  'aria-label': string;\n  tooltip?: string;\n}\n\nexport const IconButton: React.FC<IconButtonProps> = ({\n  icon,\n  size = 'md',\n  variant = 'ghost',\n  className,\n  ...props\n}) => {\n  const iconButtonClasses = clsx(\n    'aspect-square flex items-center justify-center',\n    className\n  );\n\n  return (\n    <Button\n      variant={variant}\n      size={size}\n      className={iconButtonClasses}\n      {...props}\n    >\n      {icon}\n    </Button>\n  );\n};\n\nexport default Button;","import React from 'react';\nimport { clsx } from 'clsx';\n\nexport type AvatarSize = 'xs' | 'sm' | 'md' | 'lg' | 'xl' | '2xl';\n\nexport interface AvatarProps {\n  src?: string;\n  alt?: string;\n  name?: string;\n  size?: AvatarSize;\n  className?: string;\n  fallback?: React.ReactNode;\n}\n\nconst sizeClasses: Record<AvatarSize, string> = {\n  xs: 'w-6 h-6 text-xs',\n  sm: 'w-8 h-8 text-sm',\n  md: 'w-10 h-10 text-base',\n  lg: 'w-12 h-12 text-lg',\n  xl: 'w-16 h-16 text-xl',\n  '2xl': 'w-20 h-20 text-2xl',\n};\n\nconst getInitials = (name: string): string => {\n  return name\n    .split(' ')\n    .map(part => part.charAt(0))\n    .join('')\n    .toUpperCase()\n    .slice(0, 2);\n};\n\nexport const Avatar: React.FC<AvatarProps> = ({\n  src,\n  alt,\n  name,\n  size = 'md',\n  className,\n  fallback,\n}) => {\n  const [imageError, setImageError] = React.useState(false);\n  const [imageLoaded, setImageLoaded] = React.useState(false);\n\n  const avatarClasses = clsx(\n    'relative inline-flex items-center justify-center rounded-full bg-gray-300 font-medium text-gray-700 overflow-hidden',\n    sizeClasses[size],\n    className\n  );\n\n  const handleImageError = () => {\n    setImageError(true);\n  };\n\n  const handleImageLoad = () => {\n    setImageLoaded(true);\n  };\n\n  const shouldShowImage = src && !imageError;\n  const displayName = alt || name || 'User';\n  const initials = name ? getInitials(name) : '?';\n\n  return (\n    <span className={avatarClasses}>\n      {shouldShowImage ? (\n        <img\n          src={src}\n          alt={displayName}\n          className={clsx(\n            'w-full h-full object-cover',\n            !imageLoaded && 'opacity-0'\n          )}\n          onError={handleImageError}\n          onLoad={handleImageLoad}\n        />\n      ) : fallback ? (\n        fallback\n      ) : (\n        <span className=\"font-medium\">{initials}</span>\n      )}\n    </span>\n  );\n};\n\nexport default Avatar;","import React, { useState, useRef, useEffect } from 'react';\nimport { clsx } from 'clsx';\nimport { motion, AnimatePresence } from 'framer-motion';\n\nexport interface DropdownItem {\n  id: string;\n  label: string;\n  value: any;\n  disabled?: boolean;\n  icon?: React.ReactNode;\n  divider?: boolean;\n}\n\nexport interface DropdownProps {\n  items: DropdownItem[];\n  value?: any;\n  onSelect: (item: DropdownItem) => void;\n  placeholder?: string;\n  disabled?: boolean;\n  fullWidth?: boolean;\n  searchable?: boolean;\n  maxHeight?: string;\n  className?: string;\n  buttonClassName?: string;\n  menuClassName?: string;\n  children?: React.ReactNode;\n}\n\nconst dropdownVariants = {\n  hidden: { opacity: 0, scale: 0.95, y: -5 },\n  visible: { opacity: 1, scale: 1, y: 0 },\n  exit: { opacity: 0, scale: 0.95, y: -5 }\n};\n\nexport const Dropdown: React.FC<DropdownProps> = ({\n  items,\n  value,\n  onSelect,\n  placeholder = 'Select option...',\n  disabled = false,\n  fullWidth = false,\n  searchable = false,\n  maxHeight = '16rem',\n  className,\n  buttonClassName,\n  menuClassName,\n  children,\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n  const dropdownRef = useRef<HTMLDivElement>(null);\n  const searchInputRef = useRef<HTMLInputElement>(null);\n\n  const selectedItem = items.find(item => item.value === value);\n\n  const filteredItems = searchable\n    ? items.filter(item =>\n      item.label.toLowerCase().includes(searchTerm.toLowerCase())\n    )\n    : items;\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n        setSearchTerm('');\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  // Focus search input when opening\n  useEffect(() => {\n    if (isOpen && searchable && searchInputRef.current) {\n      searchInputRef.current.focus();\n    }\n  }, [isOpen, searchable]);\n\n  const handleToggle = () => {\n    if (!disabled) {\n      setIsOpen(!isOpen);\n    }\n  };\n\n  const handleSelect = (item: DropdownItem) => {\n    if (!item.disabled) {\n      onSelect(item);\n      setIsOpen(false);\n      setSearchTerm('');\n    }\n  };\n\n  return (\n    <div\n      ref={dropdownRef}\n      className={clsx('relative', fullWidth ? 'w-full' : 'inline-block', className)}\n    >\n      {/* Dropdown Button */}\n      <button\n        type=\"button\"\n        onClick={handleToggle}\n        disabled={disabled}\n        className={clsx(\n          'flex items-center justify-between w-full px-3 py-2 text-left bg-white border border-gray-300 rounded-lg shadow-sm',\n          'focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent',\n          'hover:bg-gray-50 transition-colors',\n          disabled && 'opacity-50 cursor-not-allowed hover:bg-white',\n          buttonClassName\n        )}\n        aria-haspopup=\"listbox\"\n        aria-expanded={isOpen}\n      >\n        {children ? (\n          children\n        ) : (\n          <span className=\"flex items-center\">\n            {selectedItem?.icon && (\n              <span className=\"mr-2 flex-shrink-0\">\n                {selectedItem.icon}\n              </span>\n            )}\n            <span className={selectedItem ? 'text-gray-900' : 'text-gray-500'}>\n              {selectedItem?.label || placeholder}\n            </span>\n          </span>\n        )}\n        {!children && (\n          <svg\n            className={clsx(\n              'ml-2 h-5 w-5 text-gray-400 transition-transform',\n              isOpen && 'rotate-180'\n            )}\n            fill=\"none\"\n            stroke=\"currentColor\"\n            viewBox=\"0 0 24 24\"\n          >\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n          </svg>\n        )}\n      </button>\n\n      {/* Dropdown Menu */}\n      <AnimatePresence>\n        {isOpen && (\n          <motion.div\n            variants={dropdownVariants}\n            initial=\"hidden\"\n            animate=\"visible\"\n            exit=\"exit\"\n            transition={{ duration: 0.15 }}\n            className={clsx(\n              'absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg',\n              'ring-1 ring-black ring-opacity-5 focus:outline-none',\n              menuClassName\n            )}\n            style={{ maxHeight }}\n          >\n            <div className=\"overflow-auto\" style={{ maxHeight }}>\n              {searchable && (\n                <div className=\"p-2 border-b border-gray-200\">\n                  <input\n                    ref={searchInputRef}\n                    type=\"text\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                    placeholder=\"Search...\"\n                    className=\"w-full px-3 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-primary-500\"\n                  />\n                </div>\n              )}\n\n              <div className=\"py-1\" role=\"listbox\">\n                {filteredItems.length === 0 ? (\n                  <div className=\"px-3 py-2 text-sm text-gray-500\">\n                    No options found\n                  </div>\n                ) : (\n                  filteredItems.map((item, index) => (\n                    <React.Fragment key={item.id}>\n                      {item.divider && index > 0 && (\n                        <hr className=\"border-gray-200\" />\n                      )}\n                      <button\n                        type=\"button\"\n                        onClick={() => handleSelect(item)}\n                        disabled={item.disabled}\n                        className={clsx(\n                          'w-full px-3 py-2 text-left text-sm flex items-center',\n                          'hover:bg-gray-100 focus:outline-none focus:bg-gray-100',\n                          item.disabled && 'opacity-50 cursor-not-allowed hover:bg-white',\n                          item.value === value && 'bg-primary-50 text-primary-900'\n                        )}\n                        role=\"option\"\n                        aria-selected={item.value === value}\n                      >\n                        {item.icon && (\n                          <span className=\"mr-2 flex-shrink-0\">\n                            {item.icon}\n                          </span>\n                        )}\n                        {item.label}\n                        {item.value === value && (\n                          <svg className=\"ml-auto h-4 w-4 text-primary-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                            <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n                          </svg>\n                        )}\n                      </button>\n                    </React.Fragment>\n                  ))\n                )}\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n};\n\nexport default Dropdown;","import React from 'react';\nimport { clsx } from 'clsx';\nimport { useUIStore } from '../../../store/slices/uiSlice';\nimport { useAuthStore } from '../../../store/slices/authSlice';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { getAuth } from 'firebase/auth';\nimport Button from '../../ui/Button';\nimport Avatar from '../../ui/Avatar';\nimport Dropdown, { DropdownItem } from '../../ui/Dropdown';\n\nexport interface HeaderProps {\n  className?: string;\n  showSidebarToggle?: boolean;\n  showSearch?: boolean;\n  showNotifications?: boolean;\n  showUserMenu?: boolean;\n}\n\nexport const Header: React.FC<HeaderProps> = ({\n  className,\n  showSidebarToggle = true,\n  showSearch = true,\n  showNotifications = true,\n  showUserMenu = true,\n}) => {\n  const {\n    sidebarOpen,\n    toggleSidebar,\n    searchQuery,\n    setSearchQuery,\n    searchFocused,\n    setSearchFocused,\n    notifications,\n    clearNotifications,\n    removeNotification\n  } = useUIStore();\n\n  const { user, isAuthenticated, logout } = useAuthStore();\n  const navigate = useNavigate();\n\n  const userMenuItems: DropdownItem[] = [\n    {\n      id: 'profile',\n      label: 'Profile Settings',\n      value: 'profile',\n      icon: (\n        <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n        </svg>\n      ),\n    },\n    {\n      id: 'settings',\n      label: 'Settings',\n      value: 'settings',\n      icon: (\n        <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\" />\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n        </svg>\n      ),\n    },\n    {\n      id: 'divider',\n      label: '',\n      value: 'divider',\n      divider: true,\n    },\n    {\n      id: 'logout',\n      label: 'Sign Out',\n      value: 'logout',\n      icon: (\n        <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\" />\n        </svg>\n      ),\n    },\n  ];\n\n  const handleSearch = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setSearchQuery(e.target.value);\n  };\n\n  const handleSearchFocus = () => {\n    setSearchFocused(true);\n  };\n\n  const handleSearchBlur = () => {\n    setSearchFocused(false);\n  };\n\n  const handleUserMenuSelect = (item: DropdownItem) => {\n    switch (item.value) {\n      case 'profile':\n        navigate('/settings');\n        break;\n      case 'settings':\n        navigate('/settings');\n        break;\n      case 'logout':\n        getAuth().signOut().then(() => {\n          logout();\n          navigate('/login');\n        });\n        break;\n    }\n  };\n\n  return (\n    <header className={clsx(\n      'header bg-white border-b border-gray-200 sticky top-0 z-40',\n      'flex items-center justify-between px-4 py-3 sm:px-6 lg:px-8',\n      className\n    )}>\n      {/* Left section */}\n      <div className=\"flex items-center space-x-4\">\n        {/* Sidebar toggle */}\n        {showSidebarToggle && (\n          <Button\n            variant=\"ghost\"\n            size=\"md\"\n            onClick={toggleSidebar}\n            className=\"lg:hidden\"\n            aria-label={sidebarOpen ? 'Close sidebar' : 'Open sidebar'}\n          >\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 6h16M4 12h16M4 18h16\" />\n            </svg>\n          </Button>\n        )}\n\n        {/* Logo */}\n        <Link to=\"/\" className=\"flex items-center hover:opacity-80 transition-opacity\">\n          <h1 className=\"text-xl font-bold text-gray-900\">\n            TaskFlow\n          </h1>\n        </Link>\n      </div>\n\n      {/* Center section - Search */}\n      {showSearch && (\n        <div className=\"flex-1 max-w-2xl mx-8\">\n          <div className=\"relative\">\n            <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n              <svg className=\"h-5 w-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n              </svg>\n            </div>\n            <input\n              type=\"text\"\n              value={searchQuery}\n              onChange={handleSearch}\n              onFocus={handleSearchFocus}\n              onBlur={handleSearchBlur}\n              className={clsx(\n                'block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg',\n                'placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent',\n                'transition-all duration-200 sm:text-sm',\n                searchFocused && 'ring-2 ring-primary-500 border-transparent'\n              )}\n              placeholder=\"Search tasks, tags, or notes...\"\n            />\n\n            {/* Search suggestions or results could be added here */}\n            {searchQuery && (\n              <div className=\"absolute mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg z-10\">\n                <div className=\"p-3 text-sm text-gray-500\">\n                  Search for \"{searchQuery}\"...\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Right section */}\n      <div className=\"flex items-center space-x-4\">\n        {/* Notifications */}\n        {showNotifications && (\n          <Dropdown\n            items={notifications.length > 0 ? [\n              ...notifications.map(n => ({\n                id: n.id,\n                label: n.title,\n                value: n.id,\n                icon: (\n                  <div className={clsx(\n                    \"w-2 h-2 rounded-full\",\n                    n.type === 'success' ? \"bg-green-500\" :\n                      n.type === 'error' ? \"bg-red-500\" :\n                        n.type === 'warning' ? \"bg-yellow-500\" : \"bg-blue-500\"\n                  )} />\n                )\n              })),\n              { id: 'divider', label: '', value: 'divider', divider: true },\n              { id: 'clear', label: 'Clear All', value: 'clear', icon: <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" /></svg> }\n            ] : [{ id: 'none', label: 'No new notifications', value: 'none', disabled: true }]}\n            onSelect={(item) => {\n              if (item.value === 'clear') {\n                clearNotifications();\n              } else if (item.value !== 'divider' && item.value !== 'none') {\n                removeNotification(item.value);\n              }\n            }}\n            placeholder=\"No notifications\"\n            buttonClassName=\"relative p-2 rounded-lg hover:bg-gray-100 transition-colors border-none shadow-none\"\n            menuClassName=\"w-80\"\n          >\n            <svg className=\"w-5 h-5 text-gray-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9\" />\n            </svg>\n\n            {notifications.length > 0 && (\n              <span className=\"absolute top-1 right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-[10px] font-bold text-white border-2 border-white\">\n                {notifications.length}\n              </span>\n            )}\n          </Dropdown>\n        )}\n\n        {/* User menu */}\n        {showUserMenu && isAuthenticated && user && (\n          <Dropdown\n            items={userMenuItems}\n            onSelect={handleUserMenuSelect}\n            buttonClassName=\"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 transition-colors\"\n          >\n            <Avatar\n              src={user.photoURL || undefined}\n              name={user.displayName || user.email || undefined}\n              size=\"sm\"\n            />\n            <span className=\"hidden md:block text-sm font-medium text-gray-700\">\n              {user.displayName || user.email}\n            </span>\n            <svg className=\"w-4 h-4 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n            </svg>\n          </Dropdown>\n        )}\n\n        {/* Sign in button for non-authenticated users */}\n        {!isAuthenticated && (\n          <div className=\"flex items-center space-x-2\">\n            <Button variant=\"ghost\" size=\"md\">\n              Sign In\n            </Button>\n            <Button variant=\"primary\" size=\"md\">\n              Get Started\n            </Button>\n          </div>\n        )}\n      </div>\n    </header>\n  );\n};\n\nexport default Header;","import React, { useState, useRef, useEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport { clsx } from 'clsx';\nimport { motion, AnimatePresence } from 'framer-motion';\n\nexport type TooltipPosition = 'top' | 'bottom' | 'left' | 'right';\n\nexport interface TooltipProps {\n  children: React.ReactNode;\n  content: React.ReactNode;\n  position?: TooltipPosition;\n  delay?: number;\n  disabled?: boolean;\n  className?: string;\n  contentClassName?: string;\n}\n\nconst positionClasses: Record<TooltipPosition, string> = {\n  top: 'bottom-full left-1/2 transform -translate-x-1/2 mb-2',\n  bottom: 'top-full left-1/2 transform -translate-x-1/2 mt-2',\n  left: 'right-full top-1/2 transform -translate-y-1/2 mr-2',\n  right: 'left-full top-1/2 transform -translate-y-1/2 ml-2',\n};\n\nconst arrowClasses: Record<TooltipPosition, string> = {\n  top: 'top-full left-1/2 transform -translate-x-1/2 border-l-transparent border-r-transparent border-b-transparent border-t-gray-900',\n  bottom: 'bottom-full left-1/2 transform -translate-x-1/2 border-l-transparent border-r-transparent border-t-transparent border-b-gray-900',\n  left: 'left-full top-1/2 transform -translate-y-1/2 border-t-transparent border-b-transparent border-r-transparent border-l-gray-900',\n  right: 'right-full top-1/2 transform -translate-y-1/2 border-t-transparent border-b-transparent border-l-transparent border-r-gray-900',\n};\n\nexport const Tooltip: React.FC<TooltipProps> = ({\n  children,\n  content,\n  position = 'top',\n  delay = 500,\n  disabled = false,\n  className,\n  contentClassName,\n}) => {\n  const [isVisible, setIsVisible] = useState(false);\n  const [tooltipPosition, setTooltipPosition] = useState({ x: 0, y: 0 });\n  const triggerRef = useRef<HTMLDivElement>(null);\n  const tooltipRef = useRef<HTMLDivElement>(null);\n  const timeoutRef = useRef<NodeJS.Timeout>();\n\n  const showTooltip = () => {\n    if (disabled || !content) return;\n    \n    clearTimeout(timeoutRef.current);\n    timeoutRef.current = setTimeout(() => {\n      setIsVisible(true);\n      calculatePosition();\n    }, delay);\n  };\n\n  const hideTooltip = () => {\n    clearTimeout(timeoutRef.current);\n    setIsVisible(false);\n  };\n\n  const calculatePosition = () => {\n    if (!triggerRef.current) return;\n\n    const triggerRect = triggerRef.current.getBoundingClientRect();\n    const scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;\n    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n\n    let x = 0;\n    let y = 0;\n\n    switch (position) {\n      case 'top':\n        x = triggerRect.left + scrollLeft + triggerRect.width / 2;\n        y = triggerRect.top + scrollTop;\n        break;\n      case 'bottom':\n        x = triggerRect.left + scrollLeft + triggerRect.width / 2;\n        y = triggerRect.bottom + scrollTop;\n        break;\n      case 'left':\n        x = triggerRect.left + scrollLeft;\n        y = triggerRect.top + scrollTop + triggerRect.height / 2;\n        break;\n      case 'right':\n        x = triggerRect.right + scrollLeft;\n        y = triggerRect.top + scrollTop + triggerRect.height / 2;\n        break;\n    }\n\n    setTooltipPosition({ x, y });\n  };\n\n  useEffect(() => {\n    return () => {\n      clearTimeout(timeoutRef.current);\n    };\n  }, []);\n\n  const tooltipVariants = {\n    hidden: { opacity: 0, scale: 0.8 },\n    visible: { opacity: 1, scale: 1 },\n    exit: { opacity: 0, scale: 0.8 },\n  };\n\n  const tooltipContent = (\n    <AnimatePresence>\n      {isVisible && (\n        <motion.div\n          ref={tooltipRef}\n          variants={tooltipVariants}\n          initial=\"hidden\"\n          animate=\"visible\"\n          exit=\"exit\"\n          transition={{ duration: 0.15 }}\n          className=\"fixed z-50 pointer-events-none\"\n          style={{\n            left: tooltipPosition.x,\n            top: tooltipPosition.y,\n          }}\n        >\n          <div\n            className={clsx(\n              'absolute whitespace-nowrap',\n              positionClasses[position]\n            )}\n          >\n            <div\n              className={clsx(\n                'bg-gray-900 text-white text-sm rounded px-2 py-1 max-w-xs',\n                contentClassName\n              )}\n            >\n              {content}\n            </div>\n            \n            {/* Arrow */}\n            <div\n              className={clsx(\n                'absolute w-0 h-0 border-4',\n                arrowClasses[position]\n              )}\n            />\n          </div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n\n  return (\n    <>\n      <div\n        ref={triggerRef}\n        className={clsx('inline-block', className)}\n        onMouseEnter={showTooltip}\n        onMouseLeave={hideTooltip}\n        onFocus={showTooltip}\n        onBlur={hideTooltip}\n      >\n        {children}\n      </div>\n      \n      {createPortal(tooltipContent, document.body)}\n    </>\n  );\n};\n\nexport default Tooltip;","import { initializeApp, FirebaseApp, getApps, getApp } from 'firebase/app';\nimport { getAuth, Auth, connectAuthEmulator } from 'firebase/auth';\nimport { getFirestore, Firestore, connectFirestoreEmulator } from 'firebase/firestore';\nimport { getMessaging, Messaging, isSupported } from 'firebase/messaging';\n\n// Firebase configuration from environment variables\nconst firebaseConfig = {\n  apiKey: import.meta.env.VITE_FIREBASE_API_KEY,\n  authDomain: import.meta.env.VITE_FIREBASE_AUTH_DOMAIN,\n  projectId: import.meta.env.VITE_FIREBASE_PROJECT_ID,\n  storageBucket: import.meta.env.VITE_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: import.meta.env.VITE_FIREBASE_MESSAGING_SENDER_ID,\n  appId: import.meta.env.VITE_FIREBASE_APP_ID,\n  measurementId: import.meta.env.VITE_FIREBASE_MEASUREMENT_ID,\n};\n\n// Check if we should use emulators\nconst useEmulators = import.meta.env.VITE_USE_EMULATORS === 'true' || import.meta.env.DEV;\n\n// Initialize Firebase app (singleton pattern)\nfunction initializeFirebaseApp(): FirebaseApp {\n  const apps = getApps();\n  if (apps.length > 0) {\n    return getApp();\n  }\n  return initializeApp(firebaseConfig);\n}\n\n// Initialize Firebase services\nexport const app: FirebaseApp = initializeFirebaseApp();\n\n// Initialize Auth\nexport const auth: Auth = getAuth(app);\n\n// Initialize Firestore\nexport const db: Firestore = getFirestore(app);\n\n// Connect to emulators in development - MUST be done before any operations\nif (useEmulators) {\n  try {\n    connectAuthEmulator(auth, 'http://127.0.0.1:9099', { disableWarnings: true });\n    console.log(' Connected to Auth emulator at http://127.0.0.1:9099');\n  } catch (error: any) {\n    // Ignore \"already connected\" errors (common during hot reload)\n    if (error?.message?.includes('already been called') || error?.message?.includes('already connected')) {\n      console.log(' Auth emulator already connected');\n    } else {\n      console.warn(' Could not connect to Auth emulator:', error);\n    }\n  }\n\n  try {\n    connectFirestoreEmulator(db, '127.0.0.1', 8085);\n    console.log(' Connected to Firestore emulator at 127.0.0.1:8085');\n  } catch (error: any) {\n    // Ignore \"already connected\" errors (common during hot reload)\n    if (error?.message?.includes('already been called') || error?.message?.includes('already connected')) {\n      console.log(' Firestore emulator already connected');\n    } else {\n      console.warn(' Could not connect to Firestore emulator:', error);\n    }\n  }\n}\n\n// Initialize Messaging (only if supported)\nlet messaging: Messaging | null = null;\n\n// Check if messaging is supported and initialize\nisSupported().then((supported) => {\n  if (supported) {\n    messaging = getMessaging(app);\n  }\n});\n\nexport { messaging };\n\n// Firebase configuration object for components\nexport const firebaseSettings = {\n  projectId: firebaseConfig.projectId,\n  apiKey: firebaseConfig.apiKey,\n  authDomain: firebaseConfig.authDomain,\n  isDev: import.meta.env.DEV,\n  isProd: import.meta.env.PROD,\n} as const;\n\n// Firebase service availability checks\nexport const serviceAvailability = {\n  auth: !!auth,\n  firestore: !!db,\n  messaging: !!messaging,\n} as const;\n\n// Export types\nexport type { FirebaseApp, Auth, Firestore, Messaging };","/**\n * TaskFlow Project Types (Frontend)\n * TypeScript interfaces for project data in the web client\n */\n\nexport type ProjectMode = 'personal' | 'professional';\n\nexport interface Project {\n    id: string;\n    name: string;\n    description?: string;\n    mode: ProjectMode;\n    color?: string;\n    icon?: string;\n    taskCount: number;\n    completedTaskCount: number;\n    createdAt: string;\n    updatedAt: string;\n    userId: string;\n    isArchived: boolean;\n    isDeleted: boolean;\n    isDefault: boolean;\n    position: number;\n}\n\n// Project form data for creation\nexport interface ProjectFormData {\n    name: string;\n    description?: string;\n    mode: ProjectMode;\n    color?: string;\n    icon?: string;\n}\n\n// Project update data\nexport interface ProjectUpdateData {\n    name?: string;\n    description?: string;\n    color?: string;\n    icon?: string;\n    position?: number;\n    isArchived?: boolean;\n}\n\n// Project filters\nexport interface ProjectFilters {\n    mode?: ProjectMode;\n    isArchived?: boolean;\n    isDefault?: boolean;\n}\n\n// Project query options\nexport interface ProjectQueryOptions {\n    filters?: ProjectFilters;\n    orderBy?: 'position' | 'createdAt' | 'name';\n    orderDirection?: 'asc' | 'desc';\n}\n\n// Project deletion check result\nexport interface ProjectDeletionCheck {\n    canDelete: boolean;\n    hasIncompleteTasks: boolean;\n    incompleteTaskCount: number;\n    totalTaskCount: number;\n}\n\n// Project statistics\nexport interface ProjectStatistics {\n    totalTasks: number;\n    completedTasks: number;\n    inProgressTasks: number;\n    overdueTasks: number;\n    completionRate: number;\n}\n\n// Configurable limits\nexport const PROJECT_LIMITS = {\n    MAX_PROJECTS_PER_MODE: 10,\n    MAX_PROJECTS_UNVERIFIED: 3,\n    DEFAULT_PROJECT_NAME: 'Inbox',\n    MAX_PROJECT_NAME_LENGTH: 50,\n    MAX_PROJECT_DESCRIPTION_LENGTH: 500,\n} as const;\n\n// Default project colors\nexport const PROJECT_COLORS = [\n    '#3B82F6', // blue\n    '#10B981', // green  \n    '#F59E0B', // amber\n    '#EF4444', // red\n    '#8B5CF6', // purple\n    '#EC4899', // pink\n    '#06B6D4', // cyan\n    '#F97316', // orange\n] as const;\n\n// Default project icons\nexport const PROJECT_ICONS = [\n    '', // folder\n    '', // home\n    '', // briefcase\n    '', // target\n    '', // books\n    '', // lightbulb\n    '', // rocket\n    '', // star\n    '', // inbox (for default)\n] as const;\n","/**\n * TaskFlow Project Service\n * Firebase Firestore service for project CRUD operations\n */\n\nimport {\n    collection,\n    doc,\n    getDoc,\n    getDocs,\n    addDoc,\n    updateDoc,\n    query,\n    where,\n    orderBy,\n    limit,\n    onSnapshot,\n    writeBatch,\n    serverTimestamp,\n    CollectionReference,\n    DocumentSnapshot,\n    QueryDocumentSnapshot,\n    FirestoreError,\n    Timestamp,\n} from 'firebase/firestore';\n\nimport { db, auth } from './config';\nimport type {\n    Project,\n    ProjectFormData,\n    ProjectUpdateData,\n    ProjectQueryOptions,\n    ProjectDeletionCheck,\n    ProjectMode,\n} from '../../types/project';\nimport { PROJECT_LIMITS } from '../../types/project';\n\n// Custom error type\nexport class ProjectServiceError extends Error {\n    constructor(\n        message: string,\n        public code?: string,\n        public originalError?: FirestoreError\n    ) {\n        super(message);\n        this.name = 'ProjectServiceError';\n    }\n}\n\nclass ProjectService {\n    // Get user's projects collection reference\n    private getUserProjectsRef(userId: string): CollectionReference {\n        return collection(db, 'users', userId, 'projects');\n    }\n\n    // Generate unique project ID\n    private generateProjectId(): string {\n        return `proj_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    }\n\n    // Validate userId\n    private validateUserId(userId: string): void {\n        if (!userId || typeof userId !== 'string' || userId.trim() === '') {\n            throw new ProjectServiceError('Valid userId is required', 'INVALID_USER_ID');\n        }\n    }\n\n    // Validate projectId\n    private validateProjectId(projectId: string): void {\n        if (!projectId || typeof projectId !== 'string' || projectId.trim() === '') {\n            throw new ProjectServiceError('Valid projectId is required', 'INVALID_PROJECT_ID');\n        }\n    }\n\n    /**\n     * Create a new project\n     */\n    async createProject(userId: string, data: ProjectFormData): Promise<Project> {\n        this.validateUserId(userId);\n        if (!data?.name?.trim()) {\n            throw new ProjectServiceError('Project name is required', 'INVALID_PROJECT_NAME');\n        }\n        try {\n            // Check project limit for the mode\n            const existingProjects = await this.getProjects(userId, { filters: { mode: data.mode } });\n\n            // Check verification status for limits\n            const currentUser = auth.currentUser;\n            const isGoogleUser = currentUser?.providerData.some((p: any) => p.providerId === 'google.com');\n            const isVerified = currentUser?.emailVerified || isGoogleUser;\n\n            if (!isVerified) {\n                const totalProjects = await this.getProjects(userId);\n                if (totalProjects.length >= PROJECT_LIMITS.MAX_PROJECTS_UNVERIFIED) {\n                    throw new ProjectServiceError(\n                        `Unverified accounts are limited to ${PROJECT_LIMITS.MAX_PROJECTS_UNVERIFIED} projects. Please verify your email to create more.`,\n                        'PROJECT_LIMIT_EXCEEDED'\n                    );\n                }\n            } else if (existingProjects.length >= PROJECT_LIMITS.MAX_PROJECTS_PER_MODE) {\n                throw new ProjectServiceError(\n                    `Maximum ${PROJECT_LIMITS.MAX_PROJECTS_PER_MODE} projects allowed per mode`,\n                    'PROJECT_LIMIT_EXCEEDED'\n                );\n            }\n\n            // Calculate next position\n            const maxPosition = existingProjects.reduce((max, p) => Math.max(max, p.position), 0);\n\n            const projectId = this.generateProjectId();\n            const now = Timestamp.now();\n\n            const projectData = {\n                projectId,\n                name: data.name.trim(),\n                description: data.description?.trim() || '',\n                mode: data.mode,\n                color: data.color || '#3B82F6',\n                icon: data.icon || '',\n                taskCount: 0,\n                completedTaskCount: 0,\n                createdAt: now,\n                updatedAt: now,\n                userId,\n                isArchived: false,\n                isDeleted: false,\n                isDefault: false,\n                position: maxPosition + 1,\n            };\n\n            const docRef = doc(this.getUserProjectsRef(userId), projectId);\n            await updateDoc(docRef, projectData).catch(() => {\n                return addDoc(this.getUserProjectsRef(userId), projectData);\n            });\n\n            return this.mapDocumentToProject({ id: projectId, ...projectData } as any);\n        } catch (error) {\n            if (error instanceof ProjectServiceError) throw error;\n            throw this.handleFirestoreError(error as FirestoreError, 'Failed to create project');\n        }\n    }\n\n    /**\n     * Get or create default Inbox project for a mode\n     */\n    async getOrCreateDefaultProject(userId: string, mode: ProjectMode): Promise<Project> {\n        this.validateUserId(userId);\n        if (!mode || (mode !== 'personal' && mode !== 'professional')) {\n            throw new ProjectServiceError('Valid mode is required', 'INVALID_MODE');\n        }\n        try {\n            const projectsRef = this.getUserProjectsRef(userId);\n            const q = query(\n                projectsRef,\n                where('isDefault', '==', true),\n                where('mode', '==', mode),\n                limit(1)\n            );\n            const snapshot = await getDocs(q);\n\n            if (!snapshot.empty) {\n                return this.mapDocumentToProject(snapshot.docs[0]);\n            }\n\n            const projectId = this.generateProjectId();\n            const now = Timestamp.now();\n\n            const projectData = {\n                projectId,\n                name: PROJECT_LIMITS.DEFAULT_PROJECT_NAME,\n                description: 'Default project for unassigned tasks',\n                mode,\n                color: '#6B7280',\n                icon: '',\n                taskCount: 0,\n                completedTaskCount: 0,\n                createdAt: now,\n                updatedAt: now,\n                userId,\n                isArchived: false,\n                isDeleted: false,\n                isDefault: true,\n                position: 0,\n            };\n\n            const docRef = doc(this.getUserProjectsRef(userId), projectId);\n            await updateDoc(docRef, projectData).catch(async () => {\n                await addDoc(this.getUserProjectsRef(userId), projectData);\n            });\n\n            return this.mapDocumentToProject({ id: projectId, ...projectData } as any);\n        } catch (error) {\n            throw this.handleFirestoreError(error as FirestoreError, 'Failed to get/create default project');\n        }\n    }\n\n    /**\n     * Update a project\n     */\n    async updateProject(userId: string, projectId: string, updates: ProjectUpdateData): Promise<Project> {\n        this.validateUserId(userId);\n        this.validateProjectId(projectId);\n        try {\n            const projectRef = doc(this.getUserProjectsRef(userId), projectId);\n            const projectDoc = await getDoc(projectRef);\n\n            if (!projectDoc.exists()) {\n                throw new ProjectServiceError('Project not found', 'PROJECT_NOT_FOUND');\n            }\n\n            const existingData = projectDoc.data();\n\n            if (existingData.isDefault && updates.name && updates.name !== existingData.name) {\n                throw new ProjectServiceError('Cannot rename default Inbox project', 'CANNOT_RENAME_DEFAULT');\n            }\n\n            const updateData: any = {\n                ...updates,\n                updatedAt: serverTimestamp(),\n            };\n\n            if (updates.name) {\n                updateData.name = updates.name.trim();\n            }\n            if (updates.description !== undefined) {\n                updateData.description = updates.description.trim();\n            }\n\n            await updateDoc(projectRef, updateData);\n\n            const updatedDoc = await getDoc(projectRef);\n            return this.mapDocumentToProject(updatedDoc);\n        } catch (error) {\n            if (error instanceof ProjectServiceError) throw error;\n            throw this.handleFirestoreError(error as FirestoreError, 'Failed to update project');\n        }\n    }\n\n    /**\n     * Get a single project by ID\n     */\n    async getProject(userId: string, projectId: string): Promise<Project> {\n        this.validateUserId(userId);\n        this.validateProjectId(projectId);\n        try {\n            const projectRef = doc(this.getUserProjectsRef(userId), projectId);\n            const projectDoc = await getDoc(projectRef);\n\n            if (!projectDoc.exists()) {\n                throw new ProjectServiceError('Project not found', 'PROJECT_NOT_FOUND');\n            }\n\n            return this.mapDocumentToProject(projectDoc);\n        } catch (error) {\n            if (error instanceof ProjectServiceError) throw error;\n            throw this.handleFirestoreError(error as FirestoreError, 'Failed to get project');\n        }\n    }\n\n    /**\n     * Get all projects for a user with optional filtering\n     */\n    async getProjects(userId: string, options: ProjectQueryOptions = {}): Promise<Project[]> {\n        this.validateUserId(userId);\n        try {\n            const projectsRef = this.getUserProjectsRef(userId);\n            let q = query(projectsRef, where('isDeleted', '==', false));\n\n            if (options.filters?.mode) {\n                q = query(q, where('mode', '==', options.filters.mode));\n            }\n            if (options.filters?.isArchived !== undefined) {\n                q = query(q, where('isArchived', '==', options.filters.isArchived));\n            }\n\n            const orderField = options.orderBy || 'position';\n            const direction = options.orderDirection || 'asc';\n            q = query(q, orderBy(orderField, direction));\n\n            const snapshot = await getDocs(q);\n            return snapshot.docs.map(doc => this.mapDocumentToProject(doc));\n        } catch (error) {\n            throw this.handleFirestoreError(error as FirestoreError, 'Failed to get projects');\n        }\n    }\n\n    /**\n     * Check if a project can be deleted\n     */\n    async checkProjectDeletion(userId: string, projectId: string): Promise<ProjectDeletionCheck> {\n        this.validateUserId(userId);\n        this.validateProjectId(projectId);\n        try {\n            const projectRef = doc(this.getUserProjectsRef(userId), projectId);\n            const projectDoc = await getDoc(projectRef);\n\n            if (!projectDoc.exists()) {\n                throw new ProjectServiceError('Project not found', 'PROJECT_NOT_FOUND');\n            }\n\n            const project = projectDoc.data();\n\n            if (project.isDefault) {\n                return {\n                    canDelete: false,\n                    hasIncompleteTasks: false,\n                    incompleteTaskCount: 0,\n                    totalTaskCount: project.taskCount || 0,\n                };\n            }\n\n            const tasksRef = collection(db, 'users', userId, 'tasks');\n            const tasksQuery = query(\n                tasksRef,\n                where('projectId', '==', projectId),\n                where('isDeleted', '==', false)\n            );\n            const tasksSnapshot = await getDocs(tasksQuery);\n\n            let incompleteCount = 0;\n            tasksSnapshot.docs.forEach(taskDoc => {\n                const task = taskDoc.data();\n                if (task.status !== 'completed' && !task.completed) {\n                    incompleteCount++;\n                }\n            });\n\n            return {\n                canDelete: true,\n                hasIncompleteTasks: incompleteCount > 0,\n                incompleteTaskCount: incompleteCount,\n                totalTaskCount: tasksSnapshot.size,\n            };\n        } catch (error) {\n            if (error instanceof ProjectServiceError) throw error;\n            throw this.handleFirestoreError(error as FirestoreError, 'Failed to check project deletion');\n        }\n    }\n\n    /**\n     * Delete a project and all its tasks\n     */\n    async deleteProject(userId: string, projectId: string, confirmed: boolean = false): Promise<void> {\n        this.validateUserId(userId);\n        this.validateProjectId(projectId);\n        try {\n            const deletionCheck = await this.checkProjectDeletion(userId, projectId);\n\n            if (!deletionCheck.canDelete) {\n                throw new ProjectServiceError('Cannot delete default Inbox project', 'CANNOT_DELETE_DEFAULT');\n            }\n\n            if (deletionCheck.hasIncompleteTasks && !confirmed) {\n                throw new ProjectServiceError(\n                    `Project has ${deletionCheck.incompleteTaskCount} incomplete task(s). Confirmation required.`,\n                    'CONFIRMATION_REQUIRED'\n                );\n            }\n\n            const batch = writeBatch(db);\n\n            const tasksRef = collection(db, 'users', userId, 'tasks');\n            const tasksQuery = query(tasksRef, where('projectId', '==', projectId));\n            const tasksSnapshot = await getDocs(tasksQuery);\n\n            tasksSnapshot.docs.forEach(taskDoc => {\n                batch.delete(taskDoc.ref);\n            });\n\n            const projectRef = doc(this.getUserProjectsRef(userId), projectId);\n            batch.delete(projectRef);\n\n            await batch.commit();\n        } catch (error) {\n            if (error instanceof ProjectServiceError) throw error;\n            throw this.handleFirestoreError(error as FirestoreError, 'Failed to delete project');\n        }\n    }\n\n    /**\n     * Update task counts for a project\n     */\n    async updateTaskCounts(userId: string, projectId: string): Promise<void> {\n        this.validateUserId(userId);\n        this.validateProjectId(projectId);\n        try {\n            const tasksRef = collection(db, 'users', userId, 'tasks');\n            const tasksQuery = query(\n                tasksRef,\n                where('projectId', '==', projectId),\n                where('isDeleted', '==', false)\n            );\n            const snapshot = await getDocs(tasksQuery);\n\n            let taskCount = 0;\n            let completedCount = 0;\n\n            snapshot.docs.forEach(taskDoc => {\n                const task = taskDoc.data();\n                taskCount++;\n                if (task.status === 'completed' || task.completed) {\n                    completedCount++;\n                }\n            });\n\n            const projectRef = doc(this.getUserProjectsRef(userId), projectId);\n            await updateDoc(projectRef, {\n                taskCount,\n                completedTaskCount: completedCount,\n                updatedAt: serverTimestamp(),\n            });\n        } catch (error) {\n            throw this.handleFirestoreError(error as FirestoreError, 'Failed to update task counts');\n        }\n    }\n\n    /**\n     * Subscribe to real-time project updates\n     */\n    subscribeToProjects(\n        userId: string,\n        callback: (projects: Project[]) => void,\n        options: ProjectQueryOptions = {}\n    ): () => void {\n        // Validate synchronously before setting up subscription\n        if (!userId || typeof userId !== 'string' || userId.trim() === '') {\n            console.error('Invalid userId for project subscription');\n            return () => { }; // Return no-op unsubscribe\n        }\n\n        const projectsRef = this.getUserProjectsRef(userId);\n        let q = query(projectsRef, where('isDeleted', '==', false));\n\n        if (options.filters?.mode) {\n            q = query(q, where('mode', '==', options.filters.mode));\n        }\n\n        q = query(q, orderBy(options.orderBy || 'position', options.orderDirection || 'asc'));\n\n        return onSnapshot(\n            q,\n            (snapshot) => {\n                const projects = snapshot.docs.map(doc => this.mapDocumentToProject(doc));\n                callback(projects);\n            },\n            (error) => {\n                console.error('Projects subscription error:', error);\n            }\n        );\n    }\n\n    /**\n     * Map Firestore document to Project type\n     */\n    private mapDocumentToProject(doc: DocumentSnapshot | QueryDocumentSnapshot | any): Project {\n        const data = doc.data?.() || doc;\n\n        return {\n            id: doc.id || data.projectId,\n            name: data.name || '',\n            description: data.description || '',\n            mode: data.mode || 'personal',\n            color: data.color || '#3B82F6',\n            icon: data.icon || '',\n            taskCount: data.taskCount || 0,\n            completedTaskCount: data.completedTaskCount || 0,\n            createdAt: data.createdAt?.toDate?.()?.toISOString() || new Date().toISOString(),\n            updatedAt: data.updatedAt?.toDate?.()?.toISOString() || new Date().toISOString(),\n            userId: data.userId || '',\n            isArchived: data.isArchived || false,\n            isDeleted: data.isDeleted || false,\n            isDefault: data.isDefault || false,\n            position: data.position || 0,\n        };\n    }\n\n    /**\n     * Handle Firestore errors\n     */\n    private handleFirestoreError(error: FirestoreError, defaultMessage: string): ProjectServiceError {\n        console.error('Firestore error:', error);\n        return new ProjectServiceError(\n            error.message || defaultMessage,\n            error.code,\n            error\n        );\n    }\n}\n\n// Export singleton instance\nexport const projectService = new ProjectService();\n","/**\n * AddProjectModal Component\n * Modal form to create a new project\n */\n\nimport { useState } from 'react';\nimport { projectService } from '../../services/firebase/project.service';\nimport type { Project, ProjectMode } from '../../types/project';\nimport { PROJECT_COLORS, PROJECT_ICONS, PROJECT_LIMITS } from '../../types/project';\nimport { useAuthStore, authSelectors } from '../../store/slices/authSlice';\nimport { useEffect } from 'react';\nimport { getAuth } from 'firebase/auth';\n\ninterface AddProjectModalProps {\n  userId: string;\n  mode: ProjectMode;\n  onClose: () => void;\n  onCreated: (project: Project) => void;\n}\n\nexport default function AddProjectModal({\n  userId,\n  mode,\n  onClose,\n  onCreated,\n}: AddProjectModalProps) {\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n  const [color, setColor] = useState<string>(PROJECT_COLORS[0]);\n  const [icon, setIcon] = useState<string>(PROJECT_ICONS[0]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [projectCount, setProjectCount] = useState(0);\n\n  const isEmailVerified = useAuthStore(authSelectors.isEmailVerified);\n  const isGoogleUser = getAuth().currentUser?.providerData.some(p => p.providerId === 'google.com');\n  const isVerified = isEmailVerified || isGoogleUser;\n\n  useEffect(() => {\n    if (userId) {\n      return projectService.subscribeToProjects(userId, (projects) => {\n        setProjectCount(projects.length);\n      }, { filters: { mode, isArchived: false } });\n    }\n  }, [userId, mode]);\n\n  const isLimitReached = !isVerified && projectCount >= PROJECT_LIMITS.MAX_PROJECTS_UNVERIFIED;\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!name.trim()) {\n      setError('Project name is required');\n      return;\n    }\n\n    if (name.length > PROJECT_LIMITS.MAX_PROJECT_NAME_LENGTH) {\n      setError(`Name must be ${PROJECT_LIMITS.MAX_PROJECT_NAME_LENGTH} characters or less`);\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const project = await projectService.createProject(userId, {\n        name: name.trim(),\n        description: description.trim(),\n        mode,\n        color,\n        icon,\n      });\n      onCreated(project);\n    } catch (err: any) {\n      setError(err.message || 'Failed to create project');\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"modal-overlay\" onClick={onClose}>\n      <div className=\"modal-content\" onClick={e => e.stopPropagation()}>\n        <div className=\"modal-header\">\n          <h2>Create New Project</h2>\n          <button className=\"close-btn\" onClick={onClose}></button>\n        </div>\n\n        <form onSubmit={handleSubmit}>\n          {!isVerified && (\n            <div className={`restriction-banner ${isLimitReached ? 'limit-reached' : ''}`}>\n              <div className=\"flex items-center gap-2\">\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\n                </svg>\n                <span>\n                  {isLimitReached\n                    ? `You've reached the ${PROJECT_LIMITS.MAX_PROJECTS_UNVERIFIED} project limit for unverified accounts.`\n                    : `Unverified accounts are limited to ${PROJECT_LIMITS.MAX_PROJECTS_UNVERIFIED} projects. (${projectCount}/${PROJECT_LIMITS.MAX_PROJECTS_UNVERIFIED})`}\n                </span>\n              </div>\n              {!isLimitReached && (\n                <p className=\"mt-1 text-xs opacity-80\">Verify your email for up to {PROJECT_LIMITS.MAX_PROJECTS_PER_MODE} projects.</p>\n              )}\n              {isLimitReached && (\n                <p className=\"mt-1 text-xs opacity-90 font-medium\">Please verify your email to create more projects.</p>\n              )}\n            </div>\n          )}\n\n          <div className=\"form-group\">\n            <label htmlFor=\"project-name\">Project Name</label>\n            <input\n              id=\"project-name\"\n              type=\"text\"\n              value={name}\n              onChange={e => setName(e.target.value)}\n              placeholder=\"Enter project name\"\n              maxLength={PROJECT_LIMITS.MAX_PROJECT_NAME_LENGTH}\n              autoFocus\n            />\n            <span className=\"char-count\">\n              {name.length}/{PROJECT_LIMITS.MAX_PROJECT_NAME_LENGTH}\n            </span>\n          </div>\n\n          <div className=\"form-group\">\n            <label htmlFor=\"project-description\">Description (optional)</label>\n            <textarea\n              id=\"project-description\"\n              value={description}\n              onChange={e => setDescription(e.target.value)}\n              placeholder=\"Brief description of this project\"\n              maxLength={PROJECT_LIMITS.MAX_PROJECT_DESCRIPTION_LENGTH}\n              rows={2}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label>Icon</label>\n            <div className=\"icon-grid\">\n              {PROJECT_ICONS.filter(i => i !== '').map(i => (\n                <button\n                  key={i}\n                  type=\"button\"\n                  className={`icon-option ${icon === i ? 'selected' : ''}`}\n                  onClick={() => setIcon(i)}\n                >\n                  {i}\n                </button>\n              ))}\n            </div>\n          </div>\n\n          <div className=\"form-group\">\n            <label>Color</label>\n            <div className=\"color-grid\">\n              {PROJECT_COLORS.map(c => (\n                <button\n                  key={c}\n                  type=\"button\"\n                  className={`color-option ${color === c ? 'selected' : ''}`}\n                  style={{ backgroundColor: c }}\n                  onClick={() => setColor(c)}\n                />\n              ))}\n            </div>\n          </div>\n\n          {error && (\n            <div className=\"error-message\">{error}</div>\n          )}\n\n          <div className=\"form-actions\">\n            <button type=\"button\" className=\"cancel-btn\" onClick={onClose}>\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              className=\"submit-btn\"\n              disabled={loading || isLimitReached}\n            >\n              {loading ? 'Creating...' : isLimitReached ? 'Limit Reached' : 'Create Project'}\n            </button>\n          </div>\n        </form>\n\n        <style>{`\n          .modal-overlay {\n            position: fixed;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            background: rgba(0, 0, 0, 0.5);\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            z-index: 100;\n          }\n\n          .modal-content {\n            background: white;\n            border-radius: 16px;\n            padding: 24px;\n            width: 90%;\n            max-width: 440px;\n            max-height: 90vh;\n            overflow-y: auto;\n            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);\n          }\n\n          .restriction-banner {\n            padding: 12px;\n            background: #fefce8;\n            border: 1px solid #fef08a;\n            border-radius: 8px;\n            color: #854d0e;\n            font-size: 13px;\n            margin-bottom: 20px;\n          }\n\n          .restriction-banner.limit-reached {\n            background: #fff7ed;\n            border-color: #ffedd5;\n            color: #9a3412;\n          }\n\n          .flex { display: flex; }\n          .items-center { align-items: center; }\n          .gap-2 { gap: 8px; }\n          .mt-1 { margin-top: 4px; }\n          .text-xs { font-size: 11px; }\n          .opacity-80 { opacity: 0.8; }\n          .font-medium { font-weight: 500; }\n\n          .modal-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 20px;\n          }\n\n          .modal-header h2 {\n            font-size: 18px;\n            font-weight: 600;\n            color: #1f2937;\n            margin: 0;\n          }\n\n          .close-btn {\n            width: 32px;\n            height: 32px;\n            border: none;\n            background: #f3f4f6;\n            border-radius: 8px;\n            font-size: 20px;\n            cursor: pointer;\n            color: #6b7280;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n          }\n\n          .close-btn:hover {\n            background: #e5e7eb;\n          }\n\n          .form-group {\n            margin-bottom: 16px;\n            position: relative;\n          }\n\n          .form-group label {\n            display: block;\n            font-size: 13px;\n            font-weight: 500;\n            color: #374151;\n            margin-bottom: 6px;\n          }\n\n          .form-group input,\n          .form-group textarea {\n            width: 100%;\n            padding: 10px 12px;\n            border: 1px solid #e5e7eb;\n            border-radius: 8px;\n            font-size: 14px;\n            transition: border-color 0.15s ease;\n          }\n\n          .form-group input:focus,\n          .form-group textarea:focus {\n            outline: none;\n            border-color: #3b82f6;\n            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n          }\n\n          .char-count {\n            position: absolute;\n            right: 8px;\n            top: 34px;\n            font-size: 11px;\n            color: #9ca3af;\n          }\n\n          .icon-grid {\n            display: flex;\n            flex-wrap: wrap;\n            gap: 8px;\n          }\n\n          .icon-option {\n            width: 40px;\n            height: 40px;\n            border: 2px solid #e5e7eb;\n            background: white;\n            border-radius: 8px;\n            font-size: 20px;\n            cursor: pointer;\n            transition: all 0.15s ease;\n          }\n\n          .icon-option:hover {\n            border-color: #d1d5db;\n            background: #f9fafb;\n          }\n\n          .icon-option.selected {\n            border-color: #3b82f6;\n            background: #eff6ff;\n          }\n\n          .color-grid {\n            display: flex;\n            flex-wrap: wrap;\n            gap: 8px;\n          }\n\n          .color-option {\n            width: 32px;\n            height: 32px;\n            border: 3px solid transparent;\n            border-radius: 50%;\n            cursor: pointer;\n            transition: all 0.15s ease;\n          }\n\n          .color-option:hover {\n            transform: scale(1.1);\n          }\n\n          .color-option.selected {\n            border-color: #1f2937;\n            box-shadow: 0 0 0 2px white inset;\n          }\n\n          .error-message {\n            padding: 10px 12px;\n            background: #fee2e2;\n            border-radius: 8px;\n            color: #dc2626;\n            font-size: 13px;\n            margin-bottom: 16px;\n          }\n\n          .form-actions {\n            display: flex;\n            gap: 12px;\n            margin-top: 20px;\n          }\n\n          .cancel-btn {\n            flex: 1;\n            padding: 12px;\n            background: #f3f4f6;\n            border: none;\n            border-radius: 8px;\n            font-size: 14px;\n            font-weight: 500;\n            color: #374151;\n            cursor: pointer;\n          }\n\n          .cancel-btn:hover {\n            background: #e5e7eb;\n          }\n\n          .submit-btn {\n            flex: 1;\n            padding: 12px;\n            background: #3b82f6;\n            border: none;\n            border-radius: 8px;\n            font-size: 14px;\n            font-weight: 500;\n            color: white;\n            cursor: pointer;\n          }\n\n          .submit-btn:hover:not(:disabled) {\n            background: #2563eb;\n          }\n\n          .submit-btn:disabled {\n            background: #9ca3af;\n            cursor: not-allowed;\n          }\n        `}</style>\n      </div>\n    </div>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport { clsx } from 'clsx';\nimport { motion } from 'framer-motion';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport Tooltip from '../../ui/Tooltip';\nimport { projectService } from '../../../services/firebase/project.service';\nimport { useAuthStore } from '../../../store/slices/authSlice';\nimport type { Project } from '../../../types/project';\nimport AddProjectModal from '../../AddProjectModal';\n\nexport interface NavigationProps {\n  collapsed?: boolean;\n  className?: string;\n}\n\ninterface NavigationItem {\n  id: string;\n  label: string;\n  path: string;\n  icon: React.ReactNode;\n  badge?: number | string;\n  children?: NavigationItem[];\n}\n\nconst navigationItems: NavigationItem[] = [\n  {\n    id: 'today',\n    label: \"Today\",\n    path: '/tasks?filter=today',\n    icon: (\n      <svg className=\"w-5 h-5 text-amber-500\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n        <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\n      </svg>\n    ),\n  },\n  {\n    id: 'upcoming',\n    label: 'Upcoming',\n    path: '/tasks?filter=upcoming',\n    icon: (\n      <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 5l7 7-7 7M5 5l7 7-7 7\" />\n      </svg>\n    ),\n  },\n  {\n    id: 'recurring',\n    label: 'Recurring',\n    path: '/tasks?filter=recurring',\n    icon: (\n      <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\n      </svg>\n    ),\n  },\n  {\n    id: 'completed',\n    label: 'Completed',\n    path: '/tasks?filter=completed',\n    icon: (\n      <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n      </svg>\n    ),\n  },\n  {\n    id: 'trash',\n    label: 'Trash',\n    path: '/tasks?filter=trash',\n    icon: (\n      <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n      </svg>\n    ),\n  },\n];\n\nconst settingsItems: NavigationItem[] = [\n  {\n    id: 'widget',\n    label: 'Widget',\n    path: '/widget',\n    icon: (\n      <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z\" />\n      </svg>\n    ),\n  },\n  {\n    id: 'settings',\n    label: 'Settings',\n    path: '/settings',\n    icon: (\n      <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\" />\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n      </svg>\n    ),\n  },\n  {\n    id: 'help',\n    label: 'Help & Support',\n    path: '/help',\n    icon: (\n      <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n      </svg>\n    ),\n  },\n];\n\ninterface NavigationItemComponentProps {\n  item: NavigationItem;\n  isActive: boolean;\n  collapsed: boolean;\n  onClick: (path: string) => void;\n}\n\nconst NavigationItemComponent: React.FC<NavigationItemComponentProps> = ({\n  item,\n  isActive,\n  collapsed,\n  onClick,\n}) => {\n  const handleClick = () => {\n    onClick(item.path);\n  };\n\n  const itemContent = (\n    <motion.button\n      whileHover={{ x: collapsed ? 0 : 4 }}\n      whileTap={{ scale: 0.98 }}\n      onClick={handleClick}\n      className={clsx(\n        'w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200',\n        'focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2',\n        collapsed ? 'justify-center' : 'justify-start',\n        isActive\n          ? 'bg-primary-100 text-primary-900 border-r-2 border-primary-600'\n          : 'text-gray-700 hover:text-gray-900 hover:bg-gray-100'\n      )}\n    >\n      <span className=\"flex-shrink-0\">\n        {item.icon}\n      </span>\n\n      {!collapsed && (\n        <>\n          <span className=\"ml-3 flex-1 text-left\">\n            {item.label}\n          </span>\n\n          {item.badge && (\n            <span className=\"ml-2 px-2 py-0.5 text-xs font-medium bg-gray-200 text-gray-700 rounded-full\">\n              {item.badge}\n            </span>\n          )}\n        </>\n      )}\n    </motion.button>\n  );\n\n  if (collapsed) {\n    return (\n      <Tooltip content={item.label} position=\"right\">\n        {itemContent}\n      </Tooltip>\n    );\n  }\n\n  return itemContent;\n};\n\nexport const Navigation: React.FC<NavigationProps> = ({\n  collapsed = false,\n  className,\n}) => {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { user } = useAuthStore();\n  const [projects, setProjects] = useState<Project[]>([]);\n  const [showAddProjectModal, setShowAddProjectModal] = useState(false);\n\n  useEffect(() => {\n    if (user?.uid) {\n      return projectService.subscribeToProjects(user.uid, (data: Project[]) => {\n        setProjects(data);\n      });\n    }\n  }, [user?.uid]);\n\n  const handleNavigate = (path: string) => {\n    navigate(path);\n  };\n\n  const isActiveItem = (path: string) => {\n    return location.pathname === path || location.pathname.startsWith(path + '/');\n  };\n\n  return (\n    <nav className={clsx('px-3 space-y-6', className)}>\n      {/* Main navigation */}\n      <div className=\"space-y-1\">\n        <div className=\"space-y-1\">\n          {navigationItems.map((item) => (\n            <NavigationItemComponent\n              key={item.id}\n              item={item}\n              isActive={isActiveItem(item.path)}\n              collapsed={collapsed}\n              onClick={handleNavigate}\n            />\n          ))}\n        </div>\n      </div>\n\n      {/* Projects navigation */}\n      <div className=\"space-y-1\">\n        {!collapsed && (\n          <div className=\"px-3 flex items-center justify-between mb-2\">\n            <h3 className=\"text-xs font-semibold text-gray-500 uppercase tracking-wider\">\n              Projects\n            </h3>\n            <button\n              onClick={(e) => {\n                e.preventDefault();\n                setShowAddProjectModal(true);\n              }}\n              className=\"text-gray-400 hover:text-primary-600 transition-colors\"\n              title=\"Add Project\"\n            >\n              <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\n              </svg>\n            </button>\n          </div>\n        )}\n\n        <div className=\"space-y-1\">\n          {projects\n            .filter(p => !p.isDefault)\n            .map((project) => (\n              <NavigationItemComponent\n                key={project.id}\n                item={{\n                  id: project.id,\n                  label: project.name,\n                  path: `/tasks?projectId=${project.id}`,\n                  icon: (\n                    <span className=\"w-3 h-3 rounded-full\" style={{ backgroundColor: project.color || '#9CA3AF' }}></span>\n                  ),\n                  badge: project.taskCount > 0 ? project.taskCount : undefined\n                }}\n                isActive={location.search.includes(`projectId=${project.id}`)}\n                collapsed={collapsed}\n                onClick={handleNavigate}\n              />\n            ))}\n          {projects.length === 0 && !collapsed && (\n            <p className=\"px-3 py-2 text-xs text-gray-400 italic\">No projects yet</p>\n          )}\n        </div>\n      </div>\n\n      {/* Settings navigation */}\n      <div className=\"space-y-1\">\n        {!collapsed && (\n          <h3 className=\"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider\">\n            Settings\n          </h3>\n        )}\n\n        <div className=\"space-y-1\">\n          {settingsItems.map((item) => (\n            <NavigationItemComponent\n              key={item.id}\n              item={item}\n              isActive={isActiveItem(item.path)}\n              collapsed={collapsed}\n              onClick={handleNavigate}\n            />\n          ))}\n        </div>\n      </div>\n\n      {/* Modals */}\n      {showAddProjectModal && user && (\n        <AddProjectModal\n          userId={user.uid}\n          mode=\"personal\" // Default to personal, or we could track current mode\n          onClose={() => setShowAddProjectModal(false)}\n          onCreated={(project) => {\n            setShowAddProjectModal(false);\n            handleNavigate(`/tasks?projectId=${project.id}`);\n          }}\n        />\n      )}\n    </nav>\n  );\n};\n\nexport default Navigation;","import React from 'react';\nimport { clsx } from 'clsx';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useUIStore } from '../../../store/slices/uiSlice';\nimport Navigation from '../Navigation';\nimport { Link } from 'react-router-dom';\n\nexport interface SidebarProps {\n  className?: string;\n}\n\n\n\nconst backdropVariants = {\n  open: { opacity: 1 },\n  closed: { opacity: 0 },\n};\n\nexport const Sidebar: React.FC<SidebarProps> = ({ className }) => {\n  const {\n    sidebarOpen,\n    sidebarCollapsed,\n    setSidebarOpen,\n    toggleSidebarCollapsed\n  } = useUIStore();\n\n  const closeSidebar = () => {\n    setSidebarOpen(false);\n  };\n\n  const sidebarClasses = clsx(\n    'fixed inset-y-0 left-0 z-50 w-64 bg-white border-r border-gray-200',\n    'transform transition-transform duration-300 ease-in-out lg:translate-x-0',\n    'flex flex-col',\n    sidebarCollapsed && 'lg:w-16',\n    className\n  );\n\n  return (\n    <>\n      {/* Mobile backdrop */}\n      <AnimatePresence>\n        {sidebarOpen && (\n          <motion.div\n            variants={backdropVariants}\n            initial=\"closed\"\n            animate=\"open\"\n            exit=\"closed\"\n            className=\"fixed inset-0 z-40 bg-black/50 lg:hidden\"\n            onClick={closeSidebar}\n          />\n        )}\n      </AnimatePresence>\n\n      {/* Sidebar */}\n      <aside\n        className={clsx(\n          sidebarClasses,\n          sidebarOpen ? 'translate-x-0' : '-translate-x-full lg:translate-x-0'\n        )}\n      >\n        {/* Sidebar header */}\n        <div className={clsx(\n          'flex items-center justify-between p-4 border-b border-gray-200',\n          sidebarCollapsed && 'lg:justify-center'\n        )}>\n          {!sidebarCollapsed && (\n            <Link to=\"/\" className=\"flex items-center hover:opacity-80 transition-opacity\">\n              <h2 className=\"text-lg font-semibold text-gray-900\">\n                Home\n              </h2>\n            </Link>\n          )}\n\n          <div className=\"flex items-center space-x-2\">\n            {/* Collapse toggle for desktop */}\n            <button\n              onClick={toggleSidebarCollapsed}\n              className=\"hidden lg:flex p-1.5 rounded-lg hover:bg-gray-100 transition-colors\"\n              aria-label={sidebarCollapsed ? 'Expand sidebar' : 'Collapse sidebar'}\n            >\n              <svg\n                className={clsx(\n                  'w-4 h-4 text-gray-600 transition-transform',\n                  sidebarCollapsed && 'rotate-180'\n                )}\n                fill=\"none\"\n                stroke=\"currentColor\"\n                viewBox=\"0 0 24 24\"\n              >\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n              </svg>\n            </button>\n\n            {/* Close button for mobile */}\n            <button\n              onClick={closeSidebar}\n              className=\"lg:hidden p-1.5 rounded-lg hover:bg-gray-100 transition-colors\"\n              aria-label=\"Close sidebar\"\n            >\n              <svg className=\"w-4 h-4 text-gray-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n              </svg>\n            </button>\n          </div>\n        </div>\n\n        {/* Navigation */}\n        <div className=\"flex-1 overflow-y-auto py-4\">\n          <Navigation collapsed={sidebarCollapsed} />\n        </div>\n\n        {/* Sidebar footer */}\n        <div className={clsx(\n          'p-4 border-t border-gray-200',\n          sidebarCollapsed && 'lg:px-2'\n        )}>\n          {!sidebarCollapsed ? (\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center\">\n                  <svg className=\"w-4 h-4 text-primary-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n                  </svg>\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <p className=\"text-sm font-medium text-gray-900 truncate\">\n                    Home\n                  </p>\n                  <p className=\"text-xs text-gray-500 truncate\">\n                    v1.0.0\n                  </p>\n                </div>\n              </div>\n            </div>\n          ) : (\n            <div className=\"flex justify-center\">\n              <div className=\"w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center\">\n                <svg className=\"w-4 h-4 text-primary-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n                </svg>\n              </div>\n            </div>\n          )}\n        </div>\n      </aside>\n\n      {/* Sidebar spacer for desktop */}\n      <div className={clsx(\n        'hidden lg:block flex-shrink-0 transition-all duration-300',\n        sidebarCollapsed ? 'w-16' : 'w-64'\n      )} />\n    </>\n  );\n};\n\nexport default Sidebar;","import React from 'react';\nimport { clsx } from 'clsx';\nimport { useUIStore } from '../../../store/slices/uiSlice';\nimport Header from '../Header';\nimport Sidebar from '../Sidebar';\n\nexport interface AppLayoutProps {\n  children: React.ReactNode;\n  className?: string;\n  showHeader?: boolean;\n  showSidebar?: boolean;\n  headerProps?: any;\n  sidebarProps?: any;\n}\n\nexport const AppLayout: React.FC<AppLayoutProps> = ({\n  children,\n  className,\n  showHeader = true,\n  showSidebar = true,\n  headerProps = {},\n  sidebarProps = {},\n}) => {\n  const { sidebarCollapsed } = useUIStore();\n\n  return (\n    <div className={clsx('min-h-screen bg-gray-50', className)}>\n      {/* Sidebar */}\n      {showSidebar && <Sidebar {...sidebarProps} />}\n\n      {/* Main content area */}\n      <div className={clsx(\n        'flex flex-col min-h-screen',\n        showSidebar && (sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-64')\n      )}>\n        {/* Header */}\n        {showHeader && <Header {...headerProps} />}\n\n        {/* Page content */}\n        <main className=\"flex-1 overflow-x-hidden\">\n          {children}\n        </main>\n      </div>\n    </div>\n  );\n};\n\n// Full screen layout for auth pages, landing pages, etc.\nexport interface FullScreenLayoutProps {\n  children: React.ReactNode;\n  className?: string;\n  showHeader?: boolean;\n  headerProps?: any;\n}\n\nexport const FullScreenLayout: React.FC<FullScreenLayoutProps> = ({\n  children,\n  className,\n  showHeader = false,\n  headerProps = {},\n}) => {\n  return (\n    <div className={clsx('min-h-screen bg-gray-50', className)}>\n      {showHeader && <Header {...headerProps} />}\n      \n      <main className={clsx(\n        'flex flex-col',\n        showHeader ? 'min-h-[calc(100vh-4rem)]' : 'min-h-screen'\n      )}>\n        {children}\n      </main>\n    </div>\n  );\n};\n\n// Split layout for auth forms, onboarding, etc.\nexport interface SplitLayoutProps {\n  children: React.ReactNode;\n  leftPanel?: React.ReactNode;\n  rightPanel?: React.ReactNode;\n  leftPanelProps?: {\n    className?: string;\n    background?: string;\n  };\n  rightPanelProps?: {\n    className?: string;\n    background?: string;\n  };\n  className?: string;\n}\n\nexport const SplitLayout: React.FC<SplitLayoutProps> = ({\n  children,\n  leftPanel,\n  rightPanel,\n  leftPanelProps = {},\n  rightPanelProps = {},\n  className,\n}) => {\n  return (\n    <div className={clsx('min-h-screen flex', className)}>\n      {/* Left panel */}\n      {leftPanel && (\n        <div className={clsx(\n          'hidden lg:flex lg:flex-1 lg:flex-col',\n          leftPanelProps.background || 'bg-primary-600',\n          leftPanelProps.className\n        )}>\n          {leftPanel}\n        </div>\n      )}\n\n      {/* Main content */}\n      <div className={clsx(\n        'flex-1 flex flex-col justify-center',\n        rightPanelProps.background || 'bg-white',\n        rightPanelProps.className\n      )}>\n        {children}\n      </div>\n\n      {/* Right panel */}\n      {rightPanel && (\n        <div className={clsx(\n          'hidden lg:flex lg:flex-1 lg:flex-col',\n          rightPanelProps.background || 'bg-gray-100',\n          rightPanelProps.className\n        )}>\n          {rightPanel}\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Center layout for simple pages\nexport interface CenterLayoutProps {\n  children: React.ReactNode;\n  maxWidth?: string;\n  className?: string;\n  showHeader?: boolean;\n  headerProps?: any;\n}\n\nexport const CenterLayout: React.FC<CenterLayoutProps> = ({\n  children,\n  maxWidth = 'max-w-md',\n  className,\n  showHeader = false,\n  headerProps = {},\n}) => {\n  return (\n    <div className={clsx('min-h-screen bg-gray-50', className)}>\n      {showHeader && <Header {...headerProps} />}\n      \n      <main className={clsx(\n        'flex flex-col items-center justify-center px-4 sm:px-6 lg:px-8',\n        showHeader ? 'min-h-[calc(100vh-4rem)]' : 'min-h-screen'\n      )}>\n        <div className={clsx('w-full', maxWidth)}>\n          {children}\n        </div>\n      </main>\n    </div>\n  );\n};\n\n// Modal layout for overlay content\nexport interface ModalLayoutProps {\n  children: React.ReactNode;\n  isOpen: boolean;\n  onClose: () => void;\n  size?: 'sm' | 'md' | 'lg' | 'xl' | 'full';\n  className?: string;\n  showCloseButton?: boolean;\n}\n\nexport const ModalLayout: React.FC<ModalLayoutProps> = ({\n  children,\n  isOpen,\n  onClose,\n  size = 'md',\n  className,\n  showCloseButton = true,\n}) => {\n  if (!isOpen) return null;\n\n  const sizeClasses = {\n    sm: 'max-w-sm',\n    md: 'max-w-md',\n    lg: 'max-w-lg',\n    xl: 'max-w-xl',\n    full: 'max-w-full h-full',\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-50 overflow-y-auto\">\n      {/* Backdrop */}\n      <div\n        className=\"fixed inset-0 bg-black bg-opacity-50 transition-opacity\"\n        onClick={onClose}\n      />\n\n      {/* Modal */}\n      <div className=\"flex min-h-full items-center justify-center p-4 text-center sm:p-0\">\n        <div className={clsx(\n          'relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 w-full',\n          sizeClasses[size],\n          className\n        )}>\n          {showCloseButton && (\n            <button\n              type=\"button\"\n              className=\"absolute right-4 top-4 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-primary-500 rounded-lg p-1\"\n              onClick={onClose}\n            >\n              <svg className=\"h-6 w-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n              </svg>\n            </button>\n          )}\n          \n          {children}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AppLayout;","import { Routes, Route, Navigate, Outlet } from 'react-router-dom';\nimport { useState, useEffect } from 'react';\nimport { getAuth, onAuthStateChanged } from 'firebase/auth';\nimport { useAuthStore } from './store/slices/authSlice';\n\n// Pages\nimport { lazy, Suspense } from 'react';\n\nconst Dashboard = lazy(() => import('./pages/Dashboard'));\nconst Tasks = lazy(() => import('./pages/Tasks'));\nconst Analytics = lazy(() => import('./pages/Analytics'));\nconst Widget = lazy(() => import('./pages/Widget'));\nconst StickiesDemo = lazy(() => import('./pages/StickiesDemo'));\nconst WidgetOnly = lazy(() => import('./pages/WidgetOnly'));\nconst Login = lazy(() => import('./pages/Login'));\nconst Register = lazy(() => import('./pages/Register'));\nconst HelpSupport = lazy(() => import('./pages/HelpSupport'));\nconst Settings = lazy(() => import('./pages/Settings'));\n\nimport AppLayout from './components/layout/AppLayout';\n\n// Simple loading component\nfunction LoadingScreen() {\n  return (\n    <div className=\"flex items-center justify-center min-h-screen bg-gray-50\">\n      <div className=\"text-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n        <p className=\"text-gray-600\">Loading...</p>\n      </div>\n    </div>\n  );\n}\n\n// Auth Layout Wrapper\nfunction AuthLayoutWrapper() {\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <Outlet />\n    </div>\n  );\n}\n\n// Protected Route Wrapper\nfunction ProtectedRouteWrapper() {\n  const { user, setUser, setLoading } = useAuthStore();\n  const [localLoading, setLocalLoading] = useState(true);\n\n  useEffect(() => {\n    const auth = getAuth();\n    const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\n      if (currentUser) {\n        // Handle UserProfile type conversion\n        const profile = {\n          uid: currentUser.uid,\n          email: currentUser.email,\n          displayName: currentUser.displayName,\n          photoURL: currentUser.photoURL,\n          emailVerified: currentUser.emailVerified,\n          providerId: currentUser.providerData[0]?.providerId\n        };\n        setUser(profile as any);\n      } else {\n        setUser(null);\n      }\n      setLocalLoading(false);\n      setLoading(false);\n    });\n\n    return () => unsubscribe();\n  }, [setUser, setLoading]);\n\n  if (localLoading) {\n    return <LoadingScreen />;\n  }\n\n  if (!user) {\n    return <Navigate to=\"/login\" replace />;\n  }\n\n  return (\n    <AppLayout>\n      <Outlet />\n    </AppLayout>\n  );\n}\n\nfunction App() {\n  return (\n    <Suspense fallback={<LoadingScreen />}>\n      <Routes>\n        {/* Public routes */}\n        <Route element={<AuthLayoutWrapper />}>\n          <Route path=\"/login\" element={<Login />} />\n          <Route path=\"/register\" element={<Register />} />\n        </Route>\n\n        {/* Standalone widget (has its own auth) */}\n        <Route path=\"/w\" element={<WidgetOnly />} />\n\n        {/* Protected routes */}\n        <Route element={<ProtectedRouteWrapper />}>\n          <Route path=\"/\" element={<Dashboard />} />\n          <Route path=\"/tasks\" element={<Tasks />} />\n          <Route path=\"/analytics\" element={<Analytics />} />\n          <Route path=\"/widget\" element={<Widget />} />\n          <Route path=\"/stickies\" element={<StickiesDemo />} />\n          <Route path=\"/help\" element={<HelpSupport />} />\n          <Route path=\"/settings\" element={<Settings />} />\n        </Route>\n\n        {/* Fallback */}\n        <Route path=\"*\" element={<Navigate to=\"/\" replace />} />\n      </Routes>\n    </Suspense>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport { BrowserRouter } from 'react-router-dom';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport App from './App';\nimport './index.css';\n\n// Initialize Firebase before app starts\nimport './services/firebase/config';\n\n// Create a client\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      refetchOnWindowFocus: false,\n      retry: 1,\n      staleTime: 5 * 60 * 1000, // 5 minutes\n    },\n  },\n});\n\nReactDOM.createRoot(document.getElementById('root')!).render(\n  <React.StrictMode>\n    <QueryClientProvider client={queryClient}>\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    </QueryClientProvider>\n  </React.StrictMode>\n);\n"],"file":"assets/index-DfqPk0_m.js"}