import{j as t}from"./index-uyweEEt0.js";import{e as ye,r as c}from"./router-BQwT71Ls.js";import{g as be,a as v,f as E,q as we,w as je,h as De,T as Q,k as w,u as $,j as H,l as te}from"./firebase-Bitrq_QJ.js";import{p as se,A as ve}from"./project.service-CKAKJt6L.js";import"./vendor-D3F3s8fL.js";import"./utils-B-dksMZM.js";import"./query-UIen6-FV.js";import"./ui-BOVfd5SI.js";function Ae(){const[A]=ye(),z=c.useRef(null),[y,re]=c.useState([]),[ae,V]=c.useState(!1),[N,k]=c.useState(!1),[G,M]=c.useState(!1),[T,S]=c.useState(null),[m,le]=c.useState(null),[J,ne]=c.useState("priority"),[j,P]=c.useState("all"),[p,K]=c.useState(A.get("filter")||"all"),[q,oe]=c.useState(""),[I,ie]=c.useState(""),[h,O]=c.useState(()=>localStorage.getItem("taskModeFilter")||"all"),[Y,X]=c.useState([]),[b,C]=c.useState(void 0),[L,W]=c.useState(!1);c.useEffect(()=>{const e=A.get("filter");e&&["all","today","thisWeek","thisMonth","custom","upcoming","recurring","completed","trash"].includes(e)&&K(e)},[A]);const[a,x]=c.useState({title:"",description:"",startDate:(()=>{const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`})(),startTime:"",priority:"medium",tags:"",isRepeating:!1,repeatFrequency:"daily",repeatEndDate:"",mode:"personal"});c.useEffect(()=>{const r=be().currentUser;le(r),r&&D(r.uid)},[]),c.useEffect(()=>{if(!m?.uid)return;if(h==="all"){C(void 0),X([]);return}const e=se.subscribeToProjects(m.uid,r=>{X(r),r.length===0&&se.getOrCreateDefaultProject(m.uid,h)},{filters:{mode:h,isArchived:!1}});return()=>e()},[m?.uid,h]);const D=async e=>{V(!0);try{const r=v(),l=E(r,"tasks"),i=we(l,je("userId","==",e)),g=await De(i),s=new Date,n=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`,o=[];g.forEach(d=>{const u={id:d.id,...d.data()};if(!u.isDeleted){if(u.isRepeating&&u.status!=="completed"&&!u.completed){const f=u.startDate?.split("T")[0];if(f&&f<n)return}o.push(u)}}),re(o)}catch(r){console.error("Error loading tasks:",r)}finally{V(!1)}},de=async e=>{if(e.preventDefault(),console.log("Form submitted!",a),!m){console.error("No user found!"),alert("You must be logged in to create a task");return}try{const r=v(),l=a.tags.split(",").map(o=>o.trim()).filter(o=>o.length>0),i=new Date,g=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(i.getDate()).padStart(2,"0")}`,s=a.startDate||g,n={title:a.title,description:a.description,startDate:s,startTime:a.startTime||null,priority:a.priority,tags:l,isRepeating:a.isRepeating,repeatFrequency:a.isRepeating?a.repeatFrequency:null,repeatEndDate:a.isRepeating?a.repeatEndDate:null,status:"todo",userId:m.uid,createdAt:Q.now(),mode:a.mode||"personal"};if(T){const o=w(r,"tasks",T.id);await $(o,n),console.log("Task updated successfully"),alert("Task updated successfully!")}else{const o=E(r,"tasks"),d=await H(o,n);console.log("Task created successfully with ID:",d.id),alert("Task created successfully!")}x({title:"",description:"",startDate:g,startTime:"",priority:"medium",tags:"",isRepeating:!1,repeatFrequency:"daily",repeatEndDate:"",mode:"personal"}),k(!1),S(null),await D(m.uid)}catch(r){console.error("Error saving task:",r),alert(`Failed to save task: ${r.message}`)}},ce=async e=>{if(!m){alert("You must be logged in to create a task");return}try{const r=v(),l={title:e.title,description:e.description,startDate:e.startDate,startTime:e.startTime||null,priority:e.priority,tags:e.tags,isRepeating:e.isRepeating,repeatFrequency:e.isRepeating?e.repeatFrequency:null,repeatEndDate:e.isRepeating?e.repeatEndDate:null,status:"todo",userId:m.uid,createdAt:Q.now(),mode:e.mode||"personal",subtasks:e.subtasks||[]};await H(E(r,"tasks"),l),M(!1),await D(m.uid)}catch(r){console.error("Error saving task:",r),alert(`Failed to save task: ${r.message}`)}},ue=e=>{const r=new Date,l=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`;S(e),x({title:e.title,description:e.description||"",startDate:e.startDate||l,startTime:e.startTime||"",priority:e.priority,tags:e.tags?e.tags.join(", "):"",isRepeating:e.isRepeating||!1,repeatFrequency:e.repeatFrequency||"daily",repeatEndDate:e.repeatEndDate||"",mode:e.mode||"personal"}),k(!0),setTimeout(()=>{z.current?.scrollIntoView({behavior:"smooth",block:"start"})},100)},Z=(e,r)=>{const l=new Date(e);switch(r){case"daily":l.setDate(l.getDate()+1);break;case"weekly":l.setDate(l.getDate()+7);break;case"monthly":l.setMonth(l.getMonth()+1);break}return l.toISOString().split("T")[0]},me=e=>{if(!e.isRepeating||!e.repeatFrequency)return!1;if(e.repeatEndDate){const r=new Date(e.repeatEndDate);return new Date(Z(e.startDate,e.repeatFrequency))<=r}return!0},pe=async e=>{try{const r=v(),l=w(r,"tasks",e.id),i=e.status==="completed"?"todo":"completed";if(await $(l,{status:i,completed:i==="completed",completedAt:i==="completed"?new Date:null,updatedAt:new Date}),i==="completed"&&me(e)){const g=Z(e.startDate,e.repeatFrequency),s=new Date,n=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`;if(g>=n){const o={title:e.title,description:e.description,startDate:g,startTime:e.startTime||null,status:"todo",priority:e.priority,tags:e.tags||[],isRepeating:e.isRepeating,repeatFrequency:e.repeatFrequency,repeatEndDate:e.repeatEndDate||null,userId:e.userId,createdAt:Q.now(),completed:!1};await H(E(r,"tasks"),o)}}m&&D(m.uid)}catch(r){console.error("Error toggling task:",r),alert("Failed to update task")}},[U,F]=c.useState({show:!1,taskId:null}),ge=e=>{F({show:!0,taskId:e})},xe=async()=>{if(!U.taskId)return;const e=U.taskId,r=y.find(l=>l.id===e);F({show:!1,taskId:null});try{const l=v();if(r?.isRepeating&&r.startDate){const g=y.filter(o=>o.isRepeating&&o.title===r.title&&o.repeatFrequency===r.repeatFrequency&&o.userId===r.userId).sort((o,d)=>o.startDate.localeCompare(d.startDate))[0],s=g.id===e,n=r.startDate.split("T")[0];if(s){const o=w(l,"tasks",e),d=g.deletedOccurrences||[];await $(o,{isDeleted:!0,deletedOccurrences:[...d,n]})}else{const o=w(l,"tasks",g.id),d=g.deletedOccurrences||[];d.includes(n)||await $(o,{deletedOccurrences:[...d,n]});const u=w(l,"tasks",e);await te(u)}}else{const i=w(l,"tasks",e);await te(i)}m&&D(m.uid)}catch(l){console.error("Error deleting task:",l),alert("Failed to delete task")}},he=(e,r)=>{if(!e)return"";const i=new Date(e).toLocaleDateString();return r?`${i} ${r}`:i},fe=e=>{switch(e){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},R=e=>{switch(e){case"high":return 3;case"medium":return 2;case"low":return 1;default:return 0}},B=(()=>{let e=[...y];if(j==="active"||p==="today"||p==="thisWeek"||p==="upcoming"?e=e.filter(s=>s.status!=="completed"&&!s.completed&&!s.isDeleted):j==="completed"||p==="completed"?e=e.filter(s=>(s.status==="completed"||s.completed)&&!s.isDeleted):p==="trash"?e=e.filter(s=>s.isDeleted===!0):p==="recurring"?e=e.filter(s=>s.isRepeating===!0&&!s.isDeleted):e=e.filter(s=>!s.isDeleted),h!=="all"&&(e=e.filter(s=>(s.mode||"personal")===h)),b&&(e=e.filter(s=>s.projectId===b)),p!=="all"){const s=new Date,n=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`;e=e.filter(o=>{if(!o.startDate)return!1;const d=o.startDate.split("T")[0];if(p==="today")return d===n;if(p==="thisWeek"){const u=new Date(d),f=new Date(n),_=new Date(f);_.setDate(f.getDate()-f.getDay());const ee=new Date(f);return ee.setDate(f.getDate()+(6-f.getDay())),u>=_&&u<=ee}else if(p==="thisMonth"){const u=new Date(d),f=new Date(n);return u.getMonth()===f.getMonth()&&u.getFullYear()===f.getFullYear()}else{if(p==="upcoming")return d>n;if(p==="custom")return!(q&&d<q||I&&d>I)}return!0})}const r=e.filter(s=>s.status==="completed"||s.completed),l=e.filter(s=>s.status!=="completed"&&!s.completed);let i=[];switch(J){case"priority":i=l.sort((s,n)=>R(n.priority)-R(s.priority));break;case"time":i=l.sort((s,n)=>{if(!s.startDate&&!n.startDate)return 0;if(!s.startDate)return 1;if(!n.startDate)return-1;const o=s.startDate.localeCompare(n.startDate);if(o!==0)return o;const d=s.startTime||"23:59",u=n.startTime||"23:59";return d.localeCompare(u)});break;case"deadline":i=l.sort((s,n)=>!s.startDate&&!n.startDate?0:s.startDate?n.startDate?s.startDate.localeCompare(n.startDate):-1:1);break;case"date":i=l.sort((s,n)=>!s.startDate&&!n.startDate?0:s.startDate?n.startDate?s.startDate.localeCompare(n.startDate):-1:1);break;default:i=l}const g=r.sort((s,n)=>{const o=s.completedAt,d=n.completedAt;return o&&d?new Date(d).getTime()-new Date(o).getTime():R(n.priority)-R(s.priority)});return[...i,...g]})();return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-4 sm:py-8",children:[t.jsx("div",{className:"mb-6",children:t.jsx("button",{onClick:()=>{k(!N),S(null),x({title:"",description:"",startDate:"",startTime:"",priority:"medium",tags:"",isRepeating:!1,repeatFrequency:"daily",repeatEndDate:"",mode:"personal"})},className:"w-full sm:w-auto px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-medium",children:N?"âœ• Cancel":"+ Add New Task"})}),N&&t.jsxs("div",{ref:z,className:"bg-white rounded-lg shadow p-6 mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:T?"Edit Task":"Create New Task"}),t.jsxs("form",{onSubmit:de,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Title *"}),t.jsx("input",{type:"text",required:!0,value:a.title,onChange:e=>x({...a,title:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter task title"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),t.jsx("textarea",{value:a.description,onChange:e=>x({...a,description:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter task description"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsx("div",{children:t.jsx("input",{type:"date",value:a.startDate,onChange:e=>x({...a,startDate:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}),t.jsxs("div",{children:[t.jsx("input",{type:"time",value:a.startTime,onChange:e=>x({...a,startTime:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional time"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Time is optional"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),t.jsxs("select",{value:a.priority,onChange:e=>x({...a,priority:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"low",children:"Low"}),t.jsx("option",{value:"medium",children:"Medium"}),t.jsx("option",{value:"high",children:"High"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags (comma-separated)"}),t.jsx("input",{type:"text",value:a.tags,onChange:e=>x({...a,tags:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"work, urgent, meeting"})]})]}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mode"}),t.jsxs("select",{value:a.mode,onChange:e=>x({...a,mode:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"personal",children:"ðŸ  Personal"}),t.jsx("option",{value:"professional",children:"ðŸ’¼ Professional"})]})]})}),t.jsxs("div",{className:"border-t pt-4",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx("input",{type:"checkbox",id:"isRepeating",checked:a.isRepeating,onChange:e=>x({...a,isRepeating:e.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),t.jsx("label",{htmlFor:"isRepeating",className:"ml-2 block text-sm font-medium text-gray-700",children:"ðŸ”„ Make this a repeating task"})]}),a.isRepeating&&t.jsxs("div",{className:"ml-6 space-y-3 bg-blue-50 p-4 rounded-md",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Repeat Frequency"}),t.jsxs("select",{value:a.repeatFrequency,onChange:e=>x({...a,repeatFrequency:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"daily",children:"Daily"}),t.jsx("option",{value:"weekly",children:"Weekly"}),t.jsx("option",{value:"monthly",children:"Monthly"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Repeat Until (End Date)"}),t.jsx("input",{type:"date",value:a.repeatEndDate,onChange:e=>x({...a,repeatEndDate:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),t.jsxs("p",{className:"text-xs text-gray-600",children:["This task will repeat ",a.repeatFrequency,a.repeatEndDate&&` until ${new Date(a.repeatEndDate).toLocaleDateString()}`]})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-medium",children:T?"Update Task":"Create Task"}),t.jsx("button",{type:"button",onClick:()=>{k(!1),S(null)},className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 font-medium",children:"Cancel"})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsxs("div",{className:"p-6 border-b border-gray-200",children:[t.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Your Tasks (",B.length,")"]}),t.jsxs("div",{className:"flex border-b border-gray-200 mb-4",children:[t.jsxs("button",{onClick:()=>P("all"),className:`px-4 py-2 font-medium text-sm ${j==="all"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:["All (",y.length,")"]}),t.jsxs("button",{onClick:()=>P("active"),className:`px-4 py-2 font-medium text-sm ${j==="active"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:["Active (",y.filter(e=>e.status!=="completed"&&!e.completed).length,")"]}),t.jsxs("button",{onClick:()=>P("completed"),className:`px-4 py-2 font-medium text-sm ${j==="completed"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:["Completed (",y.filter(e=>e.status==="completed"||e.completed).length,")"]})]}),t.jsxs("div",{className:"flex border-b border-gray-200 mb-4",children:[t.jsx("button",{onClick:()=>{O("all"),localStorage.setItem("taskModeFilter","all")},className:`px-4 py-2 font-medium text-sm ${h==="all"?"border-b-2 border-green-600 text-green-600":"text-gray-600 hover:text-gray-900"}`,children:"All Modes"}),t.jsx("button",{onClick:()=>{O("personal"),localStorage.setItem("taskModeFilter","personal")},className:`px-4 py-2 font-medium text-sm ${h==="personal"?"border-b-2 border-green-600 text-green-600":"text-gray-600 hover:text-gray-900"}`,children:"ðŸ  Personal"}),t.jsx("button",{onClick:()=>{O("professional"),localStorage.setItem("taskModeFilter","professional")},className:`px-4 py-2 font-medium text-sm ${h==="professional"?"border-b-2 border-green-600 text-green-600":"text-gray-600 hover:text-gray-900"}`,children:"ðŸ’¼ Professional"})]}),h!=="all"&&Y.length>0&&t.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[t.jsxs("button",{onClick:()=>W(!L),className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:[t.jsx("span",{children:"ðŸ“"}),t.jsx("span",{className:"font-medium",children:b?Y.find(e=>e.id===b)?.name||"Project":"All Projects"}),t.jsx("svg",{className:`w-4 h-4 transition-transform ${L?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),b&&t.jsx("button",{onClick:()=>C(void 0),className:"text-xs text-gray-500 hover:text-gray-700",children:"Clear filter"})]}),L&&h!=="all"&&t.jsx("div",{className:"mt-2 p-3 bg-gray-50 rounded-lg border border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("button",{onClick:()=>{C(void 0),W(!1)},className:`p-2 text-left text-sm rounded-md transition-colors ${b?"hover:bg-gray-100 text-gray-700":"bg-blue-100 text-blue-700 font-medium"}`,children:"ðŸ“‹ All Projects"}),Y.map(e=>t.jsxs("button",{onClick:()=>{C(e.id),W(!1)},className:`p-2 text-left text-sm rounded-md transition-colors flex items-center gap-2 ${b===e.id?"bg-blue-100 text-blue-700 font-medium":"hover:bg-gray-100 text-gray-700"}`,children:[t.jsx("span",{style:{color:e.color},children:e.icon}),t.jsx("span",{className:"truncate",children:e.name}),t.jsx("span",{className:"ml-auto text-xs text-gray-400",children:e.taskCount})]},e.id))]})}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:flex-wrap items-stretch sm:items-center gap-3 sm:gap-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 w-full sm:w-auto",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Date:"}),t.jsxs("select",{value:p,onChange:e=>K(e.target.value),className:"w-full sm:w-auto px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"all",children:"All Dates"}),t.jsx("option",{value:"today",children:"Today"}),t.jsx("option",{value:"thisWeek",children:"This Week"}),t.jsx("option",{value:"thisMonth",children:"This Month"}),t.jsx("option",{value:"custom",children:"Custom Range"})]})]}),p==="custom"&&t.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 w-full sm:w-auto",children:[t.jsx("input",{type:"date",value:q,onChange:e=>oe(e.target.value),placeholder:"Start Date",className:"w-full sm:w-auto px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),t.jsx("span",{className:"text-gray-500 text-center sm:text-left",children:"to"}),t.jsx("input",{type:"date",value:I,onChange:e=>ie(e.target.value),placeholder:"End Date",className:"w-full sm:w-auto px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 w-full sm:w-auto sm:ml-auto",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Sort by:"}),t.jsxs("select",{value:J,onChange:e=>ne(e.target.value),className:"w-full sm:w-auto px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"priority",children:"Priority (High to Low)"}),t.jsx("option",{value:"date",children:"Date (Earliest First)"}),t.jsx("option",{value:"time",children:"Date & Time"}),t.jsx("option",{value:"deadline",children:"Deadline (Nearest First)"})]})]})]})]}),ae?t.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading tasks..."}):y.length===0?t.jsx("div",{className:"p-8 text-center text-gray-500",children:'No tasks yet. Click "Add New Task" to create one!'}):B.length===0?t.jsx("div",{className:"p-8 text-center text-gray-500",children:"No tasks match the selected filter."}):t.jsx("div",{className:"divide-y divide-gray-200",children:B.map(e=>t.jsxs("div",{className:"p-3 sm:p-4 hover:bg-gray-50 flex flex-col sm:flex-row items-start gap-3",children:[t.jsxs("div",{className:"flex items-start gap-3 w-full",children:[t.jsx("input",{type:"checkbox",checked:e.status==="completed",onChange:()=>pe(e),className:"mt-1 h-5 w-5 min-w-[20px] text-blue-600 rounded focus:ring-blue-500 cursor-pointer"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-1",children:[t.jsx("h3",{className:`text-sm sm:text-base font-medium break-words ${e.status==="completed"?"line-through text-gray-400":"text-gray-900"}`,children:e.title}),t.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded whitespace-nowrap ${fe(e.priority)}`,children:e.priority}),e.isRepeating&&t.jsxs("span",{className:"px-2 py-0.5 text-xs font-medium rounded bg-purple-100 text-purple-800 whitespace-nowrap",children:["ðŸ”„ ",e.repeatFrequency]}),h==="all"&&t.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded whitespace-nowrap ${(e.mode||"personal")==="personal"?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800"}`,children:(e.mode||"personal")==="personal"?"ðŸ  Personal":"ðŸ’¼ Professional"})]}),e.description&&t.jsx("p",{className:`text-xs sm:text-sm mb-1 break-words ${e.status==="completed"?"text-gray-400":"text-gray-600"}`,children:e.description}),t.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3 text-xs text-gray-500 mb-1",children:[e.startDate&&t.jsxs("span",{className:"whitespace-nowrap",children:["ðŸ“… ",he(e.startDate,e.startTime)]}),e.isRepeating&&e.repeatEndDate&&t.jsxs("span",{className:"whitespace-nowrap",children:["ðŸ”š Until: ",new Date(e.repeatEndDate).toLocaleDateString()]})]}),e.tags&&e.tags.length>0&&t.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.tags.map((r,l)=>t.jsxs("span",{className:"px-2 py-0.5 text-xs bg-indigo-100 text-indigo-800 rounded whitespace-nowrap",children:["#",r]},l))})]})]}),t.jsxs("div",{className:"flex sm:flex-col gap-2 w-full sm:w-auto ml-8 sm:ml-0",children:[t.jsx("button",{onClick:()=>ue(e),className:"flex-1 sm:flex-none px-3 py-1.5 sm:py-1 text-xs bg-gray-600 text-white rounded hover:bg-gray-700 whitespace-nowrap min-h-[44px] sm:min-h-0",children:"Edit"}),t.jsx("button",{onClick:()=>ge(e.id),className:"flex-1 sm:flex-none px-3 py-1.5 sm:py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700 whitespace-nowrap min-h-[44px] sm:min-h-0",children:"Delete"})]})]},e.id))})]})]}),U.show&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>F({show:!1,taskId:null}),children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6",onClick:e=>e.stopPropagation(),children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Delete Task"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this task? This action cannot be undone."}),t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>F({show:!1,taskId:null}),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 font-medium",children:"Cancel"}),t.jsx("button",{onClick:xe,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 font-medium",children:"Delete"})]})]})}),!G&&!N&&t.jsx("button",{onClick:()=>M(!0),className:"fixed bottom-8 right-8 w-14 h-14 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 hover:shadow-xl transition-all duration-200 flex items-center justify-center z-50",title:"Quick Add Task",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),t.jsx(ve,{isOpen:G,onSubmit:ce,onCancel:()=>M(!1)})]})}export{Ae as default};
//# sourceMappingURL=Tasks-CgT64Hqw.js.map
