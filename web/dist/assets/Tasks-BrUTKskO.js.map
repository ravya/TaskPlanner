{"version":3,"file":"Tasks-BrUTKskO.js","sources":["../../src/pages/Tasks.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { getAuth } from 'firebase/auth';\nimport {\n  getFirestore,\n  collection,\n  doc,\n  deleteDoc,\n  query,\n  where,\n  Timestamp,\n  deleteField,\n  addDoc,\n  getDocs,\n  updateDoc\n} from 'firebase/firestore';\nimport { useSearchParams } from 'react-router-dom';\nimport { format, isYesterday } from 'date-fns';\nimport { clsx } from 'clsx';\nimport AddTaskInline from '../components/AddTaskInline';\n\ntype DateFilter = 'all' | 'today' | 'thisWeek' | 'thisMonth' | 'custom' | 'upcoming' | 'recurring' | 'completed' | 'trash';\ninterface Task {\n  id: string;\n  title: string;\n  description: string;\n  startDate: string;\n  startTime?: string;\n  status: 'todo' | 'in_progress' | 'completed';\n  priority: 'low' | 'medium' | 'high';\n  tags: string[];\n  isRepeating: boolean;\n  repeatFrequency?: 'daily' | 'weekly' | 'monthly';\n  repeatEndDate?: string;\n  userId: string;\n  createdAt: any;\n  completed?: boolean;\n  deletedOccurrences?: string[]; // Array of YYYY-MM-DD dates that were explicitly deleted\n  isDeleted?: boolean; // Soft delete flag for parent recurring tasks\n  mode?: 'personal' | 'professional'; // Task mode\n  completedAt?: any;\n}\n\nexport default function Tasks() {\n  const [searchParams] = useSearchParams();\n  const [tasks, setTasks] = useState<Task[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [showQuickAdd, setShowQuickAdd] = useState(false);\n  const [editingTask, setEditingTask] = useState<Task | null>(null);\n  const [user, setUser] = useState<any>(null);\n  const [statusFilter] = useState<'all' | 'active' | 'completed'>('all');\n  const [dateFilter, setDateFilter] = useState<DateFilter>(\n    (searchParams.get('filter') as DateFilter) || 'all'\n  );\n  const [customDateStart, setCustomDateStart] = useState('');\n  const [customDateEnd, setCustomDateEnd] = useState('');\n  const [modeFilter, setModeFilter] = useState<'all' | 'personal' | 'professional'>(\n    () => {\n      return (localStorage.getItem('taskModeFilter') as any) || 'all';\n    });\n\n  // Project state - keep selectedProjectId for task filtering\n  const [selectedProjectId, setSelectedProjectId] = useState<string | undefined>(undefined);\n\n  useEffect(() => {\n    const filterParam = searchParams.get('filter');\n    if (filterParam && ['all', 'today', 'thisWeek', 'thisMonth', 'custom', 'upcoming', 'recurring', 'completed', 'trash'].includes(filterParam)) {\n      setDateFilter(filterParam as any);\n    }\n  }, [searchParams]);\n\n\n  useEffect(() => {\n    const auth = getAuth();\n    const currentUser = auth.currentUser;\n    setUser(currentUser);\n\n    if (currentUser) {\n      loadTasks(currentUser.uid);\n    }\n  }, []);\n\n  // Reset project selection when mode changes to 'all'\n  useEffect(() => {\n    if (modeFilter === 'all') {\n      setSelectedProjectId(undefined);\n    }\n  }, [modeFilter]);\n\n  const loadTasks = async (userId: string) => {\n    setLoading(true);\n    try {\n      const db = getFirestore();\n      const tasksRef = collection(db, 'tasks');\n      const q = query(tasksRef, where('userId', '==', userId));\n      const querySnapshot = await getDocs(q);\n\n      const today = format(new Date(), 'yyyy-MM-dd');\n\n      const loadedTasks: Task[] = [];\n      querySnapshot.forEach((doc) => {\n        const task = { id: doc.id, ...doc.data() } as Task;\n\n        // Only skip if it's recurring and past incomplete (per requirements)\n        // But keep deleted tasks so they can be shown in Trash\n        if (task.isRepeating && task.status !== 'completed' && !task.completed) {\n          const taskDate = task.startDate?.split('T')[0];\n          if (taskDate && taskDate < today) {\n            return; // Skip past incomplete recurring tasks\n          }\n        }\n\n        loadedTasks.push(task);\n      });\n\n      setTasks(loadedTasks);\n    } catch (error) {\n      console.error('Error loading tasks:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Handle edit param from URL (e.g. from Dashboard)\n  useEffect(() => {\n    const editId = searchParams.get('edit');\n    if (editId && tasks.length > 0) {\n      const taskToEdit = tasks.find(t => t.id === editId);\n      if (taskToEdit) {\n        handleEditTask(taskToEdit);\n        // Clear param without reload\n        window.history.replaceState({}, '', window.location.pathname + (window.location.search.replace(/edit=[^&]*&?/, '').replace(/\\?$/, '')));\n      }\n    }\n  }, [searchParams, tasks]);\n\n  const handleAddTask = async (taskData: any) => {\n    if (!user) {\n      alert('You must be logged in to create a task');\n      return;\n    }\n\n    try {\n      const db = getFirestore();\n\n      const firestoreData = {\n        ...taskData,\n        userId: user.uid,\n        createdAt: Timestamp.now(),\n        status: editingTask ? editingTask.status : 'todo',\n        subtasks: taskData.subtasks || null,\n        projectId: taskData.projectId || selectedProjectId || null,\n        deadlineDate: taskData.deadlineDate || null\n      };\n\n      if (editingTask) {\n        const taskRef = doc(db, 'tasks', editingTask.id);\n        await updateDoc(taskRef, firestoreData);\n      } else {\n        await addDoc(collection(db, 'tasks'), firestoreData);\n      }\n\n      setShowAddForm(false);\n      setEditingTask(null);\n      await loadTasks(user.uid);\n    } catch (error: any) {\n      console.error('Error saving task:', error);\n      alert(`Failed to save task: ${error.message}`);\n    }\n  };\n\n\n  const handleEditTask = (task: Task) => {\n    setEditingTask(task);\n    setShowAddForm(true);\n  };\n\n  const getNextOccurrenceDate = (currentDate: string, frequency: 'daily' | 'weekly' | 'monthly'): string => {\n    const date = new Date(currentDate);\n    switch (frequency) {\n      case 'daily':\n        date.setDate(date.getDate() + 1);\n        break;\n      case 'weekly':\n        date.setDate(date.getDate() + 7);\n        break;\n      case 'monthly':\n        date.setMonth(date.getMonth() + 1);\n        break;\n    }\n    return date.toISOString().split('T')[0];\n  };\n\n  const shouldCreateNextOccurrence = (task: Task): boolean => {\n    if (!task.isRepeating || !task.repeatFrequency) return false;\n    if (task.repeatEndDate) {\n      const endDate = new Date(task.repeatEndDate);\n      const nextDate = new Date(getNextOccurrenceDate(task.startDate, task.repeatFrequency));\n      return nextDate <= endDate;\n    }\n    return true; // No end date, repeat indefinitely\n  };\n\n  const handleToggleComplete = async (task: Task) => {\n    try {\n      const db = getFirestore();\n      const taskRef = doc(db, 'tasks', task.id);\n      const newStatus = task.status === 'completed' ? 'todo' : 'completed';\n\n      await updateDoc(taskRef, {\n        status: newStatus,\n        completed: newStatus === 'completed',\n        completedAt: newStatus === 'completed' ? new Date() : null,\n        updatedAt: new Date()\n      });\n\n      // If task is being marked as complete and is repeating, create next occurrence\n      if (newStatus === 'completed' && shouldCreateNextOccurrence(task)) {\n        const nextDate = getNextOccurrenceDate(task.startDate, task.repeatFrequency!);\n        const today = format(new Date(), 'yyyy-MM-dd');\n\n        // Only create if next occurrence is in the future or today\n        if (nextDate >= today) {\n          const nextTaskData = {\n            title: task.title,\n            description: task.description,\n            startDate: nextDate,\n            startTime: task.startTime || null,\n            status: 'todo',\n            priority: task.priority,\n            tags: task.tags || [],\n            isRepeating: task.isRepeating,\n            repeatFrequency: task.repeatFrequency,\n            repeatEndDate: task.repeatEndDate || null,\n            userId: task.userId,\n            createdAt: Timestamp.now(),\n            completed: false\n          };\n\n          await addDoc(collection(db, 'tasks'), nextTaskData);\n        }\n      }\n\n      if (user) {\n        loadTasks(user.uid);\n      }\n    } catch (error) {\n      console.error('Error toggling task:', error);\n      alert('Failed to update task');\n    }\n  };\n\n\n  const [deleteConfirmation, setDeleteConfirmation] = useState<{ show: boolean; taskId: string | null }>({\n    show: false,\n    taskId: null\n  });\n\n  // ... (existing useEffect)\n\n  // ... (existing loadTasks)\n\n  // ... (existing handleAddTask)\n\n  // ... (existing handleEditTask)\n\n  // ... (existing getNextOccurrenceDate)\n\n  // ... (existing shouldCreateNextOccurrence)\n\n  // ... (existing handleToggleComplete)\n\n  const confirmDeleteTask = (taskId: string) => {\n    setDeleteConfirmation({ show: true, taskId });\n  };\n\n  const handleDeleteTask = async () => {\n    if (!deleteConfirmation.taskId) return;\n\n    const taskId = deleteConfirmation.taskId;\n    const taskToDelete = tasks.find(t => t.id === taskId);\n    setDeleteConfirmation({ show: false, taskId: null });\n\n    try {\n      const db = getFirestore();\n\n      if (taskToDelete?.isRepeating && taskToDelete.startDate) {\n        // Find all occurrences of this recurring task\n        const allOccurrences = tasks\n          .filter(t =>\n            t.isRepeating &&\n            t.title === taskToDelete.title &&\n            t.repeatFrequency === taskToDelete.repeatFrequency &&\n            t.userId === taskToDelete.userId\n          )\n          .sort((a, b) => a.startDate.localeCompare(b.startDate));\n\n        const parentTask = allOccurrences[0];\n        const isParentTask = parentTask.id === taskId;\n        const occurrenceDate = taskToDelete.startDate.split('T')[0];\n\n        if (isParentTask) {\n          // Soft delete the parent task - keep it in DB but mark as deleted\n          const parentRef = doc(db, 'tasks', taskId);\n          const deletedOccurrences = parentTask.deletedOccurrences || [];\n\n          await updateDoc(parentRef, {\n            isDeleted: true,\n            deletedOccurrences: [...deletedOccurrences, occurrenceDate]\n          });\n        } else {\n          // Update parent's deletedOccurrences and hard delete this occurrence\n          const parentRef = doc(db, 'tasks', parentTask.id);\n          const deletedOccurrences = parentTask.deletedOccurrences || [];\n\n          if (!deletedOccurrences.includes(occurrenceDate)) {\n            await updateDoc(parentRef, {\n              deletedOccurrences: [...deletedOccurrences, occurrenceDate]\n            });\n          }\n\n          // Hard delete the occurrence\n          const taskRef = doc(db, 'tasks', taskId);\n          await deleteDoc(taskRef);\n        }\n      } else {\n        // Mark as deleted (soft delete)\n        const taskRef = doc(db, 'tasks', taskId);\n        await updateDoc(taskRef, {\n          isDeleted: true,\n          deletedAt: Timestamp.now()\n        });\n      }\n\n      // Reload tasks\n      if (user) {\n        loadTasks(user.uid);\n      }\n    } catch (error) {\n      console.error('Error deleting task:', error);\n      alert('Failed to delete task');\n    }\n  };\n\n  const handleRestoreTask = async (taskId: string) => {\n    try {\n      const db = getFirestore();\n      const taskRef = doc(db, 'tasks', taskId);\n\n      await updateDoc(taskRef, {\n        isDeleted: false,\n        deletedAt: deleteField()\n      });\n\n      if (user) loadTasks(user.uid);\n    } catch (error) {\n      console.error('Error restoring task:', error);\n      alert('Failed to restore task');\n    }\n  };\n\n  const handlePermanentDelete = async (taskId: string) => {\n    if (!window.confirm('Are you sure you want to delete this task forever?')) return;\n\n    try {\n      const db = getFirestore();\n      const taskRef = doc(db, 'tasks', taskId);\n\n      await deleteDoc(taskRef);\n\n      if (user) loadTasks(user.uid);\n    } catch (error) {\n      console.error('Error deleting task permanently:', error);\n      alert('Failed to delete task permanently');\n    }\n  };\n\n  const formatDateTime = (date: string, time?: string) => {\n    if (!date) return '';\n    const dateObj = new Date(date);\n    const dateStr = dateObj.toLocaleDateString();\n    if (time) {\n      return `${dateStr} ${time}`;\n    }\n    return dateStr;\n  };\n\n  const TaskItem = ({ task }: { task: Task }) => {\n    const isTodayTask = task.startDate ? task.startDate.split('T')[0] === format(new Date(), 'yyyy-MM-dd') : false;\n\n    return (\n      <div className=\"py-1.5 hover:bg-gray-50 flex flex-col sm:flex-row items-center gap-3 w-full group transition-colors px-4 border-b border-gray-50 last:border-0 min-h-[48px]\">\n        <div className=\"flex items-center gap-3 w-full\">\n          {task.status === 'completed' ? (\n            <div className=\"h-4 w-4 min-w-[16px] flex items-center justify-center text-green-500 bg-green-50 rounded-full\">\n              <svg className=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M5 13l4 4L19 7\" />\n              </svg>\n            </div>\n          ) : (\n            <input\n              type=\"checkbox\"\n              checked={false}\n              onChange={() => handleToggleComplete(task)}\n              className=\"h-4 w-4 min-w-[16px] text-blue-600 rounded focus:ring-blue-500 cursor-pointer\"\n            />\n          )}\n\n          {/* Mode Badge - Left of Title */}\n          <span className={clsx(\n            \"px-1.5 py-0.5 text-[9px] font-bold uppercase rounded border shrink-0\",\n            (task.mode || 'personal') === 'personal'\n              ? 'border-blue-200 text-blue-600 bg-blue-50/30'\n              : 'border-orange-200 text-orange-600 bg-orange-50/30'\n          )}>\n            {(task.mode || 'personal') === 'personal' ? 'P' : 'W'}\n          </span>\n\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"flex items-center gap-3\">\n              <h3 className={clsx(\n                \"text-sm sm:text-base font-medium break-words truncate\",\n                task.status === 'completed' ? \"text-gray-400 line-through\" : \"text-gray-900\"\n              )}>\n                {task.title}\n              </h3>\n\n              {/* Tags - Immediately after Title */}\n              {task.tags && task.tags.length > 0 && (\n                <div className=\"flex items-center gap-1 shrink-0\">\n                  {task.tags.map((tag, index) => (\n                    <span key={index} className=\"px-1.5 py-0.25 border border-blue-200 text-blue-500 text-[9px] rounded-full font-medium whitespace-nowrap bg-blue-50/10\">\n                      {tag}\n                    </span>\n                  ))}\n                </div>\n              )}\n\n              {task.isRepeating && (\n                <span className=\"text-gray-400 shrink-0\" title={`Repeats ${task.repeatFrequency}`}>\n                  <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\n                  </svg>\n                </span>\n              )}\n\n              {task.status === 'completed' && task.completedAt && (\n                <span className=\"flex items-center gap-1.5 px-2 py-0.5 bg-gray-50 border border-gray-100 rounded text-[10px] sm:text-xs text-gray-400 font-medium ml-2\">\n                  <svg className=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                  </svg>\n                  {format(task.completedAt instanceof Date ? task.completedAt : (task.completedAt as any).toDate ? (task.completedAt as any).toDate() : new Date(task.completedAt), 'MMM d')}\n                </span>\n              )}\n            </div>\n\n            {(task.description || (task.startDate && task.status !== 'completed' && !isTodayTask)) && (\n              <div className=\"flex flex-wrap items-center gap-x-3 gap-y-1 mt-0.5\">\n                {task.description && (\n                  <p className=\"text-xs text-gray-500 line-clamp-1 max-w-sm\">\n                    {task.description}\n                  </p>\n                )}\n                {task.startDate && task.status !== 'completed' && !isTodayTask && (\n                  <span className=\"text-[10px] sm:text-xs text-gray-400 whitespace-nowrap\">\n                    {formatDateTime(task.startDate, task.startTime)}\n                  </span>\n                )}\n                {isTodayTask && task.startTime && (\n                  <span className=\"text-[10px] sm:text-xs text-blue-500 font-medium whitespace-nowrap\">\n                    {task.startTime}\n                  </span>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Action buttons - always visible in trash, hover otherwise */}\n        <div className={clsx(\n          \"flex items-center gap-2 transition-opacity ml-auto\",\n          dateFilter !== 'trash' && \"sm:opacity-0 group-hover:opacity-100\"\n        )}>\n          {dateFilter === 'trash' ? (\n            <>\n              <button\n                onClick={() => handleRestoreTask(task.id)}\n                className=\"p-1.5 text-green-600 hover:bg-green-50 rounded\"\n                title=\"Restore\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\n                </svg>\n              </button>\n              <button\n                onClick={() => handlePermanentDelete(task.id)}\n                className=\"p-1.5 text-red-600 hover:bg-red-50 rounded\"\n                title=\"Delete Permanently\"\n              >\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                </svg>\n              </button>\n            </>\n          ) : (\n            <>\n              <button\n                onClick={() => handleEditTask(task)}\n                className=\"p-1.5 text-blue-600 hover:bg-blue-50 rounded\"\n                title=\"Edit\"\n              >\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\n                </svg>\n              </button>\n              <button\n                onClick={() => confirmDeleteTask(task.id)}\n                className=\"p-1.5 text-red-600 hover:bg-red-50 rounded\"\n                title=\"Delete\"\n              >\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 2 0 00-1 1v3M4 7h16\" />\n                </svg>\n              </button>\n            </>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n\n\n  const getFilteredAndSortedTasks = (): Task[] => {\n    // First, filter by status\n    let filteredTasks = [...tasks];\n\n    if (dateFilter === 'trash') {\n      filteredTasks = filteredTasks.filter(t => t.isDeleted === true);\n    } else if (dateFilter === 'recurring') {\n      filteredTasks = filteredTasks.filter(t => t.isRepeating === true && !t.isDeleted);\n    } else if (statusFilter === 'active' || dateFilter === 'today' || dateFilter === 'thisWeek' || dateFilter === 'upcoming') {\n      filteredTasks = filteredTasks.filter(t => t.status !== 'completed' && !t.completed && !t.isDeleted);\n    } else if (statusFilter === 'completed' || dateFilter === 'completed') {\n      filteredTasks = filteredTasks.filter(t => (t.status === 'completed' || t.completed) && !t.isDeleted);\n    } else {\n      // Default: hide deleted\n      filteredTasks = filteredTasks.filter(t => !t.isDeleted);\n    }\n\n    // Filter by mode\n    if (modeFilter !== 'all') {\n      filteredTasks = filteredTasks.filter(task => {\n        const taskMode = task.mode || 'personal'; // default to personal for backward compatibility\n        return taskMode === modeFilter;\n      });\n    }\n\n    // Filter by project\n    if (selectedProjectId) {\n      filteredTasks = filteredTasks.filter(task =>\n        (task as any).projectId === selectedProjectId\n      );\n    }\n\n    // Filter by date\n    if (dateFilter !== 'all') {\n      const today = format(new Date(), 'yyyy-MM-dd');\n\n      filteredTasks = filteredTasks.filter(task => {\n        if (!task.startDate) return false;\n        const taskDate = task.startDate.split('T')[0];\n\n        if (dateFilter === 'today') {\n          return taskDate === today;\n        } else if (dateFilter === 'thisWeek') {\n          const taskDateObj = new Date(taskDate);\n          const todayObj = new Date(today);\n          const firstDayOfWeek = new Date(todayObj);\n          firstDayOfWeek.setDate(todayObj.getDate() - todayObj.getDay()); // Sunday\n          const lastDayOfWeek = new Date(todayObj);\n          lastDayOfWeek.setDate(todayObj.getDate() + (6 - todayObj.getDay())); // Saturday\n          return taskDateObj >= firstDayOfWeek && taskDateObj <= lastDayOfWeek;\n        } else if (dateFilter === 'thisMonth') {\n          const taskDateObj = new Date(taskDate);\n          const todayObj = new Date(today);\n          return taskDateObj.getMonth() === todayObj.getMonth() && taskDateObj.getFullYear() === todayObj.getFullYear();\n        } else if (dateFilter === 'upcoming') {\n          // Show all future tasks EXCLUDING today\n          return taskDate > today;\n        }\n        else if (dateFilter === 'recurring') {\n          if (customDateStart && taskDate < customDateStart) return false;\n          if (customDateEnd && taskDate > customDateEnd) return false;\n          return true;\n        }\n        return true;\n      });\n    }\n\n    // Separate completed and active tasks\n    const completedTasks = filteredTasks.filter(t => t.status === 'completed' || t.completed);\n    const activeTasks = filteredTasks.filter(t => t.status !== 'completed' && !t.completed);\n\n    // Sort active tasks by time (which includes date)\n    const sortedActiveTasks = activeTasks.sort((a, b) => {\n      if (!a.startDate && !b.startDate) return 0;\n      if (!a.startDate) return 1;\n      if (!b.startDate) return -1;\n\n      const dateCompare = a.startDate.localeCompare(b.startDate);\n      if (dateCompare !== 0) return dateCompare;\n\n      // If same date, sort by time\n      const timeA = a.startTime || '23:59';\n      const timeB = b.startTime || '23:59';\n      return timeA.localeCompare(timeB);\n    });\n\n    // Sort completed tasks by completion date (most recent first) or by same criteria\n    const sortedCompletedTasks = completedTasks.sort((a, b) => {\n      // If both have completion dates, sort by most recent\n      const aCompleted = (a as any).completedAt;\n      const bCompleted = (b as any).completedAt;\n\n      if (aCompleted && bCompleted) {\n        return new Date(bCompleted).getTime() - new Date(aCompleted).getTime();\n      }\n\n      // Otherwise keep current order\n      return 0;\n    });\n\n    // Return active tasks first, then completed tasks\n    return [...sortedActiveTasks, ...sortedCompletedTasks];\n  };\n\n  const sortedTasks = getFilteredAndSortedTasks();\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-4 sm:py-8\">\n\n        {/* Tasks List */}\n        <div className=\"bg-white rounded-lg shadow\">\n          <div className=\"p-4 sm:p-6 border-b border-gray-200\">\n            <h2 className=\"text-xl font-semibold mb-3 flex items-center gap-2\">\n              {dateFilter === 'today' ? (\n                <>\n                  <svg className=\"w-6 h-6 text-amber-500\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\n                  </svg>\n                  Today\n                </>\n              ) : dateFilter === 'completed' ? (\n                <>\n                  <svg className=\"w-6 h-6 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                  </svg>\n                  Completed\n                </>\n              ) : dateFilter === 'recurring' ? (\n                <>\n                  <svg className=\"w-6 h-6 text-purple-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\n                  </svg>\n                  Recurring\n                </>\n              ) : dateFilter === 'trash' ? (\n                <>\n                  <svg className=\"w-6 h-6 text-gray-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 2 0 00-1 1v3M4 7h16\" />\n                  </svg>\n                  Trash\n                </>\n              ) : (\n                <>\n                  <svg className=\"w-6 h-6 text-blue-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" />\n                  </svg>\n                  Upcoming ({sortedTasks.length})\n                </>\n              )}\n            </h2>\n\n            <div className=\"flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-4 mt-6\">\n              <div className=\"flex flex-col sm:flex-row items-stretch sm:items-center gap-4 flex-1\">\n                {(['all', 'personal', 'professional'] as const).map((mode) => (\n                  <button\n                    key={mode}\n                    onClick={() => {\n                      setModeFilter(mode);\n                      localStorage.setItem('taskModeFilter', mode);\n                    }}\n                    className={clsx(\n                      'px-4 py-1.5 text-xs font-semibold rounded-md transition-all whitespace-nowrap',\n                      modeFilter === mode\n                        ? 'bg-blue-50 text-blue-600 shadow-sm'\n                        : 'text-gray-500 hover:text-gray-700'\n                    )}\n                  >\n                    {mode === 'professional' ? 'Work' : mode.charAt(0).toUpperCase() + mode.slice(1)}\n                  </button>\n                ))}\n\n                {dateFilter === 'custom' && (\n                  <div className=\"flex items-center gap-2\">\n                    <input\n                      type=\"date\"\n                      value={customDateStart}\n                      onChange={(e) => setCustomDateStart(e.target.value)}\n                      className=\"px-3 py-1.5 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    />\n                    <span className=\"text-gray-500\">to</span>\n                    <input\n                      type=\"date\"\n                      value={customDateEnd}\n                      onChange={(e) => setCustomDateEnd(e.target.value)}\n                      className=\"px-3 py-1.5 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    />\n                  </div>\n                )}\n              </div>\n\n            </div>\n          </div>\n\n          <div className=\"divide-y divide-gray-100\">\n            {loading ? (\n              <div className=\"p-8 text-center text-gray-500\">Loading tasks...</div>\n            ) : dateFilter === 'upcoming' ? (\n              /* Vertical Calendar Layout for Upcoming View */\n              <div className=\"divide-y divide-gray-100\">\n                {(() => {\n                  const days = Array.from({ length: 7 }).map((_, i) => {\n                    const d = new Date();\n                    d.setDate(d.getDate() + i);\n                    return d.toISOString().split('T')[0];\n                  });\n\n                  const todayStr = format(new Date(), 'yyyy-MM-dd');\n\n                  return days.map((dateStr) => {\n                    const dateObj = new Date(dateStr);\n                    const dayNum = dateObj.getDate();\n                    const isToday = dateStr === todayStr;\n                    const dayName = isToday ? 'Today' : dateObj.toLocaleDateString(undefined, { weekday: 'long' });\n                    const tasksForDay = sortedTasks.filter(t => t.startDate?.split('T')[0] === dateStr);\n\n                    return (\n                      <div key={dateStr} className=\"py-4\">\n                        <div className=\"flex items-baseline gap-3 px-4 mb-3\">\n                          <span className=\"text-3xl font-bold text-gray-900\">{dayNum}</span>\n                          <div className=\"flex flex-col\">\n                            <span className=\"text-sm font-medium text-gray-500\">{dayName}</span>\n                            <span className=\"text-xs text-gray-400\">{dateObj.toLocaleDateString(undefined, { month: 'short', year: 'numeric' })}</span>\n                          </div>\n                        </div>\n                        <div className=\"divide-y divide-gray-50\">\n                          {tasksForDay.map(task => (\n                            <TaskItem key={task.id} task={task} />\n                          ))}\n                        </div>\n                      </div>\n                    );\n                  });\n                })()}\n              </div>\n            ) : dateFilter === 'completed' ? (\n              /* Logbook Layout for Completed View */\n              <div className=\"divide-y divide-gray-100\">\n                {(() => {\n                  const groups: { [key: string]: Task[] } = {};\n                  const today = new Date();\n                  const todayStr = format(today, 'yyyy-MM-dd');\n\n                  sortedTasks.forEach(task => {\n                    let dateStr = todayStr;\n                    if (task.completedAt) {\n                      const completedDate = (task.completedAt as any).toDate ? (task.completedAt as any).toDate() : new Date(task.completedAt as any);\n                      dateStr = format(completedDate, 'yyyy-MM-dd');\n                    } else if (task.startDate) {\n                      dateStr = task.startDate.split('T')[0];\n                    }\n\n                    let groupLabel = '';\n                    const d = new Date(dateStr + 'T00:00:00');\n\n                    if (dateStr === todayStr) {\n                      groupLabel = 'Today';\n                    } else if (isYesterday(d)) {\n                      groupLabel = 'Yesterday';\n                    } else {\n                      groupLabel = format(d, 'MMMM yyyy');\n                    }\n\n                    if (!groups[groupLabel]) groups[groupLabel] = [];\n                    groups[groupLabel].push(task);\n                  });\n\n                  const order = ['Today', 'Yesterday'];\n\n                  return Object.entries(groups)\n                    .sort(([a], [b]) => {\n                      const idxA = order.indexOf(a);\n                      const idxB = order.indexOf(b);\n                      if (idxA !== -1 && idxB !== -1) return idxA - idxB;\n                      if (idxA !== -1) return -1;\n                      if (idxB !== -1) return 1;\n                      return b.localeCompare(a);\n                    })\n                    .map(([label, tasks]) => (\n                      <div key={label} className=\"py-2 sm:py-4\">\n                        <h3 className=\"px-4 text-lg font-bold text-gray-900 mb-2\">{label}</h3>\n                        <div className=\"divide-y divide-gray-50\">\n                          {tasks.map(task => (\n                            <TaskItem key={task.id} task={task} />\n                          ))}\n                        </div>\n                      </div>\n                    ));\n                })()}\n              </div>\n            ) : sortedTasks.length === 0 ? (\n              <div className=\"p-12 text-center text-gray-500\">\n                No tasks match the selected filter.\n              </div>\n            ) : (\n              <div className=\"divide-y divide-gray-100\">\n                {sortedTasks.map((task) => (\n                  <TaskItem key={task.id} task={task} />\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Delete Confirmation Modal */}\n      {deleteConfirmation.show && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\" onClick={() => setDeleteConfirmation({ show: false, taskId: null })}>\n          <div className=\"bg-white rounded-lg shadow-xl max-w-sm w-full p-6\" onClick={(e) => e.stopPropagation()}>\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Delete Task</h3>\n            <p className=\"text-gray-600 mb-6 font-medium\">\n              Are you sure you want to delete this task?\n            </p>\n            <div className=\"flex justify-end gap-3\">\n              <button\n                onClick={() => setDeleteConfirmation({ show: false, taskId: null })}\n                className=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 font-medium\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleDeleteTask}\n                className=\"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 font-medium\"\n              >\n                Delete\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Floating Add Button */}\n      {!showAddForm && !showQuickAdd && (\n        <button\n          onClick={() => setShowAddForm(true)}\n          className=\"fixed bottom-8 right-8 w-14 h-14 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 transition-all duration-200 flex items-center justify-center z-50\"\n        >\n          <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\n          </svg>\n        </button>\n      )}\n\n      {/* Add Task / Edit Task Overlay */}\n      {(showAddForm || showQuickAdd) && (\n        <AddTaskInline\n          isOpen={showAddForm || showQuickAdd}\n          onSubmit={handleAddTask}\n          onCancel={() => {\n            setShowAddForm(false);\n            setShowQuickAdd(false);\n            setEditingTask(null);\n          }}\n          editingTask={editingTask}\n          userId={user?.uid}\n          modeFilter={modeFilter === 'all' ? undefined : modeFilter}\n        />\n      )}\n    </div>\n  );\n};\n"],"names":["Tasks","searchParams","useSearchParams","tasks","setTasks","useState","loading","setLoading","showAddForm","setShowAddForm","showQuickAdd","setShowQuickAdd","editingTask","setEditingTask","user","setUser","statusFilter","dateFilter","setDateFilter","customDateStart","setCustomDateStart","customDateEnd","setCustomDateEnd","modeFilter","setModeFilter","selectedProjectId","setSelectedProjectId","useEffect","filterParam","currentUser","getAuth","loadTasks","userId","db","getFirestore","tasksRef","collection","q","query","where","querySnapshot","getDocs","today","format","loadedTasks","doc","task","taskDate","error","editId","taskToEdit","t","handleEditTask","handleAddTask","taskData","firestoreData","Timestamp","taskRef","updateDoc","addDoc","getNextOccurrenceDate","currentDate","frequency","date","shouldCreateNextOccurrence","endDate","handleToggleComplete","newStatus","nextDate","nextTaskData","deleteConfirmation","setDeleteConfirmation","confirmDeleteTask","taskId","handleDeleteTask","taskToDelete","parentTask","a","b","isParentTask","occurrenceDate","parentRef","deletedOccurrences","deleteDoc","handleRestoreTask","deleteField","handlePermanentDelete","formatDateTime","time","dateStr","TaskItem","isTodayTask","jsxs","jsx","clsx","tag","index","Fragment","sortedTasks","filteredTasks","taskDateObj","todayObj","firstDayOfWeek","lastDayOfWeek","completedTasks","sortedActiveTasks","dateCompare","timeA","timeB","sortedCompletedTasks","aCompleted","bCompleted","mode","days","_","i","d","todayStr","dateObj","dayNum","dayName","tasksForDay","groups","completedDate","groupLabel","isYesterday","order","idxA","idxB","label","AddTaskInline"],"mappings":"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"}