import{j as d}from"./index-DfqPk0_m.js";import{r as i,R as Z,a as Ze}from"./router-BQwT71Ls.js";import{g as An,a as me,f as Nt,q as On,w as Ln,k as qt,T as Pn,j as zn,n as Qe,h as Ne,u as Et}from"./firebase-DswfmbOb.js";function Bn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.useMemo(()=>r=>{t.forEach(o=>o(r))},t)}const wt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ke(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Bt(e){return"nodeType"in e}function ee(e){var t,n;return e?Ke(e)?e:Bt(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Ft(e){const{Document:t}=ee(e);return e instanceof t}function at(e){return Ke(e)?!1:e instanceof ee(e).HTMLElement}function cn(e){return e instanceof ee(e).SVGElement}function qe(e){return e?Ke(e)?e.document:Bt(e)?Ft(e)?e:at(e)||cn(e)?e.ownerDocument:document:document:document}const ye=wt?i.useLayoutEffect:i.useEffect;function $t(e){const t=i.useRef(e);return ye(()=>{t.current=e}),i.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}function Fn(){const e=i.useRef(null),t=i.useCallback((r,o)=>{e.current=setInterval(r,o)},[]),n=i.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function rt(e,t){t===void 0&&(t=[e]);const n=i.useRef(e);return ye(()=>{n.current!==e&&(n.current=e)},t),n}function lt(e,t){const n=i.useRef();return i.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function vt(e){const t=$t(e),n=i.useRef(null),r=i.useCallback(o=>{o!==n.current&&t?.(o,n.current),n.current=o},[]);return[n,r]}function At(e){const t=i.useRef();return i.useEffect(()=>{t.current=e},[e]),t.current}let jt={};function ct(e,t){return i.useMemo(()=>{if(t)return t;const n=jt[e]==null?0:jt[e]+1;return jt[e]=n,e+"-"+n},[e,t])}function dn(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((s,a)=>{const l=Object.entries(a);for(const[u,h]of l){const f=s[u];f!=null&&(s[u]=f+e*h)}return s},{...t})}}const Ye=dn(1),ot=dn(-1);function $n(e){return"clientX"in e&&"clientY"in e}function Wt(e){if(!e)return!1;const{KeyboardEvent:t}=ee(e.target);return t&&e instanceof t}function Wn(e){if(!e)return!1;const{TouchEvent:t}=ee(e.target);return t&&e instanceof t}function Ot(e){if(Wn(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return $n(e)?{x:e.clientX,y:e.clientY}:null}const st=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[st.Translate.toString(e),st.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Vt="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Un(e){return e.matches(Vt)?e:e.querySelector(Vt)}const Xn={display:"none"};function Hn(e){let{id:t,value:n}=e;return Z.createElement("div",{id:t,style:Xn},n)}function Yn(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Z.createElement("div",{id:t,style:o,role:"status","aria-live":r,"aria-atomic":!0},n)}function Kn(){const[e,t]=i.useState("");return{announce:i.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const un=i.createContext(null);function qn(e){const t=i.useContext(un);i.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Vn(){const[e]=i.useState(()=>new Set),t=i.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[i.useCallback(r=>{let{type:o,event:s}=r;e.forEach(a=>{var l;return(l=a[o])==null?void 0:l.call(a,s)})},[e]),t]}const Gn={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},_n={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Jn(e){let{announcements:t=_n,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=Gn}=e;const{announce:s,announcement:a}=Kn(),l=ct("DndLiveRegion"),[u,h]=i.useState(!1);if(i.useEffect(()=>{h(!0)},[]),qn(i.useMemo(()=>({onDragStart(g){let{active:v}=g;s(t.onDragStart({active:v}))},onDragMove(g){let{active:v,over:b}=g;t.onDragMove&&s(t.onDragMove({active:v,over:b}))},onDragOver(g){let{active:v,over:b}=g;s(t.onDragOver({active:v,over:b}))},onDragEnd(g){let{active:v,over:b}=g;s(t.onDragEnd({active:v,over:b}))},onDragCancel(g){let{active:v,over:b}=g;s(t.onDragCancel({active:v,over:b}))}}),[s,t])),!u)return null;const f=Z.createElement(Z.Fragment,null,Z.createElement(Hn,{id:r,value:o.draggable}),Z.createElement(Yn,{id:l,announcement:a}));return n?Ze.createPortal(f,n):f}var X;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(X||(X={}));function xt(){}function Gt(e,t){return i.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Qn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const ge=Object.freeze({x:0,y:0});function fn(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function hn(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Zn(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function _t(e){let{left:t,top:n,height:r,width:o}=e;return[{x:t,y:n},{x:t+o,y:n},{x:t,y:n+r},{x:t+o,y:n+r}]}function gn(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Jt(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const er=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=Jt(t,t.left,t.top),s=[];for(const a of r){const{id:l}=a,u=n.get(l);if(u){const h=fn(Jt(u),o);s.push({id:l,data:{droppableContainer:a,value:h}})}}return s.sort(hn)},tr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=_t(t),s=[];for(const a of r){const{id:l}=a,u=n.get(l);if(u){const h=_t(u),f=o.reduce((v,b,T)=>v+fn(h[T],b),0),g=Number((f/4).toFixed(4));s.push({id:l,data:{droppableContainer:a,value:g}})}}return s.sort(hn)};function nr(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),a=o-r,l=s-n;if(r<o&&n<s){const u=t.width*t.height,h=e.width*e.height,f=a*l,g=f/(u+h-f);return Number(g.toFixed(4))}return 0}const rr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const s of r){const{id:a}=s,l=n.get(a);if(l){const u=nr(l,t);u>0&&o.push({id:a,data:{droppableContainer:s,value:u}})}}return o.sort(Zn)};function or(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function pn(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ge}function sr(e){return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return o.reduce((a,l)=>({...a,top:a.top+e*l.y,bottom:a.bottom+e*l.y,left:a.left+e*l.x,right:a.right+e*l.x}),{...n})}}const ir=sr(1);function ar(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function lr(e,t,n){const r=ar(t);if(!r)return e;const{scaleX:o,scaleY:s,x:a,y:l}=r,u=e.left-a-(1-o)*parseFloat(n),h=e.top-l-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),f=o?e.width/o:e.width,g=s?e.height/s:e.height;return{width:f,height:g,top:h,right:u+f,bottom:h+g,left:u}}const cr={ignoreTransform:!1};function Ve(e,t){t===void 0&&(t=cr);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:h,transformOrigin:f}=ee(e).getComputedStyle(e);h&&(n=lr(n,h,f))}const{top:r,left:o,width:s,height:a,bottom:l,right:u}=n;return{top:r,left:o,width:s,height:a,bottom:l,right:u}}function Qt(e){return Ve(e,{ignoreTransform:!0})}function dr(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function ur(e,t){return t===void 0&&(t=ee(e).getComputedStyle(e)),t.position==="fixed"}function fr(e,t){t===void 0&&(t=ee(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const s=t[o];return typeof s=="string"?n.test(s):!1})}function St(e,t){const n=[];function r(o){if(t!=null&&n.length>=t||!o)return n;if(Ft(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!at(o)||cn(o)||n.includes(o))return n;const s=ee(e).getComputedStyle(o);return o!==e&&fr(o,s)&&n.push(o),ur(o,s)?n:r(o.parentNode)}return e?r(e):n}function bn(e){const[t]=St(e,1);return t??null}function Tt(e){return!wt||!e?null:Ke(e)?e:Bt(e)?Ft(e)||e===qe(e).scrollingElement?window:at(e)?e:null:null}function vn(e){return Ke(e)?e.scrollX:e.scrollLeft}function xn(e){return Ke(e)?e.scrollY:e.scrollTop}function Lt(e){return{x:vn(e),y:xn(e)}}var K;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(K||(K={}));function mn(e){return!wt||!e?!1:e===document.scrollingElement}function yn(e){const t={x:0,y:0},n=mn(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},o=e.scrollTop<=t.y,s=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:o,isLeft:s,isBottom:a,isRight:l,maxScroll:r,minScroll:t}}const hr={x:.2,y:.2};function gr(e,t,n,r,o){let{top:s,left:a,right:l,bottom:u}=n;r===void 0&&(r=10),o===void 0&&(o=hr);const{isTop:h,isBottom:f,isLeft:g,isRight:v}=yn(e),b={x:0,y:0},T={x:0,y:0},m={height:t.height*o.y,width:t.width*o.x};return!h&&s<=t.top+m.height?(b.y=K.Backward,T.y=r*Math.abs((t.top+m.height-s)/m.height)):!f&&u>=t.bottom-m.height&&(b.y=K.Forward,T.y=r*Math.abs((t.bottom-m.height-u)/m.height)),!v&&l>=t.right-m.width?(b.x=K.Forward,T.x=r*Math.abs((t.right-m.width-l)/m.width)):!g&&a<=t.left+m.width&&(b.x=K.Backward,T.x=r*Math.abs((t.left+m.width-a)/m.width)),{direction:b,speed:T}}function pr(e){if(e===document.scrollingElement){const{innerWidth:s,innerHeight:a}=window;return{top:0,left:0,right:s,bottom:a,width:s,height:a}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function wn(e){return e.reduce((t,n)=>Ye(t,Lt(n)),ge)}function br(e){return e.reduce((t,n)=>t+vn(n),0)}function vr(e){return e.reduce((t,n)=>t+xn(n),0)}function xr(e,t){if(t===void 0&&(t=Ve),!e)return;const{top:n,left:r,bottom:o,right:s}=t(e);bn(e)&&(o<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const mr=[["x",["left","right"],br],["y",["top","bottom"],vr]];class Ut{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=St(n),o=wn(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[s,a,l]of mr)for(const u of a)Object.defineProperty(this,u,{get:()=>{const h=l(r),f=o[s]-h;return this.rect[u]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class et{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var o;(o=this.target)==null||o.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function yr(e){const{EventTarget:t}=ee(e);return e instanceof t?e:qe(e)}function Mt(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var ce;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(ce||(ce={}));function Zt(e){e.preventDefault()}function wr(e){e.stopPropagation()}var j;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(j||(j={}));const Sn={start:[j.Space,j.Enter],cancel:[j.Esc],end:[j.Space,j.Enter,j.Tab]},Sr=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case j.Right:return{...n,x:n.x+25};case j.Left:return{...n,x:n.x-25};case j.Down:return{...n,y:n.y+25};case j.Up:return{...n,y:n.y-25}}};class Xt{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new et(qe(n)),this.windowListeners=new et(ee(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ce.Resize,this.handleCancel),this.windowListeners.add(ce.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ce.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&xr(r),n(ge)}handleKeyDown(t){if(Wt(t)){const{active:n,context:r,options:o}=this.props,{keyboardCodes:s=Sn,coordinateGetter:a=Sr,scrollBehavior:l="smooth"}=o,{code:u}=t;if(s.end.includes(u)){this.handleEnd(t);return}if(s.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:h}=r.current,f=h?{x:h.left,y:h.top}:ge;this.referenceCoordinates||(this.referenceCoordinates=f);const g=a(t,{active:n,context:r.current,currentCoordinates:f});if(g){const v=ot(g,f),b={x:0,y:0},{scrollableAncestors:T}=r.current;for(const m of T){const y=t.code,{isTop:k,isRight:R,isLeft:w,isBottom:M,maxScroll:N,minScroll:E}=yn(m),C=pr(m),D={x:Math.min(y===j.Right?C.right-C.width/2:C.right,Math.max(y===j.Right?C.left:C.left+C.width/2,g.x)),y:Math.min(y===j.Down?C.bottom-C.height/2:C.bottom,Math.max(y===j.Down?C.top:C.top+C.height/2,g.y))},F=y===j.Right&&!R||y===j.Left&&!w,$=y===j.Down&&!M||y===j.Up&&!k;if(F&&D.x!==g.x){const O=m.scrollLeft+v.x,oe=y===j.Right&&O<=N.x||y===j.Left&&O>=E.x;if(oe&&!v.y){m.scrollTo({left:O,behavior:l});return}oe?b.x=m.scrollLeft-O:b.x=y===j.Right?m.scrollLeft-N.x:m.scrollLeft-E.x,b.x&&m.scrollBy({left:-b.x,behavior:l});break}else if($&&D.y!==g.y){const O=m.scrollTop+v.y,oe=y===j.Down&&O<=N.y||y===j.Up&&O>=E.y;if(oe&&!v.x){m.scrollTo({top:O,behavior:l});return}oe?b.y=m.scrollTop-O:b.y=y===j.Down?m.scrollTop-N.y:m.scrollTop-E.y,b.y&&m.scrollBy({top:-b.y,behavior:l});break}}this.handleMove(t,Ye(ot(g,this.referenceCoordinates),b))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Xt.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Sn,onActivation:o}=t,{active:s}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const l=s.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),o?.({event:e.nativeEvent}),!0)}return!1}}];function en(e){return!!(e&&"distance"in e)}function tn(e){return!!(e&&"delay"in e)}class Ht{constructor(t,n,r){var o;r===void 0&&(r=yr(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:s}=t,{target:a}=s;this.props=t,this.events=n,this.document=qe(a),this.documentListeners=new et(this.document),this.listeners=new et(r),this.windowListeners=new et(ee(a)),this.initialCoordinates=(o=Ot(s))!=null?o:ge,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(ce.Resize,this.handleCancel),this.windowListeners.add(ce.DragStart,Zt),this.windowListeners.add(ce.VisibilityChange,this.handleCancel),this.windowListeners.add(ce.ContextMenu,Zt),this.documentListeners.add(ce.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(tn(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(en(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:o}=this.props;o(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(ce.Click,wr,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ce.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:o,props:s}=this,{onMove:a,options:{activationConstraint:l}}=s;if(!o)return;const u=(n=Ot(t))!=null?n:ge,h=ot(o,u);if(!r&&l){if(en(l)){if(l.tolerance!=null&&Mt(h,l.tolerance))return this.handleCancel();if(Mt(h,l.distance))return this.handleStart()}if(tn(l)&&Mt(h,l.tolerance))return this.handleCancel();this.handlePending(l,h);return}t.cancelable&&t.preventDefault(),a(u)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===j.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Dr={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Yt extends Ht{constructor(t){const{event:n}=t,r=qe(n.target);super(t,Dr,r)}}Yt.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const Cr={move:{name:"mousemove"},end:{name:"mouseup"}};var Pt;(function(e){e[e.RightClick=2]="RightClick"})(Pt||(Pt={}));class kr extends Ht{constructor(t){super(t,Cr,qe(t.event.target))}}kr.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Pt.RightClick?!1:(r?.({event:n}),!0)}}];const It={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Rr extends Ht{constructor(t){super(t,It)}static setup(){return window.addEventListener(It.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(It.move.name,t)};function t(){}}}Rr.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return o.length>1?!1:(r?.({event:n}),!0)}}];var tt;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(tt||(tt={}));var mt;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(mt||(mt={}));function Nr(e){let{acceleration:t,activator:n=tt.Pointer,canScroll:r,draggingRect:o,enabled:s,interval:a=5,order:l=mt.TreeOrder,pointerCoordinates:u,scrollableAncestors:h,scrollableAncestorRects:f,delta:g,threshold:v}=e;const b=jr({delta:g,disabled:!s}),[T,m]=Fn(),y=i.useRef({x:0,y:0}),k=i.useRef({x:0,y:0}),R=i.useMemo(()=>{switch(n){case tt.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case tt.DraggableRect:return o}},[n,o,u]),w=i.useRef(null),M=i.useCallback(()=>{const E=w.current;if(!E)return;const C=y.current.x*k.current.x,D=y.current.y*k.current.y;E.scrollBy(C,D)},[]),N=i.useMemo(()=>l===mt.TreeOrder?[...h].reverse():h,[l,h]);i.useEffect(()=>{if(!s||!h.length||!R){m();return}for(const E of N){if(r?.(E)===!1)continue;const C=h.indexOf(E),D=f[C];if(!D)continue;const{direction:F,speed:$}=gr(E,D,R,t,v);for(const O of["x","y"])b[O][F[O]]||($[O]=0,F[O]=0);if($.x>0||$.y>0){m(),w.current=E,T(M,a),y.current=$,k.current=F;return}}y.current={x:0,y:0},k.current={x:0,y:0},m()},[t,M,r,m,s,a,JSON.stringify(R),JSON.stringify(b),T,h,N,f,JSON.stringify(v)])}const Er={x:{[K.Backward]:!1,[K.Forward]:!1},y:{[K.Backward]:!1,[K.Forward]:!1}};function jr(e){let{delta:t,disabled:n}=e;const r=At(t);return lt(o=>{if(n||!r||!o)return Er;const s={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[K.Backward]:o.x[K.Backward]||s.x===-1,[K.Forward]:o.x[K.Forward]||s.x===1},y:{[K.Backward]:o.y[K.Backward]||s.y===-1,[K.Forward]:o.y[K.Forward]||s.y===1}}},[n,t,r])}function Tr(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return lt(o=>{var s;return t==null?null:(s=r??o)!=null?s:null},[r,t])}function Mr(e,t){return i.useMemo(()=>e.reduce((n,r)=>{const{sensor:o}=r,s=o.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...s]},[]),[e,t])}var it;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(it||(it={}));var zt;(function(e){e.Optimized="optimized"})(zt||(zt={}));const nn=new Map;function Ir(e,t){let{dragging:n,dependencies:r,config:o}=t;const[s,a]=i.useState(null),{frequency:l,measure:u,strategy:h}=o,f=i.useRef(e),g=y(),v=rt(g),b=i.useCallback(function(k){k===void 0&&(k=[]),!v.current&&a(R=>R===null?k:R.concat(k.filter(w=>!R.includes(w))))},[v]),T=i.useRef(null),m=lt(k=>{if(g&&!n)return nn;if(!k||k===nn||f.current!==e||s!=null){const R=new Map;for(let w of e){if(!w)continue;if(s&&s.length>0&&!s.includes(w.id)&&w.rect.current){R.set(w.id,w.rect.current);continue}const M=w.node.current,N=M?new Ut(u(M),M):null;w.rect.current=N,N&&R.set(w.id,N)}return R}return k},[e,s,n,g,u]);return i.useEffect(()=>{f.current=e},[e]),i.useEffect(()=>{g||b()},[n,g]),i.useEffect(()=>{s&&s.length>0&&a(null)},[JSON.stringify(s)]),i.useEffect(()=>{g||typeof l!="number"||T.current!==null||(T.current=setTimeout(()=>{b(),T.current=null},l))},[l,g,b,...r]),{droppableRects:m,measureDroppableContainers:b,measuringScheduled:s!=null};function y(){switch(h){case it.Always:return!1;case it.BeforeDragging:return n;default:return!n}}}function Dn(e,t){return lt(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Ar(e,t){return Dn(e,t)}function Or(e){let{callback:t,disabled:n}=e;const r=$t(t),o=i.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return i.useEffect(()=>()=>o?.disconnect(),[o]),o}function Dt(e){let{callback:t,disabled:n}=e;const r=$t(t),o=i.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return i.useEffect(()=>()=>o?.disconnect(),[o]),o}function Lr(e){return new Ut(Ve(e),e)}function rn(e,t,n){t===void 0&&(t=Lr);const[r,o]=i.useState(null);function s(){o(u=>{if(!e)return null;if(e.isConnected===!1){var h;return(h=u??n)!=null?h:null}const f=t(e);return JSON.stringify(u)===JSON.stringify(f)?u:f})}const a=Or({callback(u){if(e)for(const h of u){const{type:f,target:g}=h;if(f==="childList"&&g instanceof HTMLElement&&g.contains(e)){s();break}}}}),l=Dt({callback:s});return ye(()=>{s(),e?(l?.observe(e),a?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),a?.disconnect())},[e]),r}function Pr(e){const t=Dn(e);return pn(e,t)}const on=[];function zr(e){const t=i.useRef(e),n=lt(r=>e?r&&r!==on&&e&&t.current&&e.parentNode===t.current.parentNode?r:St(e):on,[e]);return i.useEffect(()=>{t.current=e},[e]),n}function Br(e){const[t,n]=i.useState(null),r=i.useRef(e),o=i.useCallback(s=>{const a=Tt(s.target);a&&n(l=>l?(l.set(a,Lt(a)),new Map(l)):null)},[]);return i.useEffect(()=>{const s=r.current;if(e!==s){a(s);const l=e.map(u=>{const h=Tt(u);return h?(h.addEventListener("scroll",o,{passive:!0}),[h,Lt(h)]):null}).filter(u=>u!=null);n(l.length?new Map(l):null),r.current=e}return()=>{a(e),a(s)};function a(l){l.forEach(u=>{const h=Tt(u);h?.removeEventListener("scroll",o)})}},[o,e]),i.useMemo(()=>e.length?t?Array.from(t.values()).reduce((s,a)=>Ye(s,a),ge):wn(e):ge,[e,t])}function sn(e,t){t===void 0&&(t=[]);const n=i.useRef(null);return i.useEffect(()=>{n.current=null},t),i.useEffect(()=>{const r=e!==ge;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?ot(e,n.current):ge}function Fr(e){i.useEffect(()=>{if(!wt)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function $r(e,t){return i.useMemo(()=>e.reduce((n,r)=>{let{eventName:o,handler:s}=r;return n[o]=a=>{s(a,t)},n},{}),[e,t])}function Cn(e){return i.useMemo(()=>e?dr(e):null,[e])}const an=[];function Wr(e,t){t===void 0&&(t=Ve);const[n]=e,r=Cn(n?ee(n):null),[o,s]=i.useState(an);function a(){s(()=>e.length?e.map(u=>mn(u)?r:new Ut(t(u),u)):an)}const l=Dt({callback:a});return ye(()=>{l?.disconnect(),a(),e.forEach(u=>l?.observe(u))},[e]),o}function Ur(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return at(t)?t:e}function Xr(e){let{measure:t}=e;const[n,r]=i.useState(null),o=i.useCallback(h=>{for(const{target:f}of h)if(at(f)){r(g=>{const v=t(f);return g?{...g,width:v.width,height:v.height}:v});break}},[t]),s=Dt({callback:o}),a=i.useCallback(h=>{const f=Ur(h);s?.disconnect(),f&&s?.observe(f),r(f?t(f):null)},[t,s]),[l,u]=vt(a);return i.useMemo(()=>({nodeRef:l,rect:n,setRef:u}),[n,l,u])}const Hr=[{sensor:Yt,options:{}},{sensor:Xt,options:{}}],Yr={current:{}},bt={draggable:{measure:Qt},droppable:{measure:Qt,strategy:it.WhileDragging,frequency:zt.Optimized},dragOverlay:{measure:Ve}};class nt extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Kr={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new nt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:xt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:bt,measureDroppableContainers:xt,windowRect:null,measuringScheduled:!1},qr={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:xt,draggableNodes:new Map,over:null,measureDroppableContainers:xt},Ct=i.createContext(qr),kn=i.createContext(Kr);function Vr(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new nt}}}function Gr(e,t){switch(t.type){case X.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case X.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case X.DragEnd:case X.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case X.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new nt(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case X.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const a=new nt(e.droppable.containers);return a.set(n,{...s,disabled:o}),{...e,droppable:{...e.droppable,containers:a}}}case X.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const s=new nt(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function _r(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:o}=i.useContext(Ct),s=At(r),a=At(n?.id);return i.useEffect(()=>{if(!t&&!r&&s&&a!=null){if(!Wt(s)||document.activeElement===s.target)return;const l=o.get(a);if(!l)return;const{activatorNode:u,node:h}=l;if(!u.current&&!h.current)return;requestAnimationFrame(()=>{for(const f of[u.current,h.current]){if(!f)continue;const g=Un(f);if(g){g.focus();break}}})}},[r,t,o,a,s]),null}function Jr(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((o,s)=>s({transform:o,...r}),n):n}function Qr(e){return i.useMemo(()=>({draggable:{...bt.draggable,...e?.draggable},droppable:{...bt.droppable,...e?.droppable},dragOverlay:{...bt.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function Zr(e){let{activeNode:t,measure:n,initialRect:r,config:o=!0}=e;const s=i.useRef(!1),{x:a,y:l}=typeof o=="boolean"?{x:o,y:o}:o;ye(()=>{if(!a&&!l||!t){s.current=!1;return}if(s.current||!r)return;const h=t?.node.current;if(!h||h.isConnected===!1)return;const f=n(h),g=pn(f,r);if(a||(g.x=0),l||(g.y=0),s.current=!0,Math.abs(g.x)>0||Math.abs(g.y)>0){const v=bn(h);v&&v.scrollBy({top:g.y,left:g.x})}},[t,a,l,r,n])}const Rn=i.createContext({...ge,scaleX:1,scaleY:1});var ze;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(ze||(ze={}));const eo=i.memo(function(t){var n,r,o,s;let{id:a,accessibility:l,autoScroll:u=!0,children:h,sensors:f=Hr,collisionDetection:g=rr,measuring:v,modifiers:b,...T}=t;const m=i.useReducer(Gr,void 0,Vr),[y,k]=m,[R,w]=Vn(),[M,N]=i.useState(ze.Uninitialized),E=M===ze.Initialized,{draggable:{active:C,nodes:D,translate:F},droppable:{containers:$}}=y,O=C!=null?D.get(C):null,oe=i.useRef({initial:null,translated:null}),J=i.useMemo(()=>{var W;return C!=null?{id:C,data:(W=O?.data)!=null?W:Yr,rect:oe}:null},[C,O]),U=i.useRef(null),[Ee,V]=i.useState(null),[H,Be]=i.useState(null),se=rt(T,Object.values(T)),pe=ct("DndDescribedBy",a),Fe=i.useMemo(()=>$.getEnabled(),[$]),P=Qr(v),{droppableRects:de,measureDroppableContainers:we,measuringScheduled:je}=Ir(Fe,{dragging:E,dependencies:[F.x,F.y],config:P.droppable}),_=Tr(D,C),$e=i.useMemo(()=>H?Ot(H):null,[H]),be=kt(),ue=Ar(_,P.draggable.measure);Zr({activeNode:C!=null?D.get(C):null,config:be.layoutShiftCompensation,initialRect:ue,measure:P.draggable.measure});const I=rn(_,P.draggable.measure,ue),We=rn(_?_.parentElement:null),Q=i.useRef({activatorEvent:null,active:null,activeNode:_,collisionRect:null,collisions:null,droppableRects:de,draggableNodes:D,draggingNode:null,draggingNodeRect:null,droppableContainers:$,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Te=$.getNodeFor((n=Q.current.over)==null?void 0:n.id),fe=Xr({measure:P.dragOverlay.measure}),Se=(r=fe.nodeRef.current)!=null?r:_,De=E?(o=fe.rect)!=null?o:I:null,G=!!(fe.nodeRef.current&&fe.rect),Me=Pr(G?null:I),Ie=Cn(Se?ee(Se):null),ie=zr(E?Te??_:null),Ue=Wr(ie),Xe=Jr(b,{transform:{x:F.x-Me.x,y:F.y-Me.y,scaleX:1,scaleY:1},activatorEvent:H,active:J,activeNodeRect:I,containerNodeRect:We,draggingNodeRect:De,over:Q.current.over,overlayNodeRect:fe.rect,scrollableAncestors:ie,scrollableAncestorRects:Ue,windowRect:Ie}),dt=$e?Ye($e,F):null,ut=Br(ie),ft=sn(ut),ht=sn(ut,[I]),c=Ye(Xe,ft),p=De?ir(De,Xe):null,x=J&&p?g({active:J,collisionRect:p,droppableRects:de,droppableContainers:Fe,pointerCoordinates:dt}):null,S=gn(x,"id"),[A,Y]=i.useState(null),L=G?Xe:Ye(Xe,ht),ae=or(L,(s=A?.rect)!=null?s:null,I),he=i.useRef(null),B=i.useCallback((W,te)=>{let{sensor:ne,options:Oe}=te;if(U.current==null)return;const le=D.get(U.current);if(!le)return;const re=W.nativeEvent,ve=new ne({active:U.current,activeNode:le,event:re,options:Oe,context:Q,onAbort(q){if(!D.get(q))return;const{onDragAbort:xe}=se.current,Re={id:q};xe?.(Re),R({type:"onDragAbort",event:Re})},onPending(q,Le,xe,Re){if(!D.get(q))return;const{onDragPending:_e}=se.current,Pe={id:q,constraint:Le,initialCoordinates:xe,offset:Re};_e?.(Pe),R({type:"onDragPending",event:Pe})},onStart(q){const Le=U.current;if(Le==null)return;const xe=D.get(Le);if(!xe)return;const{onDragStart:Re}=se.current,Ge={activatorEvent:re,active:{id:Le,data:xe.data,rect:oe}};Ze.unstable_batchedUpdates(()=>{Re?.(Ge),N(ze.Initializing),k({type:X.DragStart,initialCoordinates:q,active:Le}),R({type:"onDragStart",event:Ge}),V(he.current),Be(re)})},onMove(q){k({type:X.DragMove,coordinates:q})},onEnd:He(X.DragEnd),onCancel:He(X.DragCancel)});he.current=ve;function He(q){return async function(){const{active:xe,collisions:Re,over:Ge,scrollAdjustedTranslate:_e}=Q.current;let Pe=null;if(xe&&_e){const{cancelDrop:Je}=se.current;Pe={activatorEvent:re,active:xe,collisions:Re,delta:_e,over:Ge},q===X.DragEnd&&typeof Je=="function"&&await Promise.resolve(Je(Pe))&&(q=X.DragCancel)}U.current=null,Ze.unstable_batchedUpdates(()=>{k({type:q}),N(ze.Uninitialized),Y(null),V(null),Be(null),he.current=null;const Je=q===X.DragEnd?"onDragEnd":"onDragCancel";if(Pe){const Rt=se.current[Je];Rt?.(Pe),R({type:Je,event:Pe})}})}}},[D]),Ce=i.useCallback((W,te)=>(ne,Oe)=>{const le=ne.nativeEvent,re=D.get(Oe);if(U.current!==null||!re||le.dndKit||le.defaultPrevented)return;const ve={active:re};W(ne,te.options,ve)===!0&&(le.dndKit={capturedBy:te.sensor},U.current=Oe,B(ne,te))},[D,B]),Ae=Mr(f,Ce);Fr(f),ye(()=>{I&&M===ze.Initializing&&N(ze.Initialized)},[I,M]),i.useEffect(()=>{const{onDragMove:W}=se.current,{active:te,activatorEvent:ne,collisions:Oe,over:le}=Q.current;if(!te||!ne)return;const re={active:te,activatorEvent:ne,collisions:Oe,delta:{x:c.x,y:c.y},over:le};Ze.unstable_batchedUpdates(()=>{W?.(re),R({type:"onDragMove",event:re})})},[c.x,c.y]),i.useEffect(()=>{const{active:W,activatorEvent:te,collisions:ne,droppableContainers:Oe,scrollAdjustedTranslate:le}=Q.current;if(!W||U.current==null||!te||!le)return;const{onDragOver:re}=se.current,ve=Oe.get(S),He=ve&&ve.rect.current?{id:ve.id,rect:ve.rect.current,data:ve.data,disabled:ve.disabled}:null,q={active:W,activatorEvent:te,collisions:ne,delta:{x:le.x,y:le.y},over:He};Ze.unstable_batchedUpdates(()=>{Y(He),re?.(q),R({type:"onDragOver",event:q})})},[S]),ye(()=>{Q.current={activatorEvent:H,active:J,activeNode:_,collisionRect:p,collisions:x,droppableRects:de,draggableNodes:D,draggingNode:Se,draggingNodeRect:De,droppableContainers:$,over:A,scrollableAncestors:ie,scrollAdjustedTranslate:c},oe.current={initial:De,translated:p}},[J,_,x,p,D,Se,De,de,$,A,ie,c]),Nr({...be,delta:F,draggingRect:p,pointerCoordinates:dt,scrollableAncestors:ie,scrollableAncestorRects:Ue});const z=i.useMemo(()=>({active:J,activeNode:_,activeNodeRect:I,activatorEvent:H,collisions:x,containerNodeRect:We,dragOverlay:fe,draggableNodes:D,droppableContainers:$,droppableRects:de,over:A,measureDroppableContainers:we,scrollableAncestors:ie,scrollableAncestorRects:Ue,measuringConfiguration:P,measuringScheduled:je,windowRect:Ie}),[J,_,I,H,x,We,fe,D,$,de,A,we,ie,Ue,P,je,Ie]),ke=i.useMemo(()=>({activatorEvent:H,activators:Ae,active:J,activeNodeRect:I,ariaDescribedById:{draggable:pe},dispatch:k,draggableNodes:D,over:A,measureDroppableContainers:we}),[H,Ae,J,I,k,pe,D,A,we]);return Z.createElement(un.Provider,{value:w},Z.createElement(Ct.Provider,{value:ke},Z.createElement(kn.Provider,{value:z},Z.createElement(Rn.Provider,{value:ae},h)),Z.createElement(_r,{disabled:l?.restoreFocus===!1})),Z.createElement(Jn,{...l,hiddenTextDescribedById:pe}));function kt(){const W=Ee?.autoScrollEnabled===!1,te=typeof u=="object"?u.enabled===!1:u===!1,ne=E&&!W&&!te;return typeof u=="object"?{...u,enabled:ne}:{enabled:ne}}}),to=i.createContext(null),ln="button",no="Draggable";function ro(e){let{id:t,data:n,disabled:r=!1,attributes:o}=e;const s=ct(no),{activators:a,activatorEvent:l,active:u,activeNodeRect:h,ariaDescribedById:f,draggableNodes:g,over:v}=i.useContext(Ct),{role:b=ln,roleDescription:T="draggable",tabIndex:m=0}=o??{},y=u?.id===t,k=i.useContext(y?Rn:to),[R,w]=vt(),[M,N]=vt(),E=$r(a,t),C=rt(n);ye(()=>(g.set(t,{id:t,key:s,node:R,activatorNode:M,data:C}),()=>{const F=g.get(t);F&&F.key===s&&g.delete(t)}),[g,t]);const D=i.useMemo(()=>({role:b,tabIndex:m,"aria-disabled":r,"aria-pressed":y&&b===ln?!0:void 0,"aria-roledescription":T,"aria-describedby":f.draggable}),[r,b,m,y,T,f.draggable]);return{active:u,activatorEvent:l,activeNodeRect:h,attributes:D,isDragging:y,listeners:r?void 0:E,node:R,over:v,setNodeRef:w,setActivatorNodeRef:N,transform:k}}function oo(){return i.useContext(kn)}const so="Droppable",io={timeout:25};function Nn(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:o}=e;const s=ct(so),{active:a,dispatch:l,over:u,measureDroppableContainers:h}=i.useContext(Ct),f=i.useRef({disabled:n}),g=i.useRef(!1),v=i.useRef(null),b=i.useRef(null),{disabled:T,updateMeasurementsFor:m,timeout:y}={...io,...o},k=rt(m??r),R=i.useCallback(()=>{if(!g.current){g.current=!0;return}b.current!=null&&clearTimeout(b.current),b.current=setTimeout(()=>{h(Array.isArray(k.current)?k.current:[k.current]),b.current=null},y)},[y]),w=Dt({callback:R,disabled:T||!a}),M=i.useCallback((D,F)=>{w&&(F&&(w.unobserve(F),g.current=!1),D&&w.observe(D))},[w]),[N,E]=vt(M),C=rt(t);return i.useEffect(()=>{!w||!N.current||(w.disconnect(),g.current=!1,w.observe(N.current))},[N,w]),i.useEffect(()=>(l({type:X.RegisterDroppable,element:{id:r,key:s,disabled:n,node:N,rect:v,data:C}}),()=>l({type:X.UnregisterDroppable,key:s,id:r})),[r]),i.useEffect(()=>{n!==f.current.disabled&&(l({type:X.SetDroppableDisabled,id:r,key:s,disabled:n}),f.current.disabled=n)},[r,s,n,l]),{active:a,rect:v,isOver:u?.id===r,node:N,over:u,setNodeRef:E}}function Kt(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function ao(e,t){return e.reduce((n,r,o)=>{const s=t.get(r);return s&&(n[o]=s),n},Array(e.length))}function gt(e){return e!==null&&e>=0}function lo(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function co(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const En=e=>{let{rects:t,activeIndex:n,overIndex:r,index:o}=e;const s=Kt(t,r,n),a=t[o],l=s[o];return!l||!a?null:{x:l.left-a.left,y:l.top-a.top,scaleX:l.width/a.width,scaleY:l.height/a.height}},pt={scaleX:1,scaleY:1},uo=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:o,rects:s,overIndex:a}=e;const l=(t=s[n])!=null?t:r;if(!l)return null;if(o===n){const h=s[a];return h?{x:0,y:n<a?h.top+h.height-(l.top+l.height):h.top-l.top,...pt}:null}const u=fo(s,o,n);return o>n&&o<=a?{x:0,y:-l.height-u,...pt}:o<n&&o>=a?{x:0,y:l.height+u,...pt}:{x:0,y:0,...pt}};function fo(e,t,n){const r=e[t],o=e[t-1],s=e[t+1];return r?n<t?o?r.top-(o.top+o.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):o?r.top-(o.top+o.height):0:0}const jn="Sortable",Tn=Z.createContext({activeIndex:-1,containerId:jn,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:En,disabled:{draggable:!1,droppable:!1}});function ho(e){let{children:t,id:n,items:r,strategy:o=En,disabled:s=!1}=e;const{active:a,dragOverlay:l,droppableRects:u,over:h,measureDroppableContainers:f}=oo(),g=ct(jn,n),v=l.rect!==null,b=i.useMemo(()=>r.map(E=>typeof E=="object"&&"id"in E?E.id:E),[r]),T=a!=null,m=a?b.indexOf(a.id):-1,y=h?b.indexOf(h.id):-1,k=i.useRef(b),R=!lo(b,k.current),w=y!==-1&&m===-1||R,M=co(s);ye(()=>{R&&T&&f(b)},[R,b,T,f]),i.useEffect(()=>{k.current=b},[b]);const N=i.useMemo(()=>({activeIndex:m,containerId:g,disabled:M,disableTransforms:w,items:b,overIndex:y,useDragOverlay:v,sortedRects:ao(b,u),strategy:o}),[m,g,M.draggable,M.droppable,w,b,y,u,v,o]);return Z.createElement(Tn.Provider,{value:N},t)}const go=e=>{let{id:t,items:n,activeIndex:r,overIndex:o}=e;return Kt(n,r,o).indexOf(t)},po=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:o,items:s,newIndex:a,previousItems:l,previousContainerId:u,transition:h}=e;return!h||!r||l!==s&&o===a?!1:n?!0:a!==o&&t===u},bo={duration:200,easing:"ease"},Mn="transform",vo=st.Transition.toString({property:Mn,duration:0,easing:"linear"}),xo={roleDescription:"sortable"};function mo(e){let{disabled:t,index:n,node:r,rect:o}=e;const[s,a]=i.useState(null),l=i.useRef(n);return ye(()=>{if(!t&&n!==l.current&&r.current){const u=o.current;if(u){const h=Ve(r.current,{ignoreTransform:!0}),f={x:u.left-h.left,y:u.top-h.top,scaleX:u.width/h.width,scaleY:u.height/h.height};(f.x||f.y)&&a(f)}}n!==l.current&&(l.current=n)},[t,n,r,o]),i.useEffect(()=>{s&&a(null)},[s]),s}function yo(e){let{animateLayoutChanges:t=po,attributes:n,disabled:r,data:o,getNewIndex:s=go,id:a,strategy:l,resizeObserverConfig:u,transition:h=bo}=e;const{items:f,containerId:g,activeIndex:v,disabled:b,disableTransforms:T,sortedRects:m,overIndex:y,useDragOverlay:k,strategy:R}=i.useContext(Tn),w=wo(r,b),M=f.indexOf(a),N=i.useMemo(()=>({sortable:{containerId:g,index:M,items:f},...o}),[g,o,M,f]),E=i.useMemo(()=>f.slice(f.indexOf(a)),[f,a]),{rect:C,node:D,isOver:F,setNodeRef:$}=Nn({id:a,data:N,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:E,...u}}),{active:O,activatorEvent:oe,activeNodeRect:J,attributes:U,setNodeRef:Ee,listeners:V,isDragging:H,over:Be,setActivatorNodeRef:se,transform:pe}=ro({id:a,data:N,attributes:{...xo,...n},disabled:w.draggable}),Fe=Bn($,Ee),P=!!O,de=P&&!T&&gt(v)&&gt(y),we=!k&&H,je=we&&de?pe:null,$e=de?je??(l??R)({rects:m,activeNodeRect:J,activeIndex:v,overIndex:y,index:M}):null,be=gt(v)&&gt(y)?s({id:a,items:f,activeIndex:v,overIndex:y}):M,ue=O?.id,I=i.useRef({activeId:ue,items:f,newIndex:be,containerId:g}),We=f!==I.current.items,Q=t({active:O,containerId:g,isDragging:H,isSorting:P,id:a,index:M,items:f,newIndex:I.current.newIndex,previousItems:I.current.items,previousContainerId:I.current.containerId,transition:h,wasDragging:I.current.activeId!=null}),Te=mo({disabled:!Q,index:M,node:D,rect:C});return i.useEffect(()=>{P&&I.current.newIndex!==be&&(I.current.newIndex=be),g!==I.current.containerId&&(I.current.containerId=g),f!==I.current.items&&(I.current.items=f)},[P,be,g,f]),i.useEffect(()=>{if(ue===I.current.activeId)return;if(ue!=null&&I.current.activeId==null){I.current.activeId=ue;return}const Se=setTimeout(()=>{I.current.activeId=ue},50);return()=>clearTimeout(Se)},[ue]),{active:O,activeIndex:v,attributes:U,data:N,rect:C,index:M,newIndex:be,items:f,isOver:F,isSorting:P,isDragging:H,listeners:V,node:D,overIndex:y,over:Be,setNodeRef:Fe,setActivatorNodeRef:se,setDroppableNodeRef:$,setDraggableNodeRef:Ee,transform:Te??$e,transition:fe()};function fe(){if(Te||We&&I.current.newIndex===M)return vo;if(!(we&&!Wt(oe)||!h)&&(P||Q))return st.Transition.toString({...h,property:Mn})}}function wo(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e?.draggable)!=null?n:t.draggable,droppable:(r=e?.droppable)!=null?r:t.droppable}}function yt(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const So=[j.Down,j.Right,j.Up,j.Left],Do=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:o,droppableContainers:s,over:a,scrollableAncestors:l}}=t;if(So.includes(e.code)){if(e.preventDefault(),!n||!r)return;const u=[];s.getEnabled().forEach(g=>{if(!g||g!=null&&g.disabled)return;const v=o.get(g.id);if(v)switch(e.code){case j.Down:r.top<v.top&&u.push(g);break;case j.Up:r.top>v.top&&u.push(g);break;case j.Left:r.left>v.left&&u.push(g);break;case j.Right:r.left<v.left&&u.push(g);break}});const h=tr({collisionRect:r,droppableRects:o,droppableContainers:u});let f=gn(h,"id");if(f===a?.id&&h.length>1&&(f=h[1].id),f!=null){const g=s.get(n.id),v=s.get(f),b=v?o.get(v.id):null,T=v?.node.current;if(T&&b&&g&&v){const y=St(T).some((E,C)=>l[C]!==E),k=In(g,v),R=Co(g,v),w=y||!k?{x:0,y:0}:{x:R?r.width-b.width:0,y:R?r.height-b.height:0},M={x:b.left,y:b.top};return w.x&&w.y?M:ot(M,w)}}}};function In(e,t){return!yt(e)||!yt(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function Co(e,t){return!yt(e)||!yt(t)||!In(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}function ko({children:e,id:t}){const{attributes:n,listeners:r,setNodeRef:o,transform:s,transition:a,isDragging:l}=yo({id:t}),u={transform:st.Transform.toString(s),transition:a,opacity:l?.5:1};return d.jsx("div",{ref:o,style:u,...n,...r,children:e})}function Ro({taskId:e,onNest:t}){const{isOver:n,setNodeRef:r}=Nn({id:`nest-${e}`});return d.jsx("div",{ref:r,onClick:()=>t(e),className:`ml-6 mt-1 px-2 py-1 text-xs rounded border-2 border-dashed cursor-pointer transition-all ${n?"bg-purple-100 border-purple-400 text-purple-700":"bg-gray-50 border-gray-300 text-gray-500 hover:border-purple-300"}`,children:"â†³ Drop here to make subtask"})}function To(){const[e,t]=i.useState([]),[n,r]=i.useState(!0),[o,s]=i.useState(!1),[a,l]=i.useState(""),[u,h]=i.useState(""),[f,g]=i.useState(null),[v,b]=i.useState(new Set),[T,m]=i.useState(null),[y,k]=i.useState(""),[R,w]=i.useState([]),[M,N]=i.useState(!1),[E,C]=i.useState(""),[D,F]=i.useState(()=>localStorage.getItem("widgetModeFilter")||"all"),[$,O]=i.useState(null),[oe,J]=i.useState(null),[U,Ee]=i.useState(!1),[V,H]=i.useState(new Set),[Be,se]=i.useState(!1),[pe,Fe]=i.useState("");i.useEffect(()=>{const p=An().currentUser;p&&(g(p.uid),P(p.uid))},[]);const P=async c=>{r(!0);try{const p=me(),x=Nt(p,"tasks"),S=On(x,Ln("userId","==",c)),A=await qt(S),Y=[];A.forEach(z=>{Y.push({id:z.id,...z.data()})});const L=new Date().toISOString().split("T")[0],ae=Y.filter(z=>z.isDeleted||!z.startDate?!1:z.startDate.split("T")[0]===L),he=[...new Set(ae.filter(z=>z.projectId).map(z=>z.projectId))],B={};if(he.length>0){const z=Nt(p,"users",c,"projects");(await qt(z)).forEach(kt=>{const W=kt.data();W.projectId&&W.name&&(B[W.projectId]=W.name)})}const Ae=ae.map(z=>({...z,projectName:z.projectId?B[z.projectId]:void 0})).sort((z,ke)=>z.completed!==ke.completed?z.completed?1:-1:z.position!==void 0&&ke.position!==void 0?z.position-ke.position:0);t(Ae)}catch(p){console.error("Error loading tasks:",p)}finally{r(!1)}},de=async c=>{try{const p=me(),x=Ne(p,"tasks",c.id),S=!c.completed;await Et(x,{status:S?"completed":"todo",completed:S,completedAt:S?new Date:null,updatedAt:new Date}),f&&await P(f)}catch(p){console.error("Error toggling task:",p)}},we=async(c,p)=>{try{const x=me(),S=Ne(x,"tasks",c.id),A=(c.subtasks||[]).map(Y=>Y.id===p?{...Y,completed:!Y.completed}:Y);await Et(S,{subtasks:A,updatedAt:new Date}),f&&await P(f)}catch(x){console.error("Error toggling subtask:",x)}},je=async c=>{if(y.trim())try{const p=me(),x=Ne(p,"tasks",c.id),S={id:`st_${Date.now()}`,title:y.trim(),completed:!1},A=[...c.subtasks||[],S];await Et(x,{subtasks:A,updatedAt:new Date}),k(""),m(null),b(Y=>new Set([...Y,c.id])),f&&await P(f)}catch(p){console.error("Error adding subtask:",p)}},_=async()=>{if(!(!a.trim()||!f))try{const c=me(),p=new Date().toISOString().split("T")[0],x={title:a.trim(),description:u.trim(),startDate:p,startTime:null,status:"todo",priority:"medium",tags:[],isRepeating:!1,userId:f,createdAt:Pn.now(),completed:!1,mode:D==="all"?"personal":D,subtasks:R};await zn(Nt(c,"tasks"),x),l(""),h(""),s(!1),w([]),N(!1),C(""),await P(f)}catch(c){console.error("Error adding task:",c)}},$e=()=>{if(!E.trim())return;const c={id:`st_${Date.now()}`,title:E.trim(),completed:!1};w(p=>[...p,c]),C(""),N(!1)},be=c=>{w(p=>p.filter(x=>x.id!==c))},ue=c=>{b(p=>{const x=new Set(p);return x.has(c)?x.delete(c):x.add(c),x})},I=c=>{H(p=>{const x=new Set(p);return x.has(c)?x.delete(c):x.add(c),x})},We=()=>{H(new Set(G.map(c=>c.id)))},Q=()=>{H(new Set),Ee(!1)},Te=async()=>{if(!(V.size===0||!f))try{const c=me(),p=Qe(c);V.forEach(x=>{const S=Ne(c,"tasks",x);p.update(S,{completed:!0,status:"completed"})}),await p.commit(),Q(),await P(f)}catch(c){console.error("Error completing tasks:",c)}},fe=async()=>{if(!(V.size===0||!pe||!f))try{const c=me(),p=Qe(c);V.forEach(x=>{const S=Ne(c,"tasks",x);p.update(S,{startDate:pe})}),await p.commit(),Q(),se(!1),Fe(""),await P(f)}catch(c){console.error("Error moving tasks:",c)}},Se=async c=>{if(!(V.size===0||!f))try{const p=me(),x=Qe(p);V.forEach(S=>{const A=Ne(p,"tasks",S);x.update(A,{mode:c})}),await x.commit(),Q(),await P(f)}catch(p){console.error("Error changing task mode:",p)}},De=D==="all"?e:e.filter(c=>c.mode===D||!c.mode&&D==="personal"),G=De.filter(c=>!c.completed),Me=De.filter(c=>c.completed),Ie=e.reduce((c,p)=>c+(p.subtasks?.length||0),0),ie=e.reduce((c,p)=>c+(p.subtasks?.filter(x=>x.completed).length||0),0),Ue=Qn(Gt(Yt,{activationConstraint:{distance:8}}),Gt(Xt,{coordinateGetter:Do})),Xe=c=>{O(c.active.id)},dt=c=>{const{over:p}=c;J(p?p.id:null)},ut=async c=>{const{active:p,over:x}=c;if(O(null),J(null),!x||p.id===x.id)return;const S=G.find(B=>B.id===p.id),A=x.id;if(A.startsWith("nest-")){const B=A.replace("nest-",""),Ce=G.find(Ae=>Ae.id===B);S&&Ce&&S.id!==Ce.id&&await ft(S,Ce);return}const Y=G.find(B=>B.id===A);if(!S||!Y)return;const L=G.findIndex(B=>B.id===p.id),ae=G.findIndex(B=>B.id===A);if(L===-1||ae===-1)return;const he=Kt(G,L,ae);t([...he,...Me]);try{const B=me(),Ce=Qe(B);he.forEach((Ae,z)=>{const ke=Ne(B,"tasks",Ae.id);Ce.update(ke,{position:z})}),await Ce.commit()}catch(B){console.error("Error updating task order:",B),f&&await P(f)}},ft=async(c,p)=>{try{const x=me(),S=Qe(x),A={id:`subtask_${Date.now()}`,title:c.title,completed:!1},Y=Ne(x,"tasks",p.id);S.update(Y,{subtasks:[...p.subtasks||[],A]});const L=Ne(x,"tasks",c.id);S.update(L,{isDeleted:!0}),await S.commit(),b(ae=>new Set([...ae,p.id])),f&&await P(f)}catch(x){console.error("Error converting task to subtask:",x)}},ht=(c,p,x=!1)=>{const S=c.subtasks&&c.subtasks.length>0,A=v.has(c.id),Y=T===c.id;return d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:`bg-white rounded-md p-2 shadow-sm border-l-4 ${p?"border-l-gray-300 opacity-60":"border-l-yellow-400"} hover:shadow-md transition-shadow`,children:d.jsxs("div",{className:"flex items-center gap-2",children:[x&&!p&&!U&&d.jsx("div",{className:"flex-shrink-0 w-4 h-4 flex items-center justify-center text-gray-400 hover:text-gray-600 cursor-grab active:cursor-grabbing touch-none",title:"Drag to reorder",children:d.jsxs("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 6 10",children:[d.jsx("circle",{cx:"1",cy:"1",r:"1"}),d.jsx("circle",{cx:"5",cy:"1",r:"1"}),d.jsx("circle",{cx:"1",cy:"5",r:"1"}),d.jsx("circle",{cx:"5",cy:"5",r:"1"}),d.jsx("circle",{cx:"1",cy:"9",r:"1"}),d.jsx("circle",{cx:"5",cy:"9",r:"1"})]})}),U&&!p&&d.jsx("button",{onClick:L=>{L.stopPropagation(),I(c.id)},className:`flex-shrink-0 w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${V.has(c.id)?"bg-orange-500 border-orange-500 text-white":"border-gray-400 hover:border-orange-400"}`,children:V.has(c.id)&&d.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:d.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),d.jsx("button",{onClick:()=>ue(c.id),className:`flex-shrink-0 w-4 h-4 flex items-center justify-center text-gray-400 hover:text-gray-600 transition-colors ${!S&&"invisible"}`,children:d.jsx("svg",{className:`w-3 h-3 transition-transform ${A?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),d.jsx("button",{onClick:()=>de(c),className:`flex-shrink-0 w-4 h-4 rounded border-2 ${p?"bg-green-500 border-green-500 flex items-center justify-center":"border-gray-400 hover:border-green-500"} transition-colors`,children:p&&d.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),d.jsx("div",{className:"flex-1 min-w-0",children:d.jsxs("h3",{className:`text-sm font-medium truncate ${p?"text-gray-600 line-through":"text-gray-800"}`,children:[c.title,S&&d.jsxs("span",{className:"ml-1 text-xs text-gray-400",children:["(",c.subtasks.filter(L=>L.completed).length,"/",c.subtasks.length,")"]})]})}),!p&&d.jsx("button",{onClick:()=>{m(c.id),b(L=>new Set([...L,c.id]))},className:"flex-shrink-0 w-5 h-5 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-yellow-100 rounded transition-colors",title:"Add subtask",children:d.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})}),$&&$!==c.id&&!p&&d.jsx(Ro,{taskId:c.id,onNest:async L=>{const ae=G.find(B=>B.id===$),he=G.find(B=>B.id===L);ae&&he&&await ft(ae,he)}}),A&&S&&d.jsx("div",{className:"ml-6 space-y-1",children:c.subtasks.map(L=>d.jsxs("div",{className:"bg-white bg-opacity-70 rounded p-1.5 flex items-center gap-2",children:[d.jsx("button",{onClick:()=>we(c,L.id),className:`flex-shrink-0 w-3 h-3 rounded border ${L.completed?"bg-green-500 border-green-500":"border-gray-400 hover:border-green-500"} transition-colors flex items-center justify-center`,children:L.completed&&d.jsx("svg",{className:"w-2 h-2 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),d.jsx("span",{className:`text-xs ${L.completed?"text-gray-500 line-through":"text-gray-700"}`,children:L.title})]},L.id))}),Y&&d.jsxs("div",{className:"ml-6 flex gap-1",children:[d.jsx("input",{type:"text",placeholder:"Subtask...",value:y,onChange:L=>k(L.target.value),onKeyPress:L=>{L.key==="Enter"&&y.trim()&&je(c)},className:"flex-1 px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-yellow-400",autoFocus:!0}),d.jsx("button",{onClick:()=>je(c),disabled:!y.trim(),className:"px-2 py-1 bg-green-500 hover:bg-green-600 disabled:bg-gray-300 text-white rounded text-xs",children:"âœ“"}),d.jsx("button",{onClick:()=>{m(null),k("")},className:"px-2 py-1 bg-gray-300 hover:bg-gray-400 text-gray-800 rounded text-xs",children:"âœ•"})]})]},c.id)};return d.jsxs("div",{className:"w-full max-w-sm mx-auto",children:[d.jsxs("div",{className:"bg-gradient-to-br from-yellow-100 via-yellow-50 to-yellow-100 rounded-lg shadow-lg p-6 relative border-t-8 border-yellow-300",style:{boxShadow:"0 10px 25px rgba(0,0,0,0.1), 0 0 0 1px rgba(0,0,0,0.05)",background:"linear-gradient(135deg, #fef3c7 0%, #fde68a 50%, #fef3c7 100%)"},children:[d.jsxs("div",{className:"mb-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-800",style:{fontFamily:"Comic Sans MS, cursive"},children:"Today's Tasks"}),d.jsx("button",{onClick:()=>f&&P(f),className:"p-1.5 hover:bg-yellow-200 rounded-full transition-colors",title:"Refresh",children:d.jsx("svg",{className:"w-4 h-4 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),d.jsx("p",{className:"text-sm text-gray-600",style:{fontFamily:"Comic Sans MS, cursive"},children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),d.jsx("div",{className:"flex gap-1 mt-2",children:["all","personal","professional"].map(c=>d.jsx("button",{onClick:()=>{F(c),localStorage.setItem("widgetModeFilter",c)},className:`px-2 py-0.5 text-xs rounded-full transition-colors ${D===c?c==="personal"?"bg-blue-500 text-white":c==="professional"?"bg-purple-500 text-white":"bg-gray-700 text-white":"bg-yellow-200 text-gray-600 hover:bg-yellow-300"}`,children:c==="all"?"All":c==="personal"?"Personal":"Work"},c))}),d.jsxs("div",{className:"flex items-center justify-between mt-2",children:[d.jsx("button",{onClick:()=>{Ee(!U),U&&H(new Set)},className:`px-2 py-0.5 text-xs rounded-full transition-colors ${U?"bg-orange-500 text-white":"bg-yellow-200 text-gray-600 hover:bg-yellow-300"}`,children:U?"Cancel":"Select"}),U&&V.size>0&&d.jsxs("span",{className:"text-xs text-gray-600",children:[V.size," selected"]})]}),U&&V.size>0&&d.jsxs("div",{className:"mt-2 p-2 bg-orange-100 rounded-lg space-y-2",children:[d.jsxs("div",{className:"flex gap-1 flex-wrap",children:[d.jsx("button",{onClick:Te,className:"px-2 py-1 text-xs bg-green-500 hover:bg-green-600 text-white rounded",children:"âœ“ Complete"}),d.jsx("button",{onClick:()=>se(!Be),className:"px-2 py-1 text-xs bg-blue-500 hover:bg-blue-600 text-white rounded",children:"Move"}),d.jsx("button",{onClick:()=>Se("personal"),className:"px-2 py-1 text-xs bg-blue-400 hover:bg-blue-500 text-white rounded",children:"Personal"}),d.jsx("button",{onClick:()=>Se("professional"),className:"px-2 py-1 text-xs bg-purple-500 hover:bg-purple-600 text-white rounded",children:"Work"}),d.jsx("button",{onClick:We,className:"px-2 py-1 text-xs bg-gray-500 hover:bg-gray-600 text-white rounded",children:"All"})]}),Be&&d.jsxs("div",{className:"flex gap-1",children:[d.jsx("input",{type:"date",value:pe,onChange:c=>Fe(c.target.value),className:"flex-1 px-2 py-1 text-xs border border-gray-300 rounded"}),d.jsx("button",{onClick:fe,disabled:!pe,className:"px-2 py-1 text-xs bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 text-white rounded",children:"Move"})]})]})]}),d.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto pr-1 custom-scrollbar",children:[n?d.jsx("div",{className:"text-center py-8",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-700 mx-auto"})}):e.length===0?d.jsxs("div",{className:"text-center py-8",children:[d.jsx("p",{className:"text-gray-600 text-sm mb-1",style:{fontFamily:"Comic Sans MS, cursive"},children:"No tasks for today! ðŸŽ‰"}),d.jsx("p",{className:"text-gray-500 text-xs",children:"Click + to add one"})]}):d.jsxs(d.Fragment,{children:[d.jsx(eo,{sensors:Ue,collisionDetection:er,onDragStart:Xe,onDragOver:dt,onDragEnd:ut,children:d.jsx(ho,{items:G.map(c=>c.id),strategy:uo,children:(()=>{const c=G.reduce((x,S)=>{const A=S.projectName||"No Project";return x[A]||(x[A]=[]),x[A].push(S),x},{}),p=Object.keys(c).sort((x,S)=>x==="No Project"?1:S==="No Project"?-1:x.localeCompare(S));return p.map(x=>d.jsxs("div",{children:[p.length>1&&d.jsxs("div",{className:"flex items-center gap-1 py-1 px-1 mt-2 mb-1 border-b border-yellow-300",children:[d.jsx("span",{className:"text-xs font-semibold text-gray-600",style:{fontFamily:"Comic Sans MS, cursive"},children:x}),d.jsxs("span",{className:"text-xs text-gray-400",children:["(",c[x].length,")"]})]}),c[x].map(S=>d.jsx(ko,{id:S.id,children:ht(S,!1,!0)},S.id))]},x))})()})}),Me.length>0&&d.jsxs(d.Fragment,{children:[G.length>0&&d.jsx("div",{className:"border-t border-yellow-300 my-3 pt-2",children:d.jsx("p",{className:"text-xs text-gray-600 font-medium mb-2",children:"Completed âœ“"})}),Me.map(c=>ht(c,!0))]})]}),o?d.jsxs("div",{className:"p-2 bg-white rounded-md shadow-sm border-2 border-yellow-300 space-y-2",children:[d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"text",placeholder:"New task...",value:a,onChange:c=>l(c.target.value),onKeyPress:c=>{c.key==="Enter"&&a.trim()&&_()},className:"flex-1 px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-yellow-400 text-sm",autoFocus:!0}),d.jsx("button",{onClick:_,disabled:!a.trim(),className:"px-2 py-1 bg-green-500 hover:bg-green-600 disabled:bg-gray-300 text-white rounded text-sm transition-colors",children:"âœ“"}),d.jsx("button",{onClick:()=>{s(!1),l(""),w([]),N(!1)},className:"px-2 py-1 bg-gray-300 hover:bg-gray-400 text-gray-800 rounded text-sm transition-colors",children:"âœ•"})]}),R.length>0&&d.jsx("div",{className:"ml-4 space-y-1",children:R.map(c=>d.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[d.jsx("span",{className:"w-2 h-2 bg-gray-300 rounded-full"}),d.jsx("span",{className:"flex-1",children:c.title}),d.jsx("button",{onClick:()=>be(c.id),className:"text-red-400 hover:text-red-600 text-xs",children:"âœ•"})]},c.id))}),M?d.jsxs("div",{className:"flex gap-1 ml-4",children:[d.jsx("input",{type:"text",placeholder:"Subtask...",value:E,onChange:c=>C(c.target.value),onKeyPress:c=>{c.key==="Enter"&&E.trim()&&$e()},className:"flex-1 px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-yellow-400",autoFocus:!0}),d.jsx("button",{onClick:$e,disabled:!E.trim(),className:"px-1 py-1 bg-green-500 hover:bg-green-600 disabled:bg-gray-300 text-white rounded text-xs",children:"âœ“"}),d.jsx("button",{onClick:()=>{N(!1),C("")},className:"px-1 py-1 bg-gray-300 hover:bg-gray-400 text-gray-800 rounded text-xs",children:"âœ•"})]}):d.jsxs("button",{onClick:()=>N(!0),className:"flex items-center gap-1 text-xs text-gray-500 hover:text-gray-700 ml-4",children:[d.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add subtask"]})]}):d.jsx("button",{onClick:()=>s(!0),className:"w-full py-2 flex items-center justify-center text-gray-500 hover:text-gray-700 hover:bg-yellow-200 rounded-md transition-colors",title:"Add new task",children:d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]}),!n&&e.length>0&&d.jsxs("div",{className:"mt-4 pt-3 border-t border-yellow-300",children:[d.jsxs("div",{className:"flex justify-between text-xs text-gray-700",children:[d.jsxs("span",{children:[Me.length+ie," of ",e.length+Ie," done"]}),d.jsxs("span",{children:[G.length+(Ie-ie)," remaining"]})]}),d.jsx("div",{className:"w-full bg-yellow-200 rounded-full h-1.5 mt-2",children:d.jsx("div",{className:"bg-green-500 h-1.5 rounded-full transition-all duration-500",style:{width:`${e.length+Ie>0?(Me.length+ie)/(e.length+Ie)*100:0}%`}})})]})]}),d.jsx("style",{children:`
                .custom-scrollbar::-webkit-scrollbar {
                    width: 6px;
                }
                .custom-scrollbar::-webkit-scrollbar-track {
                    background: #fef3c7;
                    border-radius: 3px;
                }
                .custom-scrollbar::-webkit-scrollbar-thumb {
                    background: #fbbf24;
                    border-radius: 3px;
                }
                .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                    background: #f59e0b;
                }
            `})]})}export{To as T};
//# sourceMappingURL=TodayStickiesWidget-B29xtU6o.js.map
