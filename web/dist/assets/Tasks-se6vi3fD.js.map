{"version":3,"file":"Tasks-se6vi3fD.js","sources":["../../src/pages/Tasks.tsx"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\nimport { getAuth, signOut } from 'firebase/auth';\nimport { getFirestore, collection, addDoc, query, where, getDocs, updateDoc, deleteDoc, doc, Timestamp } from 'firebase/firestore';\nimport { useNavigate, Link, useSearchParams } from 'react-router-dom';\n\ninterface Task {\n  id: string;\n  title: string;\n  description: string;\n  startDate: string;\n  startTime?: string;\n  status: 'todo' | 'in_progress' | 'completed';\n  priority: 'low' | 'medium' | 'high';\n  tags: string[];\n  isRepeating: boolean;\n  repeatFrequency?: 'daily' | 'weekly' | 'monthly';\n  repeatEndDate?: string;\n  userId: string;\n  createdAt: any;\n  completed?: boolean;\n  deletedOccurrences?: string[]; // Array of YYYY-MM-DD dates that were explicitly deleted\n  isDeleted?: boolean; // Soft delete flag for parent recurring tasks\n  mode?: 'personal' | 'professional'; // Task mode\n}\n\nexport default function Tasks() {\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n  const formRef = useRef<HTMLDivElement>(null);\n  const [tasks, setTasks] = useState<Task[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [editingTask, setEditingTask] = useState<Task | null>(null);\n  const [user, setUser] = useState<any>(null);\n  const [sortBy, setSortBy] = useState<'priority' | 'time' | 'deadline' | 'date'>('priority');\n  const [statusFilter, setStatusFilter] = useState<'all' | 'active' | 'completed'>('all');\n  const [dateFilter, setDateFilter] = useState<'all' | 'today' | 'thisWeek' | 'thisMonth' | 'custom'>(\n    (searchParams.get('filter') as any) || 'all'\n  );\n  const [customDateStart, setCustomDateStart] = useState<string>('');\n  const [customDateEnd, setCustomDateEnd] = useState<string>('');\n  const [modeFilter, setModeFilter] = useState<'all' | 'personal' | 'professional'>(() => {\n    return (localStorage.getItem('taskModeFilter') as any) || 'all';\n  });\n\n  useEffect(() => {\n    const filterParam = searchParams.get('filter');\n    if (filterParam && ['all', 'today', 'thisWeek', 'thisMonth', 'custom'].includes(filterParam)) {\n      setDateFilter(filterParam as any);\n    }\n  }, [searchParams]);\n\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    startDate: (() => {\n      const now = new Date();\n      return `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')}`;\n    })(), // Default to today\n    startTime: '',\n    priority: 'medium' as 'low' | 'medium' | 'high',\n    tags: '',\n    isRepeating: false,\n    repeatFrequency: 'daily' as 'daily' | 'weekly' | 'monthly',\n    repeatEndDate: '',\n    mode: 'personal' as 'personal' | 'professional'\n  });\n\n  useEffect(() => {\n    const auth = getAuth();\n    const currentUser = auth.currentUser;\n    setUser(currentUser);\n\n    if (currentUser) {\n      loadTasks(currentUser.uid);\n    }\n  }, []);\n\n  const loadTasks = async (userId: string) => {\n    setLoading(true);\n    try {\n      const db = getFirestore();\n      const tasksRef = collection(db, 'tasks');\n      const q = query(tasksRef, where('userId', '==', userId));\n      const querySnapshot = await getDocs(q);\n\n      const now = new Date();\n      const today = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')}`;\n\n      const loadedTasks: Task[] = [];\n      querySnapshot.forEach((doc) => {\n        const task = { id: doc.id, ...doc.data() } as Task;\n\n        // Filter out soft-deleted parent tasks\n        if (task.isDeleted) return;\n\n        // Filter out past incomplete recurring tasks (don't carry forward)\n        if (task.isRepeating && task.status !== 'completed' && !task.completed) {\n          const taskDate = task.startDate?.split('T')[0];\n          if (taskDate && taskDate < today) {\n            return; // Skip past incomplete recurring tasks\n          }\n        }\n\n        loadedTasks.push(task);\n      });\n\n      setTasks(loadedTasks);\n    } catch (error) {\n      console.error('Error loading tasks:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAddTask = async (e: React.FormEvent) => {\n    e.preventDefault();\n    console.log('Form submitted!', formData);\n\n    if (!user) {\n      console.error('No user found!');\n      alert('You must be logged in to create a task');\n      return;\n    }\n\n    try {\n      const db = getFirestore();\n\n      // Parse tags from comma-separated string\n      const tagArray = formData.tags\n        .split(',')\n        .map(tag => tag.trim())\n        .filter(tag => tag.length > 0);\n\n      // Use today's date if startDate is not set\n      const now = new Date();\n      const today = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')}`;\n      const taskStartDate = formData.startDate || today;\n\n      const taskData = {\n        title: formData.title,\n        description: formData.description,\n        startDate: taskStartDate,\n        startTime: formData.startTime || null,\n        priority: formData.priority,\n        tags: tagArray,\n        isRepeating: formData.isRepeating,\n        repeatFrequency: formData.isRepeating ? formData.repeatFrequency : null,\n        repeatEndDate: formData.isRepeating ? formData.repeatEndDate : null,\n        status: 'todo',\n        userId: user.uid,\n        createdAt: Timestamp.now(),\n        mode: formData.mode || 'personal'\n      };\n\n      if (editingTask) {\n        // Update existing task\n        const taskRef = doc(db, 'tasks', editingTask.id);\n        await updateDoc(taskRef, taskData);\n        console.log('Task updated successfully');\n        alert('Task updated successfully!');\n      } else {\n        // Create new task\n        const tasksRef = collection(db, 'tasks');\n        const docRef = await addDoc(tasksRef, taskData);\n        console.log('Task created successfully with ID:', docRef.id);\n        alert('Task created successfully!');\n      }\n\n      // Reset form\n      setFormData({\n        title: '',\n        description: '',\n        startDate: today, // Default to today\n        startTime: '',\n        priority: 'medium',\n        tags: '',\n        isRepeating: false,\n        repeatFrequency: 'daily',\n        repeatEndDate: '',\n        mode: 'personal'\n      });\n      setShowAddForm(false);\n      setEditingTask(null);\n\n      // Reload tasks\n      await loadTasks(user.uid);\n    } catch (error: any) {\n      console.error('Error saving task:', error);\n      alert(`Failed to save task: ${error.message}`);\n    }\n  };\n\n  const handleEditTask = (task: Task) => {\n    const now = new Date();\n    const today = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')}`;\n\n    setEditingTask(task);\n    setFormData({\n      title: task.title,\n      description: task.description || '',\n      startDate: task.startDate || today, // Default to today if not set\n      startTime: task.startTime || '',\n      priority: task.priority,\n      tags: task.tags ? task.tags.join(', ') : '',\n      isRepeating: task.isRepeating || false,\n      repeatFrequency: task.repeatFrequency || 'daily',\n      repeatEndDate: task.repeatEndDate || '',\n      mode: (task.mode as any) || 'personal'\n    });\n    setShowAddForm(true);\n\n    // Scroll to form smoothly after a brief delay to allow React to render\n    setTimeout(() => {\n      formRef.current?.scrollIntoView({ behavior: 'smooth', block: 'start' });\n    }, 100);\n  };\n\n  const getNextOccurrenceDate = (currentDate: string, frequency: 'daily' | 'weekly' | 'monthly'): string => {\n    const date = new Date(currentDate);\n    switch (frequency) {\n      case 'daily':\n        date.setDate(date.getDate() + 1);\n        break;\n      case 'weekly':\n        date.setDate(date.getDate() + 7);\n        break;\n      case 'monthly':\n        date.setMonth(date.getMonth() + 1);\n        break;\n    }\n    return date.toISOString().split('T')[0];\n  };\n\n  const shouldCreateNextOccurrence = (task: Task): boolean => {\n    if (!task.isRepeating || !task.repeatFrequency) return false;\n    if (task.repeatEndDate) {\n      const endDate = new Date(task.repeatEndDate);\n      const nextDate = new Date(getNextOccurrenceDate(task.startDate, task.repeatFrequency));\n      return nextDate <= endDate;\n    }\n    return true; // No end date, repeat indefinitely\n  };\n\n  const handleToggleComplete = async (task: Task) => {\n    try {\n      const db = getFirestore();\n      const taskRef = doc(db, 'tasks', task.id);\n      const newStatus = task.status === 'completed' ? 'todo' : 'completed';\n\n      await updateDoc(taskRef, {\n        status: newStatus,\n        completed: newStatus === 'completed',\n        completedAt: newStatus === 'completed' ? new Date() : null,\n        updatedAt: new Date()\n      });\n\n      // If task is being marked as complete and is repeating, create next occurrence\n      if (newStatus === 'completed' && shouldCreateNextOccurrence(task)) {\n        const nextDate = getNextOccurrenceDate(task.startDate, task.repeatFrequency!);\n        const now = new Date();\n        const today = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')}`;\n\n        // Only create if next occurrence is in the future or today\n        if (nextDate >= today) {\n          const nextTaskData = {\n            title: task.title,\n            description: task.description,\n            startDate: nextDate,\n            startTime: task.startTime || null,\n            status: 'todo',\n            priority: task.priority,\n            tags: task.tags || [],\n            isRepeating: task.isRepeating,\n            repeatFrequency: task.repeatFrequency,\n            repeatEndDate: task.repeatEndDate || null,\n            userId: task.userId,\n            createdAt: Timestamp.now(),\n            completed: false\n          };\n\n          await addDoc(collection(db, 'tasks'), nextTaskData);\n        }\n      }\n\n      if (user) {\n        loadTasks(user.uid);\n      }\n    } catch (error) {\n      console.error('Error toggling task:', error);\n      alert('Failed to update task');\n    }\n  };\n\n\n  const [deleteConfirmation, setDeleteConfirmation] = useState<{ show: boolean; taskId: string | null }>({\n    show: false,\n    taskId: null\n  });\n\n  // ... (existing useEffect)\n\n  // ... (existing loadTasks)\n\n  // ... (existing handleAddTask)\n\n  // ... (existing handleEditTask)\n\n  // ... (existing getNextOccurrenceDate)\n\n  // ... (existing shouldCreateNextOccurrence)\n\n  // ... (existing handleToggleComplete)\n\n  const confirmDeleteTask = (taskId: string) => {\n    setDeleteConfirmation({ show: true, taskId });\n  };\n\n  const handleDeleteTask = async () => {\n    if (!deleteConfirmation.taskId) return;\n\n    const taskId = deleteConfirmation.taskId;\n    const taskToDelete = tasks.find(t => t.id === taskId);\n    setDeleteConfirmation({ show: false, taskId: null });\n\n    try {\n      const db = getFirestore();\n\n      if (taskToDelete?.isRepeating && taskToDelete.startDate) {\n        // Find all occurrences of this recurring task\n        const allOccurrences = tasks\n          .filter(t =>\n            t.isRepeating &&\n            t.title === taskToDelete.title &&\n            t.repeatFrequency === taskToDelete.repeatFrequency &&\n            t.userId === taskToDelete.userId\n          )\n          .sort((a, b) => a.startDate.localeCompare(b.startDate));\n\n        const parentTask = allOccurrences[0];\n        const isParentTask = parentTask.id === taskId;\n        const occurrenceDate = taskToDelete.startDate.split('T')[0];\n\n        if (isParentTask) {\n          // Soft delete the parent task - keep it in DB but mark as deleted\n          const parentRef = doc(db, 'tasks', taskId);\n          const deletedOccurrences = parentTask.deletedOccurrences || [];\n\n          await updateDoc(parentRef, {\n            isDeleted: true,\n            deletedOccurrences: [...deletedOccurrences, occurrenceDate]\n          });\n        } else {\n          // Update parent's deletedOccurrences and hard delete this occurrence\n          const parentRef = doc(db, 'tasks', parentTask.id);\n          const deletedOccurrences = parentTask.deletedOccurrences || [];\n\n          if (!deletedOccurrences.includes(occurrenceDate)) {\n            await updateDoc(parentRef, {\n              deletedOccurrences: [...deletedOccurrences, occurrenceDate]\n            });\n          }\n\n          // Hard delete the occurrence\n          const taskRef = doc(db, 'tasks', taskId);\n          await deleteDoc(taskRef);\n        }\n      } else {\n        // Non-recurring task - just delete it\n        const taskRef = doc(db, 'tasks', taskId);\n        await deleteDoc(taskRef);\n      }\n\n      // Reload tasks\n      if (user) {\n        loadTasks(user.uid);\n      }\n    } catch (error) {\n      console.error('Error deleting task:', error);\n      alert('Failed to delete task');\n    }\n  };\n\n  const handleLogout = async () => {\n    try {\n      const auth = getAuth();\n      await signOut(auth);\n      navigate('/login');\n    } catch (error) {\n      console.error('Logout error:', error);\n    }\n  };\n\n  const formatDateTime = (date: string, time?: string) => {\n    if (!date) return '';\n    const dateObj = new Date(date);\n    const dateStr = dateObj.toLocaleDateString();\n    if (time) {\n      return `${dateStr} ${time}`;\n    }\n    return dateStr;\n  };\n\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case 'high': return 'bg-red-100 text-red-800';\n      case 'medium': return 'bg-yellow-100 text-yellow-800';\n      case 'low': return 'bg-green-100 text-green-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const getPriorityValue = (priority: string): number => {\n    switch (priority) {\n      case 'high': return 3;\n      case 'medium': return 2;\n      case 'low': return 1;\n      default: return 0;\n    }\n  };\n\n  const getFilteredAndSortedTasks = (): Task[] => {\n    // First, filter by status\n    let filteredTasks = [...tasks];\n\n    if (statusFilter === 'active') {\n      filteredTasks = filteredTasks.filter(t => t.status !== 'completed' && !t.completed);\n    } else if (statusFilter === 'completed') {\n      filteredTasks = filteredTasks.filter(t => t.status === 'completed' || t.completed);\n    }\n\n    // Filter by mode\n    if (modeFilter !== 'all') {\n      filteredTasks = filteredTasks.filter(task => {\n        const taskMode = task.mode || 'personal'; // default to personal for backward compatibility\n        return taskMode === modeFilter;\n      });\n    }\n\n    // Filter by date\n    if (dateFilter !== 'all') {\n      const now = new Date();\n      const today = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')}`;\n\n      filteredTasks = filteredTasks.filter(task => {\n        if (!task.startDate) return false;\n        const taskDate = task.startDate.split('T')[0];\n\n        if (dateFilter === 'today') {\n          return taskDate === today;\n        } else if (dateFilter === 'thisWeek') {\n          const taskDateObj = new Date(taskDate);\n          const todayObj = new Date(today);\n          const firstDayOfWeek = new Date(todayObj);\n          firstDayOfWeek.setDate(todayObj.getDate() - todayObj.getDay()); // Sunday\n          const lastDayOfWeek = new Date(todayObj);\n          lastDayOfWeek.setDate(todayObj.getDate() + (6 - todayObj.getDay())); // Saturday\n          return taskDateObj >= firstDayOfWeek && taskDateObj <= lastDayOfWeek;\n        } else if (dateFilter === 'thisMonth') {\n          const taskDateObj = new Date(taskDate);\n          const todayObj = new Date(today);\n          return taskDateObj.getMonth() === todayObj.getMonth() && taskDateObj.getFullYear() === todayObj.getFullYear();\n        } else if (dateFilter === 'custom') {\n          if (customDateStart && taskDate < customDateStart) return false;\n          if (customDateEnd && taskDate > customDateEnd) return false;\n          return true;\n        }\n        return true;\n      });\n    }\n\n    // Separate completed and active tasks\n    const completedTasks = filteredTasks.filter(t => t.status === 'completed' || t.completed);\n    const activeTasks = filteredTasks.filter(t => t.status !== 'completed' && !t.completed);\n\n    // Sort active tasks based on selected sort option\n    let sortedActiveTasks: Task[] = [];\n\n    switch (sortBy) {\n      case 'priority':\n        sortedActiveTasks = activeTasks.sort((a, b) => getPriorityValue(b.priority) - getPriorityValue(a.priority));\n        break;\n\n      case 'time':\n        sortedActiveTasks = activeTasks.sort((a, b) => {\n          if (!a.startDate && !b.startDate) return 0;\n          if (!a.startDate) return 1;\n          if (!b.startDate) return -1;\n\n          const dateCompare = a.startDate.localeCompare(b.startDate);\n          if (dateCompare !== 0) return dateCompare;\n\n          // If same date, sort by time\n          const timeA = a.startTime || '23:59';\n          const timeB = b.startTime || '23:59';\n          return timeA.localeCompare(timeB);\n        });\n        break;\n\n      case 'deadline':\n        sortedActiveTasks = activeTasks.sort((a, b) => {\n          // Tasks with dates come first, sorted by earliest date\n          if (!a.startDate && !b.startDate) return 0;\n          if (!a.startDate) return 1; // Tasks without dates go to end\n          if (!b.startDate) return -1;\n\n          return a.startDate.localeCompare(b.startDate); // Nearest date first\n        });\n        break;\n\n      case 'date':\n        sortedActiveTasks = activeTasks.sort((a, b) => {\n          // Sort by date (ascending - earliest first)\n          if (!a.startDate && !b.startDate) return 0;\n          if (!a.startDate) return 1; // Tasks without dates go to end\n          if (!b.startDate) return -1;\n\n          return a.startDate.localeCompare(b.startDate);\n        });\n        break;\n\n      default:\n        sortedActiveTasks = activeTasks;\n    }\n\n    // Sort completed tasks by completion date (most recent first) or by same criteria\n    const sortedCompletedTasks = completedTasks.sort((a, b) => {\n      // If both have completion dates, sort by most recent\n      const aCompleted = (a as any).completedAt;\n      const bCompleted = (b as any).completedAt;\n\n      if (aCompleted && bCompleted) {\n        return new Date(bCompleted).getTime() - new Date(aCompleted).getTime();\n      }\n\n      // Otherwise sort by priority\n      return getPriorityValue(b.priority) - getPriorityValue(a.priority);\n    });\n\n    // Return active tasks first, then completed tasks\n    return [...sortedActiveTasks, ...sortedCompletedTasks];\n  };\n\n  const sortedTasks = getFilteredAndSortedTasks();\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* ... (Header) ... */}\n      <div className=\"bg-white shadow\">\n        <div className=\"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8\">\n          <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center py-4 sm:py-6 gap-3 sm:gap-0\">\n            <div>\n              <h1 className=\"text-2xl sm:text-3xl font-bold text-gray-900\">Tasks</h1>\n            </div>\n            <div className=\"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-4 w-full sm:w-auto\">\n              <Link to=\"/\" className=\"text-sm text-gray-600 hover:text-gray-900 text-center sm:text-left\">\n                ‚Üê Back to Dashboard\n              </Link>\n              <button\n                onClick={handleLogout}\n                className=\"w-full sm:w-auto px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700\"\n              >\n                Logout\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-4 sm:py-8\">\n        {/* Add Task Button */}\n        <div className=\"mb-6\">\n          <button\n            onClick={() => {\n              setShowAddForm(!showAddForm);\n              setEditingTask(null);\n              setFormData({\n                title: '',\n                description: '',\n                startDate: '',\n                startTime: '',\n                priority: 'medium',\n                tags: '',\n                isRepeating: false,\n                repeatFrequency: 'daily',\n                repeatEndDate: '',\n                mode: 'personal'\n              });\n            }}\n            className=\"w-full sm:w-auto px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-medium\"\n          >\n            {showAddForm ? '‚úï Cancel' : '+ Add New Task'}\n          </button>\n        </div>\n\n        {/* Add/Edit Task Form */}\n        {showAddForm && (\n          <div ref={formRef} className=\"bg-white rounded-lg shadow p-6 mb-6\">\n            <h2 className=\"text-xl font-semibold mb-4\">\n              {editingTask ? 'Edit Task' : 'Create New Task'}\n            </h2>\n            <form onSubmit={handleAddTask} className=\"space-y-4\">\n              {/* ... (Form fields) ... */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Task Title *\n                </label>\n                <input\n                  type=\"text\"\n                  required\n                  value={formData.title}\n                  onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"Enter task title\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Description\n                </label>\n                <textarea\n                  value={formData.description}\n                  onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                  rows={3}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"Enter task description\"\n                />\n              </div>\n\n              {/* Start Date and Time */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Date\n                </label>\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                  <div>\n                    <input\n                      type=\"date\"\n                      value={formData.startDate}\n                      onChange={(e) => setFormData({ ...formData, startDate: e.target.value })}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    />\n                  </div>\n                  <div>\n                    <input\n                      type=\"time\"\n                      value={formData.startTime}\n                      onChange={(e) => setFormData({ ...formData, startTime: e.target.value })}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"Optional time\"\n                    />\n                    <p className=\"text-xs text-gray-500 mt-1\">Time is optional</p>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Priority\n                  </label>\n                  <select\n                    value={formData.priority}\n                    onChange={(e) => setFormData({ ...formData, priority: e.target.value as any })}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  >\n                    <option value=\"low\">Low</option>\n                    <option value=\"medium\">Medium</option>\n                    <option value=\"high\">High</option>\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Tags (comma-separated)\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={formData.tags}\n                    onChange={(e) => setFormData({ ...formData, tags: e.target.value })}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    placeholder=\"work, urgent, meeting\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Mode\n                  </label>\n                  <select\n                    value={formData.mode}\n                    onChange={(e) => setFormData({ ...formData, mode: e.target.value as 'personal' | 'professional' })}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  >\n                    <option value=\"personal\">üè† Personal</option>\n                    <option value=\"professional\">üíº Professional</option>\n                  </select>\n                </div>\n              </div>\n\n              {/* Repeating Task Section */}\n              <div className=\"border-t pt-4\">\n                <div className=\"flex items-center mb-4\">\n                  <input\n                    type=\"checkbox\"\n                    id=\"isRepeating\"\n                    checked={formData.isRepeating}\n                    onChange={(e) => setFormData({ ...formData, isRepeating: e.target.checked })}\n                    className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                  />\n                  <label htmlFor=\"isRepeating\" className=\"ml-2 block text-sm font-medium text-gray-700\">\n                    üîÑ Make this a repeating task\n                  </label>\n                </div>\n\n                {formData.isRepeating && (\n                  <div className=\"ml-6 space-y-3 bg-blue-50 p-4 rounded-md\">\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          Repeat Frequency\n                        </label>\n                        <select\n                          value={formData.repeatFrequency}\n                          onChange={(e) => setFormData({ ...formData, repeatFrequency: e.target.value as any })}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                        >\n                          <option value=\"daily\">Daily</option>\n                          <option value=\"weekly\">Weekly</option>\n                          <option value=\"monthly\">Monthly</option>\n                        </select>\n                      </div>\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          Repeat Until (End Date)\n                        </label>\n                        <input\n                          type=\"date\"\n                          value={formData.repeatEndDate}\n                          onChange={(e) => setFormData({ ...formData, repeatEndDate: e.target.value })}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                        />\n                      </div>\n                    </div>\n                    <p className=\"text-xs text-gray-600\">\n                      This task will repeat {formData.repeatFrequency}\n                      {formData.repeatEndDate && ` until ${new Date(formData.repeatEndDate).toLocaleDateString()}`}\n                    </p>\n                  </div>\n                )}\n              </div>\n\n              <div className=\"flex gap-2\">\n                <button\n                  type=\"submit\"\n                  className=\"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-medium\"\n                >\n                  {editingTask ? 'Update Task' : 'Create Task'}\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setShowAddForm(false);\n                    setEditingTask(null);\n                  }}\n                  className=\"px-6 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 font-medium\"\n                >\n                  Cancel\n                </button>\n              </div>\n            </form>\n          </div>\n        )}\n\n        {/* Tasks List */}\n        <div className=\"bg-white rounded-lg shadow\">\n          <div className=\"p-6 border-b border-gray-200\">\n            <h2 className=\"text-xl font-semibold mb-4\">Your Tasks ({sortedTasks.length})</h2>\n\n            {/* Status Tabs */}\n            <div className=\"flex border-b border-gray-200 mb-4\">\n              <button\n                onClick={() => setStatusFilter('all')}\n                className={`px-4 py-2 font-medium text-sm ${statusFilter === 'all'\n                  ? 'border-b-2 border-blue-600 text-blue-600'\n                  : 'text-gray-600 hover:text-gray-900'\n                  }`}\n              >\n                All ({tasks.length})\n              </button>\n              <button\n                onClick={() => setStatusFilter('active')}\n                className={`px-4 py-2 font-medium text-sm ${statusFilter === 'active'\n                  ? 'border-b-2 border-blue-600 text-blue-600'\n                  : 'text-gray-600 hover:text-gray-900'\n                  }`}\n              >\n                Active ({tasks.filter(t => t.status !== 'completed' && !t.completed).length})\n              </button>\n              <button\n                onClick={() => setStatusFilter('completed')}\n                className={`px-4 py-2 font-medium text-sm ${statusFilter === 'completed'\n                  ? 'border-b-2 border-blue-600 text-blue-600'\n                  : 'text-gray-600 hover:text-gray-900'\n                  }`}\n              >\n                Completed ({tasks.filter(t => t.status === 'completed' || t.completed).length})\n              </button>\n            </div>\n\n            {/* Mode Filter Tabs */}\n            <div className=\"flex border-b border-gray-200 mb-4\">\n              <button\n                onClick={() => {\n                  setModeFilter('all');\n                  localStorage.setItem('taskModeFilter', 'all');\n                }}\n                className={`px-4 py-2 font-medium text-sm ${modeFilter === 'all'\n                  ? 'border-b-2 border-green-600 text-green-600'\n                  : 'text-gray-600 hover:text-gray-900'\n                  }`}\n              >\n                All Modes\n              </button>\n              <button\n                onClick={() => {\n                  setModeFilter('personal');\n                  localStorage.setItem('taskModeFilter', 'personal');\n                }}\n                className={`px-4 py-2 font-medium text-sm ${modeFilter === 'personal'\n                  ? 'border-b-2 border-green-600 text-green-600'\n                  : 'text-gray-600 hover:text-gray-900'\n                  }`}\n              >\n                üè† Personal\n              </button>\n              <button\n                onClick={() => {\n                  setModeFilter('professional');\n                  localStorage.setItem('taskModeFilter', 'professional');\n                }}\n                className={`px-4 py-2 font-medium text-sm ${modeFilter === 'professional'\n                  ? 'border-b-2 border-green-600 text-green-600'\n                  : 'text-gray-600 hover:text-gray-900'\n                  }`}\n              >\n                üíº Professional\n              </button>\n            </div>\n\n            {/* Filters and Sort */}\n            <div className=\"flex flex-col sm:flex-row sm:flex-wrap items-stretch sm:items-center gap-3 sm:gap-4\">\n              {/* Date Filter */}\n              <div className=\"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 w-full sm:w-auto\">\n                <label className=\"text-sm font-medium text-gray-700\">Date:</label>\n                <select\n                  value={dateFilter}\n                  onChange={(e) => setDateFilter(e.target.value as 'all' | 'today' | 'thisWeek' | 'thisMonth' | 'custom')}\n                  className=\"w-full sm:w-auto px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                >\n                  <option value=\"all\">All Dates</option>\n                  <option value=\"today\">Today</option>\n                  <option value=\"thisWeek\">This Week</option>\n                  <option value=\"thisMonth\">This Month</option>\n                  <option value=\"custom\">Custom Range</option>\n                </select>\n              </div>\n\n              {/* Custom Date Range */}\n              {dateFilter === 'custom' && (\n                <div className=\"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 w-full sm:w-auto\">\n                  <input\n                    type=\"date\"\n                    value={customDateStart}\n                    onChange={(e) => setCustomDateStart(e.target.value)}\n                    placeholder=\"Start Date\"\n                    className=\"w-full sm:w-auto px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  />\n                  <span className=\"text-gray-500 text-center sm:text-left\">to</span>\n                  <input\n                    type=\"date\"\n                    value={customDateEnd}\n                    onChange={(e) => setCustomDateEnd(e.target.value)}\n                    placeholder=\"End Date\"\n                    className=\"w-full sm:w-auto px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n              )}\n\n              {/* Sort Dropdown */}\n              <div className=\"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 w-full sm:w-auto sm:ml-auto\">\n                <label className=\"text-sm font-medium text-gray-700\">Sort by:</label>\n                <select\n                  value={sortBy}\n                  onChange={(e) => setSortBy(e.target.value as 'priority' | 'time' | 'deadline' | 'date')}\n                  className=\"w-full sm:w-auto px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                >\n                  <option value=\"priority\">Priority (High to Low)</option>\n                  <option value=\"date\">Date (Earliest First)</option>\n                  <option value=\"time\">Date & Time</option>\n                  <option value=\"deadline\">Deadline (Nearest First)</option>\n                </select>\n              </div>\n            </div>\n          </div>\n\n          {loading ? (\n            <div className=\"p-8 text-center text-gray-500\">Loading tasks...</div>\n          ) : tasks.length === 0 ? (\n            <div className=\"p-8 text-center text-gray-500\">\n              No tasks yet. Click \"Add New Task\" to create one!\n            </div>\n          ) : sortedTasks.length === 0 ? (\n            <div className=\"p-8 text-center text-gray-500\">\n              No tasks match the selected filter.\n            </div>\n          ) : (\n            <div className=\"divide-y divide-gray-200\">\n              {sortedTasks.map((task) => (\n                <div key={task.id} className=\"p-3 sm:p-4 hover:bg-gray-50 flex flex-col sm:flex-row items-start gap-3\">\n                  <div className=\"flex items-start gap-3 w-full\">\n                    {/* Checkbox */}\n                    <input\n                      type=\"checkbox\"\n                      checked={task.status === 'completed'}\n                      onChange={() => handleToggleComplete(task)}\n                      className=\"mt-1 h-5 w-5 min-w-[20px] text-blue-600 rounded focus:ring-blue-500 cursor-pointer\"\n                    />\n\n                    {/* Task Content */}\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex flex-wrap items-center gap-2 mb-1\">\n                        <h3 className={`text-sm sm:text-base font-medium break-words ${task.status === 'completed' ? 'line-through text-gray-400' : 'text-gray-900'}`}>\n                          {task.title}\n                        </h3>\n                        <span className={`px-2 py-0.5 text-xs font-medium rounded whitespace-nowrap ${getPriorityColor(task.priority)}`}>\n                          {task.priority}\n                        </span>\n                        {task.isRepeating && (\n                          <span className=\"px-2 py-0.5 text-xs font-medium rounded bg-purple-100 text-purple-800 whitespace-nowrap\">\n                            üîÑ {task.repeatFrequency}\n                          </span>\n                        )}\n                        {modeFilter === 'all' && (\n                          <span className={`px-2 py-0.5 text-xs font-medium rounded whitespace-nowrap ${(task.mode || 'personal') === 'personal'\n                              ? 'bg-blue-100 text-blue-800'\n                              : 'bg-orange-100 text-orange-800'\n                            }`}>\n                            {(task.mode || 'personal') === 'personal' ? 'üè† Personal' : 'üíº Professional'}\n                          </span>\n                        )}\n                      </div>\n\n                      {task.description && (\n                        <p className={`text-xs sm:text-sm mb-1 break-words ${task.status === 'completed' ? 'text-gray-400' : 'text-gray-600'}`}>\n                          {task.description}\n                        </p>\n                      )}\n\n                      <div className=\"flex flex-wrap gap-2 sm:gap-3 text-xs text-gray-500 mb-1\">\n                        {task.startDate && (\n                          <span className=\"whitespace-nowrap\">\n                            üìÖ {formatDateTime(task.startDate, task.startTime)}\n                          </span>\n                        )}\n                        {task.isRepeating && task.repeatEndDate && (\n                          <span className=\"whitespace-nowrap\">\n                            üîö Until: {new Date(task.repeatEndDate).toLocaleDateString()}\n                          </span>\n                        )}\n                      </div>\n\n                      {task.tags && task.tags.length > 0 && (\n                        <div className=\"flex flex-wrap gap-1 mt-1\">\n                          {task.tags.map((tag, index) => (\n                            <span\n                              key={index}\n                              className=\"px-2 py-0.5 text-xs bg-indigo-100 text-indigo-800 rounded whitespace-nowrap\"\n                            >\n                              #{tag}\n                            </span>\n                          ))}\n                        </div>\n                      )}\n                    </div>\n                  </div>\n\n                  {/* Action Buttons */}\n                  <div className=\"flex sm:flex-col gap-2 w-full sm:w-auto ml-8 sm:ml-0\">\n                    <button\n                      onClick={() => handleEditTask(task)}\n                      className=\"flex-1 sm:flex-none px-3 py-1.5 sm:py-1 text-xs bg-gray-600 text-white rounded hover:bg-gray-700 whitespace-nowrap min-h-[44px] sm:min-h-0\"\n                    >\n                      Edit\n                    </button>\n                    <button\n                      onClick={() => confirmDeleteTask(task.id)}\n                      className=\"flex-1 sm:flex-none px-3 py-1.5 sm:py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700 whitespace-nowrap min-h-[44px] sm:min-h-0\"\n                    >\n                      Delete\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Delete Confirmation Modal */}\n      {deleteConfirmation.show && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\" onClick={() => setDeleteConfirmation({ show: false, taskId: null })}>\n          <div className=\"bg-white rounded-lg shadow-xl max-w-sm w-full p-6\" onClick={(e) => e.stopPropagation()}>\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Delete Task</h3>\n            <p className=\"text-gray-600 mb-6\">\n              Are you sure you want to delete this task? This action cannot be undone.\n            </p>\n            <div className=\"flex justify-end gap-3\">\n              <button\n                onClick={() => setDeleteConfirmation({ show: false, taskId: null })}\n                className=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 font-medium\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleDeleteTask}\n                className=\"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 font-medium\"\n              >\n                Delete\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["Tasks","navigate","useNavigate","searchParams","useSearchParams","formRef","useRef","tasks","setTasks","useState","loading","setLoading","showAddForm","setShowAddForm","editingTask","setEditingTask","user","setUser","sortBy","setSortBy","statusFilter","setStatusFilter","dateFilter","setDateFilter","customDateStart","setCustomDateStart","customDateEnd","setCustomDateEnd","modeFilter","setModeFilter","useEffect","filterParam","formData","setFormData","now","currentUser","getAuth","loadTasks","userId","db","getFirestore","tasksRef","collection","q","query","where","querySnapshot","getDocs","today","loadedTasks","doc","task","taskDate","error","handleAddTask","tagArray","tag","taskStartDate","taskData","Timestamp","taskRef","updateDoc","docRef","addDoc","handleEditTask","getNextOccurrenceDate","currentDate","frequency","date","shouldCreateNextOccurrence","endDate","handleToggleComplete","newStatus","nextDate","nextTaskData","deleteConfirmation","setDeleteConfirmation","confirmDeleteTask","taskId","handleDeleteTask","taskToDelete","t","parentTask","a","b","isParentTask","occurrenceDate","parentRef","deletedOccurrences","deleteDoc","handleLogout","auth","signOut","formatDateTime","time","dateStr","getPriorityColor","priority","getPriorityValue","sortedTasks","filteredTasks","taskDateObj","todayObj","firstDayOfWeek","lastDayOfWeek","completedTasks","activeTasks","sortedActiveTasks","dateCompare","timeA","timeB","sortedCompletedTasks","aCompleted","bCompleted","jsxs","jsx","Link","index"],"mappings":"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"}