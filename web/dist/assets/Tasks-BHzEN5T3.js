import{j as t}from"./index-CLqb-Mdm.js";import{u as je,c as ve,r as d,L as De}from"./router-Dhxk9fVh.js";import{g as te,a as D,f as R,q as Ne,w as ke,h as Te,T as Q,k as w,u as $,j as H,l as se,s as Se}from"./firebase-DKfP8a_B.js";import{p as ae,A as Ce}from"./project.service-DndGX1zK.js";import"./vendor-D3F3s8fL.js";import"./query-DYQ8p44K.js";function qe(){const re=je(),[A]=ve(),z=d.useRef(null),[f,le]=d.useState([]),[ne,V]=d.useState(!1),[N,k]=d.useState(!1),[G,M]=d.useState(!1),[T,S]=d.useState(null),[m,oe]=d.useState(null),[J,ie]=d.useState("priority"),[j,P]=d.useState("all"),[y,K]=d.useState(A.get("filter")||"all"),[q,ce]=d.useState(""),[I,de]=d.useState(""),[x,O]=d.useState(()=>localStorage.getItem("taskModeFilter")||"all"),[L,X]=d.useState([]),[b,C]=d.useState(void 0),[Y,W]=d.useState(!1);d.useEffect(()=>{const e=A.get("filter");e&&["all","today","thisWeek","thisMonth","custom"].includes(e)&&K(e)},[A]);const[r,g]=d.useState({title:"",description:"",startDate:(()=>{const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`})(),startTime:"",priority:"medium",tags:"",isRepeating:!1,repeatFrequency:"daily",repeatEndDate:"",mode:"personal"});d.useEffect(()=>{const a=te().currentUser;oe(a),a&&v(a.uid)},[]),d.useEffect(()=>{if(!m?.uid)return;if(x==="all"){C(void 0),X([]);return}const e=ae.subscribeToProjects(m.uid,a=>{X(a),a.length===0&&ae.getOrCreateDefaultProject(m.uid,x)},{filters:{mode:x,isArchived:!1}});return()=>e()},[m?.uid,x]);const v=async e=>{V(!0);try{const a=D(),l=R(a,"tasks"),i=Ne(l,ke("userId","==",e)),p=await Te(i),s=new Date,n=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`,o=[];p.forEach(c=>{const u={id:c.id,...c.data()};if(!u.isDeleted){if(u.isRepeating&&u.status!=="completed"&&!u.completed){const h=u.startDate?.split("T")[0];if(h&&h<n)return}o.push(u)}}),le(o)}catch(a){console.error("Error loading tasks:",a)}finally{V(!1)}},ue=async e=>{if(e.preventDefault(),console.log("Form submitted!",r),!m){console.error("No user found!"),alert("You must be logged in to create a task");return}try{const a=D(),l=r.tags.split(",").map(o=>o.trim()).filter(o=>o.length>0),i=new Date,p=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(i.getDate()).padStart(2,"0")}`,s=r.startDate||p,n={title:r.title,description:r.description,startDate:s,startTime:r.startTime||null,priority:r.priority,tags:l,isRepeating:r.isRepeating,repeatFrequency:r.isRepeating?r.repeatFrequency:null,repeatEndDate:r.isRepeating?r.repeatEndDate:null,status:"todo",userId:m.uid,createdAt:Q.now(),mode:r.mode||"personal"};if(T){const o=w(a,"tasks",T.id);await $(o,n),console.log("Task updated successfully"),alert("Task updated successfully!")}else{const o=R(a,"tasks"),c=await H(o,n);console.log("Task created successfully with ID:",c.id),alert("Task created successfully!")}g({title:"",description:"",startDate:p,startTime:"",priority:"medium",tags:"",isRepeating:!1,repeatFrequency:"daily",repeatEndDate:"",mode:"personal"}),k(!1),S(null),await v(m.uid)}catch(a){console.error("Error saving task:",a),alert(`Failed to save task: ${a.message}`)}},me=async e=>{if(!m){alert("You must be logged in to create a task");return}try{const a=D(),l={title:e.title,description:e.description,startDate:e.startDate,startTime:e.startTime||null,priority:e.priority,tags:e.tags,isRepeating:e.isRepeating,repeatFrequency:e.isRepeating?e.repeatFrequency:null,repeatEndDate:e.isRepeating?e.repeatEndDate:null,status:"todo",userId:m.uid,createdAt:Q.now(),mode:e.mode||"personal",subtasks:e.subtasks||[]};await H(R(a,"tasks"),l),M(!1),await v(m.uid)}catch(a){console.error("Error saving task:",a),alert(`Failed to save task: ${a.message}`)}},pe=e=>{const a=new Date,l=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`;S(e),g({title:e.title,description:e.description||"",startDate:e.startDate||l,startTime:e.startTime||"",priority:e.priority,tags:e.tags?e.tags.join(", "):"",isRepeating:e.isRepeating||!1,repeatFrequency:e.repeatFrequency||"daily",repeatEndDate:e.repeatEndDate||"",mode:e.mode||"personal"}),k(!0),setTimeout(()=>{z.current?.scrollIntoView({behavior:"smooth",block:"start"})},100)},Z=(e,a)=>{const l=new Date(e);switch(a){case"daily":l.setDate(l.getDate()+1);break;case"weekly":l.setDate(l.getDate()+7);break;case"monthly":l.setMonth(l.getMonth()+1);break}return l.toISOString().split("T")[0]},ge=e=>{if(!e.isRepeating||!e.repeatFrequency)return!1;if(e.repeatEndDate){const a=new Date(e.repeatEndDate);return new Date(Z(e.startDate,e.repeatFrequency))<=a}return!0},xe=async e=>{try{const a=D(),l=w(a,"tasks",e.id),i=e.status==="completed"?"todo":"completed";if(await $(l,{status:i,completed:i==="completed",completedAt:i==="completed"?new Date:null,updatedAt:new Date}),i==="completed"&&ge(e)){const p=Z(e.startDate,e.repeatFrequency),s=new Date,n=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`;if(p>=n){const o={title:e.title,description:e.description,startDate:p,startTime:e.startTime||null,status:"todo",priority:e.priority,tags:e.tags||[],isRepeating:e.isRepeating,repeatFrequency:e.repeatFrequency,repeatEndDate:e.repeatEndDate||null,userId:e.userId,createdAt:Q.now(),completed:!1};await H(R(a,"tasks"),o)}}m&&v(m.uid)}catch(a){console.error("Error toggling task:",a),alert("Failed to update task")}},[B,F]=d.useState({show:!1,taskId:null}),he=e=>{F({show:!0,taskId:e})},fe=async()=>{if(!B.taskId)return;const e=B.taskId,a=f.find(l=>l.id===e);F({show:!1,taskId:null});try{const l=D();if(a?.isRepeating&&a.startDate){const p=f.filter(o=>o.isRepeating&&o.title===a.title&&o.repeatFrequency===a.repeatFrequency&&o.userId===a.userId).sort((o,c)=>o.startDate.localeCompare(c.startDate))[0],s=p.id===e,n=a.startDate.split("T")[0];if(s){const o=w(l,"tasks",e),c=p.deletedOccurrences||[];await $(o,{isDeleted:!0,deletedOccurrences:[...c,n]})}else{const o=w(l,"tasks",p.id),c=p.deletedOccurrences||[];c.includes(n)||await $(o,{deletedOccurrences:[...c,n]});const u=w(l,"tasks",e);await se(u)}}else{const i=w(l,"tasks",e);await se(i)}m&&v(m.uid)}catch(l){console.error("Error deleting task:",l),alert("Failed to delete task")}},ye=async()=>{try{const e=te();await Se(e),re("/login")}catch(e){console.error("Logout error:",e)}},be=(e,a)=>{if(!e)return"";const i=new Date(e).toLocaleDateString();return a?`${i} ${a}`:i},we=e=>{switch(e){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},E=e=>{switch(e){case"high":return 3;case"medium":return 2;case"low":return 1;default:return 0}},U=(()=>{let e=[...f];if(j==="active"?e=e.filter(s=>s.status!=="completed"&&!s.completed):j==="completed"&&(e=e.filter(s=>s.status==="completed"||s.completed)),x!=="all"&&(e=e.filter(s=>(s.mode||"personal")===x)),b&&(e=e.filter(s=>s.projectId===b)),y!=="all"){const s=new Date,n=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`;e=e.filter(o=>{if(!o.startDate)return!1;const c=o.startDate.split("T")[0];if(y==="today")return c===n;if(y==="thisWeek"){const u=new Date(c),h=new Date(n),_=new Date(h);_.setDate(h.getDate()-h.getDay());const ee=new Date(h);return ee.setDate(h.getDate()+(6-h.getDay())),u>=_&&u<=ee}else if(y==="thisMonth"){const u=new Date(c),h=new Date(n);return u.getMonth()===h.getMonth()&&u.getFullYear()===h.getFullYear()}else if(y==="custom")return!(q&&c<q||I&&c>I);return!0})}const a=e.filter(s=>s.status==="completed"||s.completed),l=e.filter(s=>s.status!=="completed"&&!s.completed);let i=[];switch(J){case"priority":i=l.sort((s,n)=>E(n.priority)-E(s.priority));break;case"time":i=l.sort((s,n)=>{if(!s.startDate&&!n.startDate)return 0;if(!s.startDate)return 1;if(!n.startDate)return-1;const o=s.startDate.localeCompare(n.startDate);if(o!==0)return o;const c=s.startTime||"23:59",u=n.startTime||"23:59";return c.localeCompare(u)});break;case"deadline":i=l.sort((s,n)=>!s.startDate&&!n.startDate?0:s.startDate?n.startDate?s.startDate.localeCompare(n.startDate):-1:1);break;case"date":i=l.sort((s,n)=>!s.startDate&&!n.startDate?0:s.startDate?n.startDate?s.startDate.localeCompare(n.startDate):-1:1);break;default:i=l}const p=a.sort((s,n)=>{const o=s.completedAt,c=n.completedAt;return o&&c?new Date(c).getTime()-new Date(o).getTime():E(n.priority)-E(s.priority)});return[...i,...p]})();return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx("div",{className:"bg-white shadow",children:t.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center py-4 sm:py-6 gap-3 sm:gap-0",children:[t.jsx("div",{children:t.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Tasks"})}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-4 w-full sm:w-auto",children:[t.jsx(De,{to:"/",className:"text-sm text-gray-600 hover:text-gray-900 text-center sm:text-left",children:"â† Back to Dashboard"}),t.jsx("button",{onClick:ye,className:"w-full sm:w-auto px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700",children:"Logout"})]})]})})}),t.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-4 sm:py-8",children:[t.jsx("div",{className:"mb-6",children:t.jsx("button",{onClick:()=>{k(!N),S(null),g({title:"",description:"",startDate:"",startTime:"",priority:"medium",tags:"",isRepeating:!1,repeatFrequency:"daily",repeatEndDate:"",mode:"personal"})},className:"w-full sm:w-auto px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-medium",children:N?"âœ• Cancel":"+ Add New Task"})}),N&&t.jsxs("div",{ref:z,className:"bg-white rounded-lg shadow p-6 mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:T?"Edit Task":"Create New Task"}),t.jsxs("form",{onSubmit:ue,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Title *"}),t.jsx("input",{type:"text",required:!0,value:r.title,onChange:e=>g({...r,title:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter task title"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),t.jsx("textarea",{value:r.description,onChange:e=>g({...r,description:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter task description"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsx("div",{children:t.jsx("input",{type:"date",value:r.startDate,onChange:e=>g({...r,startDate:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}),t.jsxs("div",{children:[t.jsx("input",{type:"time",value:r.startTime,onChange:e=>g({...r,startTime:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional time"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Time is optional"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),t.jsxs("select",{value:r.priority,onChange:e=>g({...r,priority:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"low",children:"Low"}),t.jsx("option",{value:"medium",children:"Medium"}),t.jsx("option",{value:"high",children:"High"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags (comma-separated)"}),t.jsx("input",{type:"text",value:r.tags,onChange:e=>g({...r,tags:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"work, urgent, meeting"})]})]}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mode"}),t.jsxs("select",{value:r.mode,onChange:e=>g({...r,mode:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"personal",children:"ðŸ  Personal"}),t.jsx("option",{value:"professional",children:"ðŸ’¼ Professional"})]})]})}),t.jsxs("div",{className:"border-t pt-4",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx("input",{type:"checkbox",id:"isRepeating",checked:r.isRepeating,onChange:e=>g({...r,isRepeating:e.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),t.jsx("label",{htmlFor:"isRepeating",className:"ml-2 block text-sm font-medium text-gray-700",children:"ðŸ”„ Make this a repeating task"})]}),r.isRepeating&&t.jsxs("div",{className:"ml-6 space-y-3 bg-blue-50 p-4 rounded-md",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Repeat Frequency"}),t.jsxs("select",{value:r.repeatFrequency,onChange:e=>g({...r,repeatFrequency:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"daily",children:"Daily"}),t.jsx("option",{value:"weekly",children:"Weekly"}),t.jsx("option",{value:"monthly",children:"Monthly"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Repeat Until (End Date)"}),t.jsx("input",{type:"date",value:r.repeatEndDate,onChange:e=>g({...r,repeatEndDate:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),t.jsxs("p",{className:"text-xs text-gray-600",children:["This task will repeat ",r.repeatFrequency,r.repeatEndDate&&` until ${new Date(r.repeatEndDate).toLocaleDateString()}`]})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-medium",children:T?"Update Task":"Create Task"}),t.jsx("button",{type:"button",onClick:()=>{k(!1),S(null)},className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 font-medium",children:"Cancel"})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsxs("div",{className:"p-6 border-b border-gray-200",children:[t.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Your Tasks (",U.length,")"]}),t.jsxs("div",{className:"flex border-b border-gray-200 mb-4",children:[t.jsxs("button",{onClick:()=>P("all"),className:`px-4 py-2 font-medium text-sm ${j==="all"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:["All (",f.length,")"]}),t.jsxs("button",{onClick:()=>P("active"),className:`px-4 py-2 font-medium text-sm ${j==="active"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:["Active (",f.filter(e=>e.status!=="completed"&&!e.completed).length,")"]}),t.jsxs("button",{onClick:()=>P("completed"),className:`px-4 py-2 font-medium text-sm ${j==="completed"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:["Completed (",f.filter(e=>e.status==="completed"||e.completed).length,")"]})]}),t.jsxs("div",{className:"flex border-b border-gray-200 mb-4",children:[t.jsx("button",{onClick:()=>{O("all"),localStorage.setItem("taskModeFilter","all")},className:`px-4 py-2 font-medium text-sm ${x==="all"?"border-b-2 border-green-600 text-green-600":"text-gray-600 hover:text-gray-900"}`,children:"All Modes"}),t.jsx("button",{onClick:()=>{O("personal"),localStorage.setItem("taskModeFilter","personal")},className:`px-4 py-2 font-medium text-sm ${x==="personal"?"border-b-2 border-green-600 text-green-600":"text-gray-600 hover:text-gray-900"}`,children:"ðŸ  Personal"}),t.jsx("button",{onClick:()=>{O("professional"),localStorage.setItem("taskModeFilter","professional")},className:`px-4 py-2 font-medium text-sm ${x==="professional"?"border-b-2 border-green-600 text-green-600":"text-gray-600 hover:text-gray-900"}`,children:"ðŸ’¼ Professional"})]}),x!=="all"&&L.length>0&&t.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[t.jsxs("button",{onClick:()=>W(!Y),className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:[t.jsx("span",{children:"ðŸ“"}),t.jsx("span",{className:"font-medium",children:b?L.find(e=>e.id===b)?.name||"Project":"All Projects"}),t.jsx("svg",{className:`w-4 h-4 transition-transform ${Y?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),b&&t.jsx("button",{onClick:()=>C(void 0),className:"text-xs text-gray-500 hover:text-gray-700",children:"Clear filter"})]}),Y&&x!=="all"&&t.jsx("div",{className:"mt-2 p-3 bg-gray-50 rounded-lg border border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("button",{onClick:()=>{C(void 0),W(!1)},className:`p-2 text-left text-sm rounded-md transition-colors ${b?"hover:bg-gray-100 text-gray-700":"bg-blue-100 text-blue-700 font-medium"}`,children:"ðŸ“‹ All Projects"}),L.map(e=>t.jsxs("button",{onClick:()=>{C(e.id),W(!1)},className:`p-2 text-left text-sm rounded-md transition-colors flex items-center gap-2 ${b===e.id?"bg-blue-100 text-blue-700 font-medium":"hover:bg-gray-100 text-gray-700"}`,children:[t.jsx("span",{style:{color:e.color},children:e.icon}),t.jsx("span",{className:"truncate",children:e.name}),t.jsx("span",{className:"ml-auto text-xs text-gray-400",children:e.taskCount})]},e.id))]})}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:flex-wrap items-stretch sm:items-center gap-3 sm:gap-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 w-full sm:w-auto",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Date:"}),t.jsxs("select",{value:y,onChange:e=>K(e.target.value),className:"w-full sm:w-auto px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"all",children:"All Dates"}),t.jsx("option",{value:"today",children:"Today"}),t.jsx("option",{value:"thisWeek",children:"This Week"}),t.jsx("option",{value:"thisMonth",children:"This Month"}),t.jsx("option",{value:"custom",children:"Custom Range"})]})]}),y==="custom"&&t.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 w-full sm:w-auto",children:[t.jsx("input",{type:"date",value:q,onChange:e=>ce(e.target.value),placeholder:"Start Date",className:"w-full sm:w-auto px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),t.jsx("span",{className:"text-gray-500 text-center sm:text-left",children:"to"}),t.jsx("input",{type:"date",value:I,onChange:e=>de(e.target.value),placeholder:"End Date",className:"w-full sm:w-auto px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 w-full sm:w-auto sm:ml-auto",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Sort by:"}),t.jsxs("select",{value:J,onChange:e=>ie(e.target.value),className:"w-full sm:w-auto px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"priority",children:"Priority (High to Low)"}),t.jsx("option",{value:"date",children:"Date (Earliest First)"}),t.jsx("option",{value:"time",children:"Date & Time"}),t.jsx("option",{value:"deadline",children:"Deadline (Nearest First)"})]})]})]})]}),ne?t.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading tasks..."}):f.length===0?t.jsx("div",{className:"p-8 text-center text-gray-500",children:'No tasks yet. Click "Add New Task" to create one!'}):U.length===0?t.jsx("div",{className:"p-8 text-center text-gray-500",children:"No tasks match the selected filter."}):t.jsx("div",{className:"divide-y divide-gray-200",children:U.map(e=>t.jsxs("div",{className:"p-3 sm:p-4 hover:bg-gray-50 flex flex-col sm:flex-row items-start gap-3",children:[t.jsxs("div",{className:"flex items-start gap-3 w-full",children:[t.jsx("input",{type:"checkbox",checked:e.status==="completed",onChange:()=>xe(e),className:"mt-1 h-5 w-5 min-w-[20px] text-blue-600 rounded focus:ring-blue-500 cursor-pointer"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-1",children:[t.jsx("h3",{className:`text-sm sm:text-base font-medium break-words ${e.status==="completed"?"line-through text-gray-400":"text-gray-900"}`,children:e.title}),t.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded whitespace-nowrap ${we(e.priority)}`,children:e.priority}),e.isRepeating&&t.jsxs("span",{className:"px-2 py-0.5 text-xs font-medium rounded bg-purple-100 text-purple-800 whitespace-nowrap",children:["ðŸ”„ ",e.repeatFrequency]}),x==="all"&&t.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded whitespace-nowrap ${(e.mode||"personal")==="personal"?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800"}`,children:(e.mode||"personal")==="personal"?"ðŸ  Personal":"ðŸ’¼ Professional"})]}),e.description&&t.jsx("p",{className:`text-xs sm:text-sm mb-1 break-words ${e.status==="completed"?"text-gray-400":"text-gray-600"}`,children:e.description}),t.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3 text-xs text-gray-500 mb-1",children:[e.startDate&&t.jsxs("span",{className:"whitespace-nowrap",children:["ðŸ“… ",be(e.startDate,e.startTime)]}),e.isRepeating&&e.repeatEndDate&&t.jsxs("span",{className:"whitespace-nowrap",children:["ðŸ”š Until: ",new Date(e.repeatEndDate).toLocaleDateString()]})]}),e.tags&&e.tags.length>0&&t.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.tags.map((a,l)=>t.jsxs("span",{className:"px-2 py-0.5 text-xs bg-indigo-100 text-indigo-800 rounded whitespace-nowrap",children:["#",a]},l))})]})]}),t.jsxs("div",{className:"flex sm:flex-col gap-2 w-full sm:w-auto ml-8 sm:ml-0",children:[t.jsx("button",{onClick:()=>pe(e),className:"flex-1 sm:flex-none px-3 py-1.5 sm:py-1 text-xs bg-gray-600 text-white rounded hover:bg-gray-700 whitespace-nowrap min-h-[44px] sm:min-h-0",children:"Edit"}),t.jsx("button",{onClick:()=>he(e.id),className:"flex-1 sm:flex-none px-3 py-1.5 sm:py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700 whitespace-nowrap min-h-[44px] sm:min-h-0",children:"Delete"})]})]},e.id))})]})]}),B.show&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>F({show:!1,taskId:null}),children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6",onClick:e=>e.stopPropagation(),children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Delete Task"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this task? This action cannot be undone."}),t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>F({show:!1,taskId:null}),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 font-medium",children:"Cancel"}),t.jsx("button",{onClick:fe,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 font-medium",children:"Delete"})]})]})}),!G&&!N&&t.jsx("button",{onClick:()=>M(!0),className:"fixed bottom-8 right-8 w-14 h-14 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 hover:shadow-xl transition-all duration-200 flex items-center justify-center z-50",title:"Quick Add Task",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),t.jsx(Ce,{isOpen:G,onSubmit:me,onCancel:()=>M(!1)})]})}export{qe as default};
//# sourceMappingURL=Tasks-BHzEN5T3.js.map
