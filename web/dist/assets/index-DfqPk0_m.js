const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-iumOXe0t.js","assets/firebase-DswfmbOb.js","assets/router-BQwT71Ls.js","assets/vendor-D3F3s8fL.js","assets/utils-B5tHn2_2.js","assets/index-DQqfGVke.js","assets/ui-BOVfd5SI.js","assets/query-UIen6-FV.js","assets/Tasks-BrUTKskO.js","assets/Analytics-oBd_ENny.js","assets/Widget-BaPsGC4s.js","assets/StickiesDemo-BiRjj2V8.js","assets/TodayStickiesWidget-B29xtU6o.js","assets/WidgetOnly-BuDPChuZ.js","assets/Login-DvptwNjr.js","assets/Register-4PS7YH2E.js","assets/HelpSupport-UgIq-Y59.js","assets/Settings-fgfANNkm.js"])))=>i.map(i=>d[i]);
import{r as je,a as Re,g as ye}from"./vendor-D3F3s8fL.js";import{R as O,r as w,u as we,L as ke,a as Le,b as De,c as Te,d as P,N as Ne,O as Ee,B as Ie}from"./router-BQwT71Ls.js";import{g as $,a as Oe,i as Ae,b as Me,c as Fe,d as ze,e as Ue,f as B,T as oe,h as T,u as V,j as ne,q as L,w as R,l as Be,k as A,m as W,s as ae,o as ie,n as Ve,p as We,r as Je}from"./firebase-DswfmbOb.js";import{r as He,Q as qe,a as $e}from"./query-UIen6-FV.js";import{c as N}from"./utils-B5tHn2_2.js";import{m as U,A as te}from"./ui-BOVfd5SI.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function t(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(n){if(n.ep)return;n.ep=!0;const a=t(n);fetch(n.href,a)}})();var G={exports:{}},M={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var le;function Xe(){if(le)return M;le=1;var r=je(),s=Symbol.for("react.element"),t=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,n=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(i,u,d){var h,l={},p=null,v=null;d!==void 0&&(p=""+d),u.key!==void 0&&(p=""+u.key),u.ref!==void 0&&(v=u.ref);for(h in u)o.call(u,h)&&!a.hasOwnProperty(h)&&(l[h]=u[h]);if(i&&i.defaultProps)for(h in u=i.defaultProps,u)l[h]===void 0&&(l[h]=u[h]);return{$$typeof:s,type:i,key:p,ref:v,props:l,_owner:n.current}}return M.Fragment=t,M.jsx=c,M.jsxs=c,M}var ce;function Qe(){return ce||(ce=1,G.exports=Xe()),G.exports}var e=Qe(),J={},de;function Ge(){if(de)return J;de=1;var r=Re();return J.createRoot=r.createRoot,J.hydrateRoot=r.hydrateRoot,J}var Ke=Ge();const Ye=ye(Ke),Ze="modulepreload",et=function(r){return"/"+r},ue={},D=function(s,t,o){let n=Promise.resolve();if(t&&t.length>0){let u=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(l=>({status:"fulfilled",value:l}),l=>({status:"rejected",reason:l}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),i=c?.nonce||c?.getAttribute("nonce");n=u(t.map(d=>{if(d=et(d),d in ue)return;ue[d]=!0;const h=d.endsWith(".css"),l=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${l}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":Ze,h||(p.as="script"),p.crossOrigin="",p.href=d,i&&p.setAttribute("nonce",i),document.head.appendChild(p),h)return new Promise((v,j)=>{p.addEventListener("load",v),p.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(c){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=c,window.dispatchEvent(i),!i.defaultPrevented)throw c}return n.then(c=>{for(const i of c||[])i.status==="rejected"&&a(i.reason);return s().catch(a)})},tt={},he=r=>{let s;const t=new Set,o=(h,l)=>{const p=typeof h=="function"?h(s):h;if(!Object.is(p,s)){const v=s;s=l??(typeof p!="object"||p===null)?p:Object.assign({},s,p),t.forEach(j=>j(s,v))}},n=()=>s,u={setState:o,getState:n,getInitialState:()=>d,subscribe:h=>(t.add(h),()=>t.delete(h)),destroy:()=>{(tt?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},d=s=r(o,n,u);return u},rt=r=>r?he(r):he;var K={exports:{}},Y={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var me;function st(){if(me)return Y;me=1;var r=je(),s=He();function t(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var o=typeof Object.is=="function"?Object.is:t,n=s.useSyncExternalStore,a=r.useRef,c=r.useEffect,i=r.useMemo,u=r.useDebugValue;return Y.useSyncExternalStoreWithSelector=function(d,h,l,p,v){var j=a(null);if(j.current===null){var f={hasValue:!1,value:null};j.current=f}else f=j.current;j=i(function(){function k(b){if(!g){if(g=!0,y=b,b=p(b),v!==void 0&&f.hasValue){var m=f.value;if(v(m,b))return _=m}return _=b}if(m=_,o(y,b))return m;var I=p(b);return v!==void 0&&v(m,I)?(y=b,m):(y=b,_=I)}var g=!1,y,_,E=l===void 0?null:l;return[function(){return k(h())},E===null?void 0:function(){return k(E())}]},[h,l,p,v]);var x=n(d,j[0],j[1]);return c(function(){f.hasValue=!0,f.value=x},[x]),u(x),x},Y}var pe;function ot(){return pe||(pe=1,K.exports=st()),K.exports}var nt=ot();const at=ye(nt),_e={},{useDebugValue:it}=O,{useSyncExternalStoreWithSelector:lt}=at;let fe=!1;const ct=r=>r;function dt(r,s=ct,t){(_e?"production":void 0)!=="production"&&t&&!fe&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),fe=!0);const o=lt(r.subscribe,r.getState,r.getServerState||r.getInitialState,s,t);return it(o),o}const ut=r=>{(_e?"production":void 0)!=="production"&&typeof r!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const s=typeof r=="function"?rt(r):r,t=(o,n)=>dt(s,o,n);return Object.assign(t,s),t},Ce=r=>ut,ht={};function re(r,s){let t;try{t=r()}catch{return}return{getItem:n=>{var a;const c=u=>u===null?null:JSON.parse(u,void 0),i=(a=t.getItem(n))!=null?a:null;return i instanceof Promise?i.then(c):c(i)},setItem:(n,a)=>t.setItem(n,JSON.stringify(a,void 0)),removeItem:n=>t.removeItem(n)}}const z=r=>s=>{try{const t=r(s);return t instanceof Promise?t:{then(o){return z(o)(t)},catch(o){return this}}}catch(t){return{then(o){return this},catch(o){return z(o)(t)}}}},mt=(r,s)=>(t,o,n)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:x=>x,version:0,merge:(x,k)=>({...k,...x}),...s},c=!1;const i=new Set,u=new Set;let d;try{d=a.getStorage()}catch{}if(!d)return r((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),t(...x)},o,n);const h=z(a.serialize),l=()=>{const x=a.partialize({...o()});let k;const g=h({state:x,version:a.version}).then(y=>d.setItem(a.name,y)).catch(y=>{k=y});if(k)throw k;return g},p=n.setState;n.setState=(x,k)=>{p(x,k),l()};const v=r((...x)=>{t(...x),l()},o,n);let j;const f=()=>{var x;if(!d)return;c=!1,i.forEach(g=>g(o()));const k=((x=a.onRehydrateStorage)==null?void 0:x.call(a,o()))||void 0;return z(d.getItem.bind(d))(a.name).then(g=>{if(g)return a.deserialize(g)}).then(g=>{if(g)if(typeof g.version=="number"&&g.version!==a.version){if(a.migrate)return a.migrate(g.state,g.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return g.state}).then(g=>{var y;return j=a.merge(g,(y=o())!=null?y:v),t(j,!0),l()}).then(()=>{k?.(j,void 0),c=!0,u.forEach(g=>g(j))}).catch(g=>{k?.(void 0,g)})};return n.persist={setOptions:x=>{a={...a,...x},x.getStorage&&(d=x.getStorage())},clearStorage:()=>{d?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>f(),hasHydrated:()=>c,onHydrate:x=>(i.add(x),()=>{i.delete(x)}),onFinishHydration:x=>(u.add(x),()=>{u.delete(x)})},f(),j||v},pt=(r,s)=>(t,o,n)=>{let a={storage:re(()=>localStorage),partialize:f=>f,version:0,merge:(f,x)=>({...x,...f}),...s},c=!1;const i=new Set,u=new Set;let d=a.storage;if(!d)return r((...f)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),t(...f)},o,n);const h=()=>{const f=a.partialize({...o()});return d.setItem(a.name,{state:f,version:a.version})},l=n.setState;n.setState=(f,x)=>{l(f,x),h()};const p=r((...f)=>{t(...f),h()},o,n);n.getInitialState=()=>p;let v;const j=()=>{var f,x;if(!d)return;c=!1,i.forEach(g=>{var y;return g((y=o())!=null?y:p)});const k=((x=a.onRehydrateStorage)==null?void 0:x.call(a,(f=o())!=null?f:p))||void 0;return z(d.getItem.bind(d))(a.name).then(g=>{if(g)if(typeof g.version=="number"&&g.version!==a.version){if(a.migrate)return[!0,a.migrate(g.state,g.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,g.state];return[!1,void 0]}).then(g=>{var y;const[_,E]=g;if(v=a.merge(E,(y=o())!=null?y:p),t(v,!0),_)return h()}).then(()=>{k?.(v,void 0),v=o(),c=!0,u.forEach(g=>g(v))}).catch(g=>{k?.(void 0,g)})};return n.persist={setOptions:f=>{a={...a,...f},f.storage&&(d=f.storage)},clearStorage:()=>{d?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>j(),hasHydrated:()=>c,onHydrate:f=>(i.add(f),()=>{i.delete(f)}),onFinishHydration:f=>(u.add(f),()=>{u.delete(f)})},a.skipHydration||j(),v||p},ft=(r,s)=>"getStorage"in s||"serialize"in s||"deserialize"in s?((ht?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),mt(r,s)):pt(r,s),Se=ft,X=Ce()(Se((r,s)=>({user:null,isAuthenticated:!1,isLoading:!1,error:null,setUser:t=>{r({user:t,isAuthenticated:!!t,error:null})},setLoading:t=>{r({isLoading:t})},setError:t=>{r({error:t,isLoading:!1})},login:t=>{r({user:t,isAuthenticated:!0,isLoading:!1,error:null})},logout:()=>{r({user:null,isAuthenticated:!1,isLoading:!1,error:null})},updateUser:t=>{const o=s().user;o&&r({user:{...o,...t},error:null})},clearError:()=>{r({error:null})}}),{name:"taskflow-auth",storage:re(()=>localStorage),partialize:r=>({user:r.user,isAuthenticated:r.isAuthenticated}),onRehydrateStorage:()=>r=>{r&&console.log("ðŸ”„ Auth state rehydrated")}})),xt={isEmailVerified:r=>r.user?.emailVerified||!1},gt=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),vt=()=>typeof window>"u"?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",xe=r=>{switch(r){case"dark":return!0;case"light":return!1;case"system":return vt()==="dark";default:return!1}},Q=Ce()(Se((r,s)=>({theme:"system",isDarkMode:xe("system"),sidebarOpen:!1,sidebarCollapsed:!1,modal:{isOpen:!1,type:null,props:void 0},notifications:[],loading:{},searchQuery:"",searchFocused:!1,activeFilters:{},sortBy:"updatedAt",sortOrder:"desc",currentPage:1,itemsPerPage:20,setTheme:t=>{const o=xe(t);r({theme:t,isDarkMode:o}),typeof document<"u"&&document.documentElement.classList.toggle("dark",o)},toggleTheme:()=>{const t=s().theme;let o;switch(t){case"light":o="dark";break;case"dark":o="system";break;case"system":o="light";break;default:o="light"}s().setTheme(o)},setDarkMode:t=>{r({isDarkMode:t}),typeof document<"u"&&document.documentElement.classList.toggle("dark",t)},setSidebarOpen:t=>{r({sidebarOpen:t})},toggleSidebar:()=>{r(t=>({sidebarOpen:!t.sidebarOpen}))},setSidebarCollapsed:t=>{r({sidebarCollapsed:t})},toggleSidebarCollapsed:()=>{r(t=>({sidebarCollapsed:!t.sidebarCollapsed}))},openModal:(t,o)=>{r({modal:{isOpen:!0,type:t,props:o}})},closeModal:()=>{r({modal:{isOpen:!1,type:null,props:void 0}})},addNotification:t=>{const o={...t,id:gt(),createdAt:new Date};r(a=>({notifications:[...a.notifications,o]}));const n=t.duration??5e3;n>0&&setTimeout(()=>{s().removeNotification(o.id)},n)},removeNotification:t=>{r(o=>({notifications:o.notifications.filter(n=>n.id!==t)}))},clearNotifications:()=>{r({notifications:[]})},setLoading:(t,o)=>{r(n=>({loading:{...n.loading,[t]:o}}))},clearLoading:()=>{r({loading:{}})},setSearchQuery:t=>{r({searchQuery:t,currentPage:1})},setSearchFocused:t=>{r({searchFocused:t})},clearSearch:()=>{r({searchQuery:"",searchFocused:!1})},setFilters:t=>{r({activeFilters:t,currentPage:1})},updateFilter:(t,o)=>{r(n=>({activeFilters:{...n.activeFilters,[t]:o},currentPage:1}))},removeFilter:t=>{r(o=>{const n={...o.activeFilters};return delete n[t],{activeFilters:n,currentPage:1}})},clearFilters:()=>{r({activeFilters:{},currentPage:1})},setSorting:(t,o="desc")=>{r({sortBy:t,sortOrder:o,currentPage:1})},setCurrentPage:t=>{r({currentPage:t})},setItemsPerPage:t=>{r({itemsPerPage:t,currentPage:1})},resetPagination:()=>{r({currentPage:1})}}),{name:"taskflow-ui",storage:re(()=>localStorage),partialize:r=>({theme:r.theme,sidebarCollapsed:r.sidebarCollapsed,sortBy:r.sortBy,sortOrder:r.sortOrder,itemsPerPage:r.itemsPerPage}),onRehydrateStorage:()=>r=>{r&&(r.setTheme(r.theme),console.log("ðŸŽ¨ UI state rehydrated"))}}));typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",s=>{const t=Q.getState();t.theme==="system"&&t.setDarkMode(s.matches)});const bt="btn-base interactive focus:outline-none focus:ring-2 focus:ring-offset-2",jt={primary:"btn-primary",secondary:"btn-secondary",success:"btn-success",warning:"btn-warning",danger:"btn-danger",ghost:"btn-ghost",outline:"btn-outline"},yt={xs:"btn-xs",sm:"btn-sm",md:"btn-md",lg:"btn-lg",xl:"btn-xl"},wt=({size:r})=>{const s={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-4 h-4",lg:"w-5 h-5",xl:"w-6 h-6"}[r];return e.jsx("div",{className:N("loading-spinner",s)})},H=O.forwardRef(({variant:r="primary",size:s="md",loading:t=!1,leftIcon:o,rightIcon:n,fullWidth:a=!1,children:c,disabled:i,className:u,animate:d=!0,...h},l)=>{const p=N(bt,jt[r],yt[s],a&&"w-full",t&&"cursor-wait",i&&"opacity-50 cursor-not-allowed",u),v=e.jsxs(e.Fragment,{children:[t?e.jsx(wt,{size:s}):o&&e.jsx("span",{className:"flex-shrink-0 -ml-1 mr-2",children:o}),e.jsx("span",{className:t?"opacity-0":"opacity-100",children:c}),!t&&n&&e.jsx("span",{className:"flex-shrink-0 ml-2 -mr-1",children:n})]});return d&&!i&&!t?e.jsx(U.button,{ref:l,className:p,disabled:i||t,...h,whileHover:!i&&!t?{scale:1.02}:void 0,whileTap:!i&&!t?{scale:.98}:void 0,children:v}):e.jsx("button",{ref:l,className:p,disabled:i||t,...h,children:v})});H.displayName="Button";const kt={xs:"w-6 h-6 text-xs",sm:"w-8 h-8 text-sm",md:"w-10 h-10 text-base",lg:"w-12 h-12 text-lg",xl:"w-16 h-16 text-xl","2xl":"w-20 h-20 text-2xl"},Nt=r=>r.split(" ").map(s=>s.charAt(0)).join("").toUpperCase().slice(0,2),Et=({src:r,alt:s,name:t,size:o="md",className:n,fallback:a})=>{const[c,i]=O.useState(!1),[u,d]=O.useState(!1),h=N("relative inline-flex items-center justify-center rounded-full bg-gray-300 font-medium text-gray-700 overflow-hidden",kt[o],n),l=()=>{i(!0)},p=()=>{d(!0)},v=r&&!c,j=s||t||"User",f=t?Nt(t):"?";return e.jsx("span",{className:h,children:v?e.jsx("img",{src:r,alt:j,className:N("w-full h-full object-cover",!u&&"opacity-0"),onError:l,onLoad:p}):a||e.jsx("span",{className:"font-medium",children:f})})},_t={hidden:{opacity:0,scale:.95,y:-5},visible:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-5}},ge=({items:r,value:s,onSelect:t,placeholder:o="Select option...",disabled:n=!1,fullWidth:a=!1,searchable:c=!1,maxHeight:i="16rem",className:u,buttonClassName:d,menuClassName:h,children:l})=>{const[p,v]=w.useState(!1),[j,f]=w.useState(""),x=w.useRef(null),k=w.useRef(null),g=r.find(b=>b.value===s),y=c?r.filter(b=>b.label.toLowerCase().includes(j.toLowerCase())):r;w.useEffect(()=>{const b=m=>{x.current&&!x.current.contains(m.target)&&(v(!1),f(""))};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),w.useEffect(()=>{p&&c&&k.current&&k.current.focus()},[p,c]);const _=()=>{n||v(!p)},E=b=>{b.disabled||(t(b),v(!1),f(""))};return e.jsxs("div",{ref:x,className:N("relative",a?"w-full":"inline-block",u),children:[e.jsxs("button",{type:"button",onClick:_,disabled:n,className:N("flex items-center justify-between w-full px-3 py-2 text-left bg-white border border-gray-300 rounded-lg shadow-sm","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent","hover:bg-gray-50 transition-colors",n&&"opacity-50 cursor-not-allowed hover:bg-white",d),"aria-haspopup":"listbox","aria-expanded":p,children:[l||e.jsxs("span",{className:"flex items-center",children:[g?.icon&&e.jsx("span",{className:"mr-2 flex-shrink-0",children:g.icon}),e.jsx("span",{className:g?"text-gray-900":"text-gray-500",children:g?.label||o})]}),!l&&e.jsx("svg",{className:N("ml-2 h-5 w-5 text-gray-400 transition-transform",p&&"rotate-180"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsx(te,{children:p&&e.jsx(U.div,{variants:_t,initial:"hidden",animate:"visible",exit:"exit",transition:{duration:.15},className:N("absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg","ring-1 ring-black ring-opacity-5 focus:outline-none",h),style:{maxHeight:i},children:e.jsxs("div",{className:"overflow-auto",style:{maxHeight:i},children:[c&&e.jsx("div",{className:"p-2 border-b border-gray-200",children:e.jsx("input",{ref:k,type:"text",value:j,onChange:b=>f(b.target.value),placeholder:"Search...",className:"w-full px-3 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-primary-500"})}),e.jsx("div",{className:"py-1",role:"listbox",children:y.length===0?e.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No options found"}):y.map((b,m)=>e.jsxs(O.Fragment,{children:[b.divider&&m>0&&e.jsx("hr",{className:"border-gray-200"}),e.jsxs("button",{type:"button",onClick:()=>E(b),disabled:b.disabled,className:N("w-full px-3 py-2 text-left text-sm flex items-center","hover:bg-gray-100 focus:outline-none focus:bg-gray-100",b.disabled&&"opacity-50 cursor-not-allowed hover:bg-white",b.value===s&&"bg-primary-50 text-primary-900"),role:"option","aria-selected":b.value===s,children:[b.icon&&e.jsx("span",{className:"mr-2 flex-shrink-0",children:b.icon}),b.label,b.value===s&&e.jsx("svg",{className:"ml-auto h-4 w-4 text-primary-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]})]},b.id))})]})})})]})},Ct=({className:r,showSidebarToggle:s=!0,showSearch:t=!0,showNotifications:o=!0,showUserMenu:n=!0})=>{const{sidebarOpen:a,toggleSidebar:c,searchQuery:i,setSearchQuery:u,searchFocused:d,setSearchFocused:h,notifications:l,clearNotifications:p,removeNotification:v}=Q(),{user:j,isAuthenticated:f,logout:x}=X(),k=we(),g=[{id:"profile",label:"Profile Settings",value:"profile",icon:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})},{id:"settings",label:"Settings",value:"settings",icon:e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})},{id:"divider",label:"",value:"divider",divider:!0},{id:"logout",label:"Sign Out",value:"logout",icon:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}],y=m=>{u(m.target.value)},_=()=>{h(!0)},E=()=>{h(!1)},b=m=>{switch(m.value){case"profile":k("/settings");break;case"settings":k("/settings");break;case"logout":$().signOut().then(()=>{x(),k("/login")});break}};return e.jsxs("header",{className:N("header bg-white border-b border-gray-200 sticky top-0 z-40","flex items-center justify-between px-4 py-3 sm:px-6 lg:px-8",r),children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[s&&e.jsx(H,{variant:"ghost",size:"md",onClick:c,className:"lg:hidden","aria-label":a?"Close sidebar":"Open sidebar",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),e.jsx(ke,{to:"/",className:"flex items-center hover:opacity-80 transition-opacity",children:e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"TaskFlow"})})]}),t&&e.jsx("div",{className:"flex-1 max-w-2xl mx-8",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",value:i,onChange:y,onFocus:_,onBlur:E,className:N("block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg","placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent","transition-all duration-200 sm:text-sm",d&&"ring-2 ring-primary-500 border-transparent"),placeholder:"Search tasks, tags, or notes..."}),i&&e.jsx("div",{className:"absolute mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg z-10",children:e.jsxs("div",{className:"p-3 text-sm text-gray-500",children:['Search for "',i,'"...']})})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[o&&e.jsxs(ge,{items:l.length>0?[...l.map(m=>({id:m.id,label:m.title,value:m.id,icon:e.jsx("div",{className:N("w-2 h-2 rounded-full",m.type==="success"?"bg-green-500":m.type==="error"?"bg-red-500":m.type==="warning"?"bg-yellow-500":"bg-blue-500")})})),{id:"divider",label:"",value:"divider",divider:!0},{id:"clear",label:"Clear All",value:"clear",icon:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}]:[{id:"none",label:"No new notifications",value:"none",disabled:!0}],onSelect:m=>{m.value==="clear"?p():m.value!=="divider"&&m.value!=="none"&&v(m.value)},placeholder:"No notifications",buttonClassName:"relative p-2 rounded-lg hover:bg-gray-100 transition-colors border-none shadow-none",menuClassName:"w-80",children:[e.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),l.length>0&&e.jsx("span",{className:"absolute top-1 right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-[10px] font-bold text-white border-2 border-white",children:l.length})]}),n&&f&&j&&e.jsxs(ge,{items:g,onSelect:b,buttonClassName:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx(Et,{src:j.photoURL||void 0,name:j.displayName||j.email||void 0,size:"sm"}),e.jsx("span",{className:"hidden md:block text-sm font-medium text-gray-700",children:j.displayName||j.email}),e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),!f&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(H,{variant:"ghost",size:"md",children:"Sign In"}),e.jsx(H,{variant:"primary",size:"md",children:"Get Started"})]})]})]})},St={top:"bottom-full left-1/2 transform -translate-x-1/2 mb-2",bottom:"top-full left-1/2 transform -translate-x-1/2 mt-2",left:"right-full top-1/2 transform -translate-y-1/2 mr-2",right:"left-full top-1/2 transform -translate-y-1/2 ml-2"},Pt={top:"top-full left-1/2 transform -translate-x-1/2 border-l-transparent border-r-transparent border-b-transparent border-t-gray-900",bottom:"bottom-full left-1/2 transform -translate-x-1/2 border-l-transparent border-r-transparent border-t-transparent border-b-gray-900",left:"left-full top-1/2 transform -translate-y-1/2 border-t-transparent border-b-transparent border-r-transparent border-l-gray-900",right:"right-full top-1/2 transform -translate-y-1/2 border-t-transparent border-b-transparent border-l-transparent border-r-gray-900"},Rt=({children:r,content:s,position:t="top",delay:o=500,disabled:n=!1,className:a,contentClassName:c})=>{const[i,u]=w.useState(!1),[d,h]=w.useState({x:0,y:0}),l=w.useRef(null),p=w.useRef(null),v=w.useRef(),j=()=>{n||!s||(clearTimeout(v.current),v.current=setTimeout(()=>{u(!0),x()},o))},f=()=>{clearTimeout(v.current),u(!1)},x=()=>{if(!l.current)return;const y=l.current.getBoundingClientRect(),_=window.pageXOffset||document.documentElement.scrollLeft,E=window.pageYOffset||document.documentElement.scrollTop;let b=0,m=0;switch(t){case"top":b=y.left+_+y.width/2,m=y.top+E;break;case"bottom":b=y.left+_+y.width/2,m=y.bottom+E;break;case"left":b=y.left+_,m=y.top+E+y.height/2;break;case"right":b=y.right+_,m=y.top+E+y.height/2;break}h({x:b,y:m})};w.useEffect(()=>()=>{clearTimeout(v.current)},[]);const k={hidden:{opacity:0,scale:.8},visible:{opacity:1,scale:1},exit:{opacity:0,scale:.8}},g=e.jsx(te,{children:i&&e.jsx(U.div,{ref:p,variants:k,initial:"hidden",animate:"visible",exit:"exit",transition:{duration:.15},className:"fixed z-50 pointer-events-none",style:{left:d.x,top:d.y},children:e.jsxs("div",{className:N("absolute whitespace-nowrap",St[t]),children:[e.jsx("div",{className:N("bg-gray-900 text-white text-sm rounded px-2 py-1 max-w-xs",c),children:s}),e.jsx("div",{className:N("absolute w-0 h-0 border-4",Pt[t])})]})})});return e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:l,className:N("inline-block",a),onMouseEnter:j,onMouseLeave:f,onFocus:j,onBlur:f,children:r}),Le.createPortal(g,document.body)]})},q={apiKey:"AIzaSyC5WpGFSO4LOpO8mFa_8hyIf9bflVsrWyo",authDomain:"taskplanner-mvp.firebaseapp.com",projectId:"taskplanner-mvp",storageBucket:"taskplanner-mvp.firebasestorage.app",messagingSenderId:"574857486152",appId:"1:574857486152:web:af4c6cf9c4d86a2fad9d7d",measurementId:"G-HVFRRF3XQK"};function Lt(){return Fe().length>0?ze():Ue(q)}const se=Lt(),Dt=$(se),F=Oe(se);Ae().then(r=>{r&&Me(se)});q.projectId,q.apiKey,q.authDomain;const S={MAX_PROJECTS_PER_MODE:10,MAX_PROJECTS_UNVERIFIED:3,DEFAULT_PROJECT_NAME:"Inbox",MAX_PROJECT_NAME_LENGTH:50,MAX_PROJECT_DESCRIPTION_LENGTH:500},ve=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#F97316"],be=["ðŸ“","ðŸ ","ðŸ’¼","ðŸŽ¯","ðŸ“š","ðŸ’¡","ðŸš€","â­","ðŸ“¥"];class C extends Error{constructor(s,t,o){super(s),this.code=t,this.originalError=o,this.name="ProjectServiceError"}}class Tt{getUserProjectsRef(s){return B(F,"users",s,"projects")}generateProjectId(){return`proj_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}validateUserId(s){if(!s||typeof s!="string"||s.trim()==="")throw new C("Valid userId is required","INVALID_USER_ID")}validateProjectId(s){if(!s||typeof s!="string"||s.trim()==="")throw new C("Valid projectId is required","INVALID_PROJECT_ID")}async createProject(s,t){if(this.validateUserId(s),!t?.name?.trim())throw new C("Project name is required","INVALID_PROJECT_NAME");try{const o=await this.getProjects(s,{filters:{mode:t.mode}}),n=Dt.currentUser,a=n?.providerData.some(p=>p.providerId==="google.com");if(n?.emailVerified||a){if(o.length>=S.MAX_PROJECTS_PER_MODE)throw new C(`Maximum ${S.MAX_PROJECTS_PER_MODE} projects allowed per mode`,"PROJECT_LIMIT_EXCEEDED")}else if((await this.getProjects(s)).length>=S.MAX_PROJECTS_UNVERIFIED)throw new C(`Unverified accounts are limited to ${S.MAX_PROJECTS_UNVERIFIED} projects. Please verify your email to create more.`,"PROJECT_LIMIT_EXCEEDED");const i=o.reduce((p,v)=>Math.max(p,v.position),0),u=this.generateProjectId(),d=oe.now(),h={projectId:u,name:t.name.trim(),description:t.description?.trim()||"",mode:t.mode,color:t.color||"#3B82F6",icon:t.icon||"ðŸ“",taskCount:0,completedTaskCount:0,createdAt:d,updatedAt:d,userId:s,isArchived:!1,isDeleted:!1,isDefault:!1,position:i+1},l=T(this.getUserProjectsRef(s),u);return await V(l,h).catch(()=>ne(this.getUserProjectsRef(s),h)),this.mapDocumentToProject({id:u,...h})}catch(o){throw o instanceof C?o:this.handleFirestoreError(o,"Failed to create project")}}async getOrCreateDefaultProject(s,t){if(this.validateUserId(s),!t||t!=="personal"&&t!=="professional")throw new C("Valid mode is required","INVALID_MODE");try{const o=this.getUserProjectsRef(s),n=L(o,R("isDefault","==",!0),R("mode","==",t),Be(1)),a=await A(n);if(!a.empty)return this.mapDocumentToProject(a.docs[0]);const c=this.generateProjectId(),i=oe.now(),u={projectId:c,name:S.DEFAULT_PROJECT_NAME,description:"Default project for unassigned tasks",mode:t,color:"#6B7280",icon:"ðŸ“¥",taskCount:0,completedTaskCount:0,createdAt:i,updatedAt:i,userId:s,isArchived:!1,isDeleted:!1,isDefault:!0,position:0},d=T(this.getUserProjectsRef(s),c);return await V(d,u).catch(async()=>{await ne(this.getUserProjectsRef(s),u)}),this.mapDocumentToProject({id:c,...u})}catch(o){throw this.handleFirestoreError(o,"Failed to get/create default project")}}async updateProject(s,t,o){this.validateUserId(s),this.validateProjectId(t);try{const n=T(this.getUserProjectsRef(s),t),a=await W(n);if(!a.exists())throw new C("Project not found","PROJECT_NOT_FOUND");const c=a.data();if(c.isDefault&&o.name&&o.name!==c.name)throw new C("Cannot rename default Inbox project","CANNOT_RENAME_DEFAULT");const i={...o,updatedAt:ae()};o.name&&(i.name=o.name.trim()),o.description!==void 0&&(i.description=o.description.trim()),await V(n,i);const u=await W(n);return this.mapDocumentToProject(u)}catch(n){throw n instanceof C?n:this.handleFirestoreError(n,"Failed to update project")}}async getProject(s,t){this.validateUserId(s),this.validateProjectId(t);try{const o=T(this.getUserProjectsRef(s),t),n=await W(o);if(!n.exists())throw new C("Project not found","PROJECT_NOT_FOUND");return this.mapDocumentToProject(n)}catch(o){throw o instanceof C?o:this.handleFirestoreError(o,"Failed to get project")}}async getProjects(s,t={}){this.validateUserId(s);try{const o=this.getUserProjectsRef(s);let n=L(o,R("isDeleted","==",!1));t.filters?.mode&&(n=L(n,R("mode","==",t.filters.mode))),t.filters?.isArchived!==void 0&&(n=L(n,R("isArchived","==",t.filters.isArchived)));const a=t.orderBy||"position",c=t.orderDirection||"asc";return n=L(n,ie(a,c)),(await A(n)).docs.map(u=>this.mapDocumentToProject(u))}catch(o){throw this.handleFirestoreError(o,"Failed to get projects")}}async checkProjectDeletion(s,t){this.validateUserId(s),this.validateProjectId(t);try{const o=T(this.getUserProjectsRef(s),t),n=await W(o);if(!n.exists())throw new C("Project not found","PROJECT_NOT_FOUND");const a=n.data();if(a.isDefault)return{canDelete:!1,hasIncompleteTasks:!1,incompleteTaskCount:0,totalTaskCount:a.taskCount||0};const c=B(F,"users",s,"tasks"),i=L(c,R("projectId","==",t),R("isDeleted","==",!1)),u=await A(i);let d=0;return u.docs.forEach(h=>{const l=h.data();l.status!=="completed"&&!l.completed&&d++}),{canDelete:!0,hasIncompleteTasks:d>0,incompleteTaskCount:d,totalTaskCount:u.size}}catch(o){throw o instanceof C?o:this.handleFirestoreError(o,"Failed to check project deletion")}}async deleteProject(s,t,o=!1){this.validateUserId(s),this.validateProjectId(t);try{const n=await this.checkProjectDeletion(s,t);if(!n.canDelete)throw new C("Cannot delete default Inbox project","CANNOT_DELETE_DEFAULT");if(n.hasIncompleteTasks&&!o)throw new C(`Project has ${n.incompleteTaskCount} incomplete task(s). Confirmation required.`,"CONFIRMATION_REQUIRED");const a=Ve(F),c=B(F,"users",s,"tasks"),i=L(c,R("projectId","==",t));(await A(i)).docs.forEach(h=>{a.delete(h.ref)});const d=T(this.getUserProjectsRef(s),t);a.delete(d),await a.commit()}catch(n){throw n instanceof C?n:this.handleFirestoreError(n,"Failed to delete project")}}async updateTaskCounts(s,t){this.validateUserId(s),this.validateProjectId(t);try{const o=B(F,"users",s,"tasks"),n=L(o,R("projectId","==",t),R("isDeleted","==",!1)),a=await A(n);let c=0,i=0;a.docs.forEach(d=>{const h=d.data();c++,(h.status==="completed"||h.completed)&&i++});const u=T(this.getUserProjectsRef(s),t);await V(u,{taskCount:c,completedTaskCount:i,updatedAt:ae()})}catch(o){throw this.handleFirestoreError(o,"Failed to update task counts")}}subscribeToProjects(s,t,o={}){if(!s||typeof s!="string"||s.trim()==="")return console.error("Invalid userId for project subscription"),()=>{};const n=this.getUserProjectsRef(s);let a=L(n,R("isDeleted","==",!1));return o.filters?.mode&&(a=L(a,R("mode","==",o.filters.mode))),a=L(a,ie(o.orderBy||"position",o.orderDirection||"asc")),We(a,c=>{const i=c.docs.map(u=>this.mapDocumentToProject(u));t(i)},c=>{console.error("Projects subscription error:",c)})}mapDocumentToProject(s){const t=s.data?.()||s;return{id:s.id||t.projectId,name:t.name||"",description:t.description||"",mode:t.mode||"personal",color:t.color||"#3B82F6",icon:t.icon||"ðŸ“",taskCount:t.taskCount||0,completedTaskCount:t.completedTaskCount||0,createdAt:t.createdAt?.toDate?.()?.toISOString()||new Date().toISOString(),updatedAt:t.updatedAt?.toDate?.()?.toISOString()||new Date().toISOString(),userId:t.userId||"",isArchived:t.isArchived||!1,isDeleted:t.isDeleted||!1,isDefault:t.isDefault||!1,position:t.position||0}}handleFirestoreError(s,t){return console.error("Firestore error:",s),new C(s.message||t,s.code,s)}}const ee=new Tt;function It({userId:r,mode:s,onClose:t,onCreated:o}){const[n,a]=w.useState(""),[c,i]=w.useState(""),[u,d]=w.useState(ve[0]),[h,l]=w.useState(be[0]),[p,v]=w.useState(!1),[j,f]=w.useState(null),[x,k]=w.useState(0),g=X(xt.isEmailVerified),y=$().currentUser?.providerData.some(m=>m.providerId==="google.com"),_=g||y;w.useEffect(()=>{if(r)return ee.subscribeToProjects(r,m=>{k(m.length)},{filters:{mode:s,isArchived:!1}})},[r,s]);const E=!_&&x>=S.MAX_PROJECTS_UNVERIFIED,b=async m=>{if(m.preventDefault(),!n.trim()){f("Project name is required");return}if(n.length>S.MAX_PROJECT_NAME_LENGTH){f(`Name must be ${S.MAX_PROJECT_NAME_LENGTH} characters or less`);return}v(!0),f(null);try{const I=await ee.createProject(r,{name:n.trim(),description:c.trim(),mode:s,color:u,icon:h});o(I)}catch(I){f(I.message||"Failed to create project"),v(!1)}};return e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-content",onClick:m=>m.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Create New Project"}),e.jsx("button",{className:"close-btn",onClick:t,children:"Ã—"})]}),e.jsxs("form",{onSubmit:b,children:[!_&&e.jsxs("div",{className:`restriction-banner ${E?"limit-reached":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("span",{children:E?`You've reached the ${S.MAX_PROJECTS_UNVERIFIED} project limit for unverified accounts.`:`Unverified accounts are limited to ${S.MAX_PROJECTS_UNVERIFIED} projects. (${x}/${S.MAX_PROJECTS_UNVERIFIED})`})]}),!E&&e.jsxs("p",{className:"mt-1 text-xs opacity-80",children:["Verify your email for up to ",S.MAX_PROJECTS_PER_MODE," projects."]}),E&&e.jsx("p",{className:"mt-1 text-xs opacity-90 font-medium",children:"Please verify your email to create more projects."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"project-name",children:"Project Name"}),e.jsx("input",{id:"project-name",type:"text",value:n,onChange:m=>a(m.target.value),placeholder:"Enter project name",maxLength:S.MAX_PROJECT_NAME_LENGTH,autoFocus:!0}),e.jsxs("span",{className:"char-count",children:[n.length,"/",S.MAX_PROJECT_NAME_LENGTH]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"project-description",children:"Description (optional)"}),e.jsx("textarea",{id:"project-description",value:c,onChange:m=>i(m.target.value),placeholder:"Brief description of this project",maxLength:S.MAX_PROJECT_DESCRIPTION_LENGTH,rows:2})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Icon"}),e.jsx("div",{className:"icon-grid",children:be.filter(m=>m!=="ðŸ“¥").map(m=>e.jsx("button",{type:"button",className:`icon-option ${h===m?"selected":""}`,onClick:()=>l(m),children:m},m))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Color"}),e.jsx("div",{className:"color-grid",children:ve.map(m=>e.jsx("button",{type:"button",className:`color-option ${u===m?"selected":""}`,style:{backgroundColor:m},onClick:()=>d(m)},m))})]}),j&&e.jsx("div",{className:"error-message",children:j}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"cancel-btn",onClick:t,children:"Cancel"}),e.jsx("button",{type:"submit",className:"submit-btn",disabled:p||E,children:p?"Creating...":E?"Limit Reached":"Create Project"})]})]}),e.jsx("style",{children:`
          .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
          }

          .modal-content {
            background: white;
            border-radius: 16px;
            padding: 24px;
            width: 90%;
            max-width: 440px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
          }

          .restriction-banner {
            padding: 12px;
            background: #fefce8;
            border: 1px solid #fef08a;
            border-radius: 8px;
            color: #854d0e;
            font-size: 13px;
            margin-bottom: 20px;
          }

          .restriction-banner.limit-reached {
            background: #fff7ed;
            border-color: #ffedd5;
            color: #9a3412;
          }

          .flex { display: flex; }
          .items-center { align-items: center; }
          .gap-2 { gap: 8px; }
          .mt-1 { margin-top: 4px; }
          .text-xs { font-size: 11px; }
          .opacity-80 { opacity: 0.8; }
          .font-medium { font-weight: 500; }

          .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
          }

          .modal-header h2 {
            font-size: 18px;
            font-weight: 600;
            color: #1f2937;
            margin: 0;
          }

          .close-btn {
            width: 32px;
            height: 32px;
            border: none;
            background: #f3f4f6;
            border-radius: 8px;
            font-size: 20px;
            cursor: pointer;
            color: #6b7280;
            display: flex;
            align-items: center;
            justify-content: center;
          }

          .close-btn:hover {
            background: #e5e7eb;
          }

          .form-group {
            margin-bottom: 16px;
            position: relative;
          }

          .form-group label {
            display: block;
            font-size: 13px;
            font-weight: 500;
            color: #374151;
            margin-bottom: 6px;
          }

          .form-group input,
          .form-group textarea {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.15s ease;
          }

          .form-group input:focus,
          .form-group textarea:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
          }

          .char-count {
            position: absolute;
            right: 8px;
            top: 34px;
            font-size: 11px;
            color: #9ca3af;
          }

          .icon-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
          }

          .icon-option {
            width: 40px;
            height: 40px;
            border: 2px solid #e5e7eb;
            background: white;
            border-radius: 8px;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.15s ease;
          }

          .icon-option:hover {
            border-color: #d1d5db;
            background: #f9fafb;
          }

          .icon-option.selected {
            border-color: #3b82f6;
            background: #eff6ff;
          }

          .color-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
          }

          .color-option {
            width: 32px;
            height: 32px;
            border: 3px solid transparent;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.15s ease;
          }

          .color-option:hover {
            transform: scale(1.1);
          }

          .color-option.selected {
            border-color: #1f2937;
            box-shadow: 0 0 0 2px white inset;
          }

          .error-message {
            padding: 10px 12px;
            background: #fee2e2;
            border-radius: 8px;
            color: #dc2626;
            font-size: 13px;
            margin-bottom: 16px;
          }

          .form-actions {
            display: flex;
            gap: 12px;
            margin-top: 20px;
          }

          .cancel-btn {
            flex: 1;
            padding: 12px;
            background: #f3f4f6;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            color: #374151;
            cursor: pointer;
          }

          .cancel-btn:hover {
            background: #e5e7eb;
          }

          .submit-btn {
            flex: 1;
            padding: 12px;
            background: #3b82f6;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            color: white;
            cursor: pointer;
          }

          .submit-btn:hover:not(:disabled) {
            background: #2563eb;
          }

          .submit-btn:disabled {
            background: #9ca3af;
            cursor: not-allowed;
          }
        `})]})})}const Ot=[{id:"today",label:"Today",path:"/tasks?filter=today",icon:e.jsx("svg",{className:"w-5 h-5 text-amber-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})},{id:"upcoming",label:"Upcoming",path:"/tasks?filter=upcoming",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})},{id:"recurring",label:"Recurring",path:"/tasks?filter=recurring",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})},{id:"completed",label:"Completed",path:"/tasks?filter=completed",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})},{id:"trash",label:"Trash",path:"/tasks?filter=trash",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}],At=[{id:"widget",label:"Widget",path:"/widget",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})},{id:"settings",label:"Settings",path:"/settings",icon:e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})},{id:"help",label:"Help & Support",path:"/help",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}],Z=({item:r,isActive:s,collapsed:t,onClick:o})=>{const n=()=>{o(r.path)},a=e.jsxs(U.button,{whileHover:{x:t?0:4},whileTap:{scale:.98},onClick:n,className:N("w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",t?"justify-center":"justify-start",s?"bg-primary-100 text-primary-900 border-r-2 border-primary-600":"text-gray-700 hover:text-gray-900 hover:bg-gray-100"),children:[e.jsx("span",{className:"flex-shrink-0",children:r.icon}),!t&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"ml-3 flex-1 text-left",children:r.label}),r.badge&&e.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-gray-200 text-gray-700 rounded-full",children:r.badge})]})]});return t?e.jsx(Rt,{content:r.label,position:"right",children:a}):a},Mt=({collapsed:r=!1,className:s})=>{const t=we(),o=De(),{user:n}=X(),[a,c]=w.useState([]),[i,u]=w.useState(!1);w.useEffect(()=>{if(n?.uid)return ee.subscribeToProjects(n.uid,l=>{c(l)})},[n?.uid]);const d=l=>{t(l)},h=l=>o.pathname===l||o.pathname.startsWith(l+"/");return e.jsxs("nav",{className:N("px-3 space-y-6",s),children:[e.jsx("div",{className:"space-y-1",children:e.jsx("div",{className:"space-y-1",children:Ot.map(l=>e.jsx(Z,{item:l,isActive:h(l.path),collapsed:r,onClick:d},l.id))})}),e.jsxs("div",{className:"space-y-1",children:[!r&&e.jsxs("div",{className:"px-3 flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Projects"}),e.jsx("button",{onClick:l=>{l.preventDefault(),u(!0)},className:"text-gray-400 hover:text-primary-600 transition-colors",title:"Add Project",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]}),e.jsxs("div",{className:"space-y-1",children:[a.filter(l=>!l.isDefault).map(l=>e.jsx(Z,{item:{id:l.id,label:l.name,path:`/tasks?projectId=${l.id}`,icon:e.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:l.color||"#9CA3AF"}}),badge:l.taskCount>0?l.taskCount:void 0},isActive:o.search.includes(`projectId=${l.id}`),collapsed:r,onClick:d},l.id)),a.length===0&&!r&&e.jsx("p",{className:"px-3 py-2 text-xs text-gray-400 italic",children:"No projects yet"})]})]}),e.jsxs("div",{className:"space-y-1",children:[!r&&e.jsx("h3",{className:"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Settings"}),e.jsx("div",{className:"space-y-1",children:At.map(l=>e.jsx(Z,{item:l,isActive:h(l.path),collapsed:r,onClick:d},l.id))})]}),i&&n&&e.jsx(It,{userId:n.uid,mode:"personal",onClose:()=>u(!1),onCreated:l=>{u(!1),d(`/tasks?projectId=${l.id}`)}})]})},Ft={open:{opacity:1},closed:{opacity:0}},zt=({className:r})=>{const{sidebarOpen:s,sidebarCollapsed:t,setSidebarOpen:o,toggleSidebarCollapsed:n}=Q(),a=()=>{o(!1)},c=N("fixed inset-y-0 left-0 z-50 w-64 bg-white border-r border-gray-200","transform transition-transform duration-300 ease-in-out lg:translate-x-0","flex flex-col",t&&"lg:w-16",r);return e.jsxs(e.Fragment,{children:[e.jsx(te,{children:s&&e.jsx(U.div,{variants:Ft,initial:"closed",animate:"open",exit:"closed",className:"fixed inset-0 z-40 bg-black/50 lg:hidden",onClick:a})}),e.jsxs("aside",{className:N(c,s?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:[e.jsxs("div",{className:N("flex items-center justify-between p-4 border-b border-gray-200",t&&"lg:justify-center"),children:[!t&&e.jsx(ke,{to:"/",className:"flex items-center hover:opacity-80 transition-opacity",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Home"})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:n,className:"hidden lg:flex p-1.5 rounded-lg hover:bg-gray-100 transition-colors","aria-label":t?"Expand sidebar":"Collapse sidebar",children:e.jsx("svg",{className:N("w-4 h-4 text-gray-600 transition-transform",t&&"rotate-180"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:a,className:"lg:hidden p-1.5 rounded-lg hover:bg-gray-100 transition-colors","aria-label":"Close sidebar",children:e.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto py-4",children:e.jsx(Mt,{collapsed:t})}),e.jsx("div",{className:N("p-4 border-t border-gray-200",t&&"lg:px-2"),children:t?e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})}):e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:"Home"}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:"v1.0.0"})]})]})})})]}),e.jsx("div",{className:N("hidden lg:block flex-shrink-0 transition-all duration-300",t?"w-16":"w-64")})]})},Ut=({children:r,className:s,showHeader:t=!0,showSidebar:o=!0,headerProps:n={},sidebarProps:a={}})=>{const{sidebarCollapsed:c}=Q();return e.jsxs("div",{className:N("min-h-screen bg-gray-50",s),children:[o&&e.jsx(zt,{...a}),e.jsxs("div",{className:N("flex flex-col min-h-screen",o&&(c?"lg:ml-16":"lg:ml-64")),children:[t&&e.jsx(Ct,{...n}),e.jsx("main",{className:"flex-1 overflow-x-hidden",children:r})]})]})},Bt=w.lazy(()=>D(()=>import("./Dashboard-iumOXe0t.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),Vt=w.lazy(()=>D(()=>import("./Tasks-BrUTKskO.js"),__vite__mapDeps([8,2,3,1,4,5,6,7]))),Wt=w.lazy(()=>D(()=>import("./Analytics-oBd_ENny.js"),__vite__mapDeps([9,2,3,1,7,4,6]))),Jt=w.lazy(()=>D(()=>import("./Widget-BaPsGC4s.js"),__vite__mapDeps([10,2,3,1,4,7,6]))),Ht=w.lazy(()=>D(()=>import("./StickiesDemo-BiRjj2V8.js"),__vite__mapDeps([11,2,3,1,12,7,4,6]))),qt=w.lazy(()=>D(()=>import("./WidgetOnly-BuDPChuZ.js"),__vite__mapDeps([13,2,3,1,12,7,4,6]))),$t=w.lazy(()=>D(()=>import("./Login-DvptwNjr.js"),__vite__mapDeps([14,2,3,1,7,4,6]))),Xt=w.lazy(()=>D(()=>import("./Register-4PS7YH2E.js"),__vite__mapDeps([15,2,3,1,7,4,6]))),Qt=w.lazy(()=>D(()=>import("./HelpSupport-UgIq-Y59.js"),__vite__mapDeps([16,3,2,1,7,4,6]))),Gt=w.lazy(()=>D(()=>import("./Settings-fgfANNkm.js"),__vite__mapDeps([17,3,2,1,7,4,6])));function Pe(){return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading..."})]})})}function Kt(){return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx(Ee,{})})}function Yt(){const{user:r,setUser:s,setLoading:t}=X(),[o,n]=w.useState(!0);return w.useEffect(()=>{const a=$(),c=Je(a,i=>{if(i){const u={uid:i.uid,email:i.email,displayName:i.displayName,photoURL:i.photoURL,emailVerified:i.emailVerified,providerId:i.providerData[0]?.providerId};s(u)}else s(null);n(!1),t(!1)});return()=>c()},[s,t]),o?e.jsx(Pe,{}):r?e.jsx(Ut,{children:e.jsx(Ee,{})}):e.jsx(Ne,{to:"/login",replace:!0})}function Zt(){return e.jsx(w.Suspense,{fallback:e.jsx(Pe,{}),children:e.jsxs(Te,{children:[e.jsxs(P,{element:e.jsx(Kt,{}),children:[e.jsx(P,{path:"/login",element:e.jsx($t,{})}),e.jsx(P,{path:"/register",element:e.jsx(Xt,{})})]}),e.jsx(P,{path:"/w",element:e.jsx(qt,{})}),e.jsxs(P,{element:e.jsx(Yt,{}),children:[e.jsx(P,{path:"/",element:e.jsx(Bt,{})}),e.jsx(P,{path:"/tasks",element:e.jsx(Vt,{})}),e.jsx(P,{path:"/analytics",element:e.jsx(Wt,{})}),e.jsx(P,{path:"/widget",element:e.jsx(Jt,{})}),e.jsx(P,{path:"/stickies",element:e.jsx(Ht,{})}),e.jsx(P,{path:"/help",element:e.jsx(Qt,{})}),e.jsx(P,{path:"/settings",element:e.jsx(Gt,{})})]}),e.jsx(P,{path:"*",element:e.jsx(Ne,{to:"/",replace:!0})})]})})}const er=new qe({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:300*1e3}}});Ye.createRoot(document.getElementById("root")).render(e.jsx(O.StrictMode,{children:e.jsx($e,{client:er,children:e.jsx(Ie,{children:e.jsx(Zt,{})})})}));export{Dt as a,xt as b,Q as c,F as d,e as j,X as u};
//# sourceMappingURL=index-DfqPk0_m.js.map
